!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r(305);var a=r(16),i=n(a),o=r(8),s=n(o),c=r(55),l=n(c),u=r(45),d=n(u),h=r(99),f=n(h),p=r(26),g=(n(p),r(107)),v=n(g),m=r(172),y=n(m),w=r(54),x=n(w),b=r(78),_=n(b),S=r(87),k=n(S),C=r(61),T=n(C),E=r(143),P=n(E),A=r(63),M=n(A),R=r(66),O=n(R),I=r(114),D=(n(I),r(10)),N=n(D);i["default"].on("ready",function(){s["default"].initialize(),P["default"].initialize(),N["default"].mark("load.chart.firstDraw"),console.timeStamp&&console.timeStamp("chart:firstDraw"),T["default"].initialize(),N["default"].mark("load.depth.firstDraw"),console.timeStamp&&console.timeStamp("depth:firstDraw"),y["default"].initialize(),N["default"].mark("load.feed.firstDraw"),console.timeStamp&&console.timeStamp("feed:firstDraw"),setTimeout(function(){l["default"].initialize(),x["default"].initialize(),_["default"].initialize(),k["default"].initialize(),d["default"].initialize(),f["default"].initialize(),v["default"].initialize(),M["default"].initialize(),O["default"].initialize()},1)}),i["default"].initialize()},function(e,t,r){"use strict";var n=r(9),a=r(33),i=r(29),o=r(23),s=r(27),c="prototype",l=function u(e,t,r){var l,d,h,f,p=e&u.F,g=e&u.G,v=e&u.S,m=e&u.P,y=e&u.B,w=g?n:v?n[t]||(n[t]={}):(n[t]||{})[c],x=g?a:a[t]||(a[t]={}),b=x[c]||(x[c]={});g&&(r=t);for(l in r)d=!p&&w&&l in w,h=(d?w:r)[l],f=y&&d?s(h,n):m&&"function"==typeof h?s(Function.call,h):h,w&&!d&&o(w,l,h),x[l]!=h&&i(x,l,f),m&&b[l]!=h&&(b[l]=h)};n.core=a,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,e.exports=l},function(e,t){"use strict";var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t,r){"use strict";function n(){}function a(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(e){return e===Object(e)}function o(e){if(!i(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function s(e){for(var t,r,n={},a=e.split("&"),i=0,o=a.length;o>i;++i)r=a[i],t=r.split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return n}function c(e){var t,r,n,a,i=e.split(/\r?\n/),o={};i.pop();for(var s=0,c=i.length;c>s;++s)r=i[s],t=r.indexOf(":"),n=r.slice(0,t).toLowerCase(),a=m(r.slice(t+1)),o[n]=a;return o}function l(e){return e.split(/ *; */).shift()}function u(e){return g(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),n=r.shift(),a=r.shift();return n&&a&&(e[n]=a),e},{})}function d(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function h(e,t){var r=this;p.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new d(r)}catch(n){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=n,r.callback(e)}if(r.emit("response",t),e)return r.callback(e,t);if(t.status>=200&&t.status<300)return r.callback(e,t);var a=new Error(t.statusText||"Unsuccessful HTTP response");a.original=e,a.response=t,a.status=t.status,r.callback(e||a,t)})}function f(e,t){return"function"==typeof t?new h("GET",e).end(t):1==arguments.length?new h("GET",e):new h(e,t)}var p=r(14),g=r(15),v="undefined"==typeof window?self:window;f.getXHR=function(){if(!(!v.XMLHttpRequest||v.location&&"file:"==v.location.protocol&&v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var m="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};f.serializeObject=o,f.parseString=s,f.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},f.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},f.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},d.prototype.get=function(e){return this.header[e.toLowerCase()]},d.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=l(t);var r=u(t);for(var n in r)this[n]=r[n]},d.prototype.parseBody=function(e){var t=f.parse[this.type];return t&&e&&(e.length||e instanceof Object)?t(e):null},d.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},d.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",a=new Error(n);return a.status=this.status,a.method=t,a.url=r,a},f.Response=d,p(h.prototype),h.prototype.use=function(e){return e(this),this},h.prototype.timeout=function(e){return this._timeout=e,this},h.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},h.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},h.prototype.set=function(e,t){if(i(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},h.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},h.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},h.prototype.type=function(e){return this.set("Content-Type",f.types[e]||e),this},h.prototype.accept=function(e){return this.set("Accept",f.types[e]||e),this},h.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},h.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},h.prototype.field=function(e,t){return this._formData||(this._formData=new v.FormData),this._formData.append(e,t),this},h.prototype.attach=function(e,t,r){return this._formData||(this._formData=new v.FormData),this._formData.append(e,t,r),this},h.prototype.send=function(e){var t=i(e),r=this.getHeader("Content-Type");if(t&&i(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||a(e)?this:(r||this.type("json"),this)},h.prototype.callback=function(e,t){var r=this._callback;this.clearTimeout(),r(e,t)},h.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},h.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},h.prototype.withCredentials=function(){return this._withCredentials=!0,this},h.prototype.end=function(e){var t=this,r=this.xhr=f.getXHR(),i=this._query.join("&"),o=this._timeout,s=this._formData||this._data;this._callback=e||n,r.onreadystatechange=function(){if(4==r.readyState){var e;try{e=r.status}catch(n){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var c=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.emit("progress",e)};this.hasListeners("progress")&&(r.onprogress=c);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=c)}catch(l){}if(o&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},o)),i&&(i=f.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof s&&!a(s)){var u=f.serialize[this.getHeader("Content-Type")];u&&(s=u(s))}for(var d in this.header)null!=this.header[d]&&r.setRequestHeader(d,this.header[d]);return this.emit("request",this),r.send(s),this},f.Request=h,f.get=function(e,t,r){var n=f("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},f.head=function(e,t,r){var n=f("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},f.del=function(e,t){var r=f("DELETE",e);return t&&r.end(t),r},f.patch=function(e,t,r){var n=f("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},f.post=function(e,t,r){var n=f("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},f.put=function(e,t,r){var n=f("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},e.exports=f},function(e,t){"use strict";e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";t.__esModule=!0,t["default"]={roundTo:function(e,t){var r=e%t;return r<=Math.floor(t/2)?e-r:e+(t-r)},roundDownTo:function(e,t){var r=e%t;return e-r},roundUpTo:function(e,t){var r=e%t;return e+(t-r)},sharpen:function(e){return Math.floor(e)+.5},percentageAsString:function(e){return Math.abs(100*e).toFixed(2)+"%"},amountToRoundedNumber:function(e){return e>1e4?100*Math.round(e/100):parseFloat(e.toFixed(2))},amountToString:function(e){return e>1e4?(e/1e3).toFixed(1)+"K":e.toFixed(2)},doubleDigits:function(e){return 0==e?"00":""+(10>e?"0":"")+e}},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(4);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){"use strict";var n=r(133)("wks"),a=r(44),i=r(9).Symbol;e.exports=function(e){return n[e]||(n[e]=i&&i[e]||(i||a)("Symbol."+e))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(16),i=(n(a),r(12)),o=n(i),s=r(30),c=n(s),l=r(179),u=n(l),d=r(10),h=n(d),f=r(49),p=(n(f),r(176)),g=n(p),v=r(85),m=50,y={initialize:function(){var e=this;this.tickers={},this.orderbook=new g["default"]([],[]),this._loadImmediateIntervals(),this._loadImmediateOrderBook(),this._loadImmediateTrades(),setTimeout(function(){e.loadAllIntervals()},10)},_loadImmediateIntervals:function(){this.intervalQueues={};var e=this.parseStringIntervals(cryptowatch.intervals,cryptowatch.periodInt);this.intervalQueues[cryptowatch.periodInt]=e,this.trigger("intervalQueues:initialLoad")},_loadImmediateOrderBook:function(){this.handleOrderBook(cryptowatch.orderBook)},_loadImmediateTrades:function(){this.handleTrades(cryptowatch.trades.PublicTrades)},loadAllIntervals:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];$.ajax({type:"GET",url:"/"+cryptowatch.exchange.slug+"/"+cryptowatch.currencyPair.slug+".json",success:function(r){for(var n in r)if(void 0===e.intervalQueues[n]){e.intervalQueues[n]=e.parseStringIntervals(r[n],parseInt(n,10))}e.readyForHotLoad=!0,e.trigger("intervalQueues:load"),t.success&&t.success(),h["default"].mark("load.timeToAllIntervals")},error:function(e){t.error&&t.error(),console.error(e)}})},updateIntervals:function(e){for(var t={},r=e,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if(a=r.next(),a.done)break;i=a.value}var o=i;o.Interval.Time-=o.Period;this.updateInterval(o.Interval,o.Period);void 0===t[o.Period]?t[o.Period]=1:t[o.Period]++}for(var s in t)void 0!==this.intervalQueues[s]&&t[s]>1&&(c["default"].info("Received "+t[s]+" past intervals for "+s),this.intervalQueues[s].sort());this.tickers[cryptowatch.market.slug].price=this.intervalQueues[cryptowatch.periodInt].last.Candle.Close,this.trigger("ticker:update",this.tickers[cryptowatch.market.slug])},updateInterval:function(e,t){var r=this.intervalQueues[t];if(void 0!==r){var n=r.last.Time;this.intervalQueues[t].set(e),this.trigger("intervalQueues:update",e,t),r.last.Time!==n&&this.trigger("intervalQueues:push",e,t)}},parseStringIntervals:function(e,t){e=e.map(function(e){var t=e.split(" ").map(parseFloat);return{Time:t[0],Candle:{Open:t[1],High:t[2],Low:t[3],Close:t[4]},Volume:t[5]}}),e=this.sanitizeData(e),e=this.filterOutBadData(e,t);for(var r=0;r<e.length;r++)e[r].Time-=t,e[r].i=r;0===e.length&&e.push({Time:0,Candle:{Open:0,High:0,Low:0,Close:0},Volume:0});var n=new u["default"](e,t);return n.fillGapsFromIndex(0),n},sanitizeData:function(e){var t,r=[];return e.forEach(function(e){var n=Math.max(e.Candle.Open,e.Candle.Close),a=Math.min(e.Candle.Open,e.Candle.Close),i=n-a;return e.Candle.High-n>10*i,e.Candle.Low>a,t&&e.Time<t.Time?void console.warn("Backwards interval:",e):(r.push(e),void(t=e))}),r},filterOutBadData:function(e,t){var r=0,n=0;return e=e.filter(function(e){var a=-1==[e.Candle.Low,e.Candle.High,e.Candle.Open,e.Candle.Close].indexOf(0),i=e.Time%t===0,o=e.Time>n;return n=e.Time,i||r++,o||r++,a&&i&&o}),r>0&&c["default"].warn("Ignored "+r+" bad intervals because of their close time"),e},_nextTradeIndex:0,handleTrades:function(e){if(null!==e){var t=this.trades?this.trades[this.trades.length-1]:null;t&&(e=e.filter(function(e){return 0===e.Amount||0===e.Price?!1:e.Timestamp>t.Timestamp||e.Timestamp===t.Timestamp&&e.Amount!==t.Amount&&e.Id!==t.Id&&e.Price!==t.Price}));for(var r=e,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if(a=r.next(),a.done)break;i=a.value}var o=i;o._index=this._nextTradeIndex,this._nextTradeIndex++}void 0===this.trades?this.trades=e.slice(-m):(this.trades=this.trades.concat(e),this.trades=this.trades.slice(-m)),this.trigger("trades:update",this.trades,e)}},handleTicker:function(e){var t=this.tickers[e.Market]={slug:e.Market,price:e.Price};this.trigger("ticker:update",t)},handleOrderBook:function(e){null===e.OrderBook.Asks&&null===e.OrderBook.Bids||(this.orderbook=new g["default"](v.parseOrderTuples(e.OrderBook.Bids),v.parseOrderTuples(e.OrderBook.Asks)),this.trigger("orderbook:resync"),this.trigger("orders:change"))},_lastDiffSequence:void 0,handleOrderBookDiff:function(e){this._ownOrderWasAffected=!1;var t=e.sequence,r=!1;void 0===this._lastDiffSequence?this._lastDiffSequence=t:this._lastDiffSequence+1!==t&&(r=!0),this.orderbook.apply("bid",e.bids),this.orderbook.apply("ask",e.asks),this._lastDiffSequence=t,this.trigger("orders:change"),r&&(c["default"].info("Resyncing orderbook due to skipped sequence number"),this.resync()),this._ownOrderWasAffected},resync:function(){this.trigger("orderbook:resync")},_squishOrders:function(e){var t=[],r=null;return e.forEach(function(e){var n=cryptowatch.currency.fmt(e.Price,cryptowatch.currencyPair.quote,{label:!1,currentExchangePrecision:!0});n===r?t[t.length-1].Amount+=e.Amount:t.push(e),r=n}),t},_trimOrders:function(e){if(0===e.length)return e;for(var t=[],r=e[0].Price,n=0;n<e.length;n++){var a=e[n];if(!(Math.abs(a.Price-r)<=.2*r))break;t.push(a)}return t},indexOrders:function(e,t){this.index={asks:this.indexList(e),bids:this.indexList(t)}},indexList:function(e){for(var t={},r=e,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if(a=r.next(),a.done)break;i=a.value}var o=i;t[o.Price]=o}return t},sortOrderBook:function(){this.orders.Asks=this.orders.Asks.sort(function(e,t){return e.Price-t.Price}),this.orders.Bids=this.orders.Bids.sort(function(e,t){return t.Price-e.Price})},currentPrice:function(){return this.intervalQueues[cryptowatch.periodInt].last.Candle.Close}};y=$.extend(y,o["default"]),t["default"]=y,e.exports=t["default"]},function(e,t){"use strict";var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(30),i=n(a);t["default"]={increment:function(e){this._send({action:"increment",key:e})},timing:function(e,t){this._send({action:"timing",key:e,value:t})},mark:function(e){if(window.performance&&window.performance.now){var t=Math.ceil(window.performance.now());i["default"].info("Mark "+e+": "+t+"ms"),this.timing(e,t)}},benchmark:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?.1:arguments[2];if(Math.random()>r)t();else{if(!window.performance)return;if(!window.performance.now)return;var n=window.performance.now();t(),this.timing(e,Math.ceil(window.performance.now()-n))}},_send:function(e){$.ajax({type:"POST",url:"/log/stats",data:e})}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(12),i=n(a),o=r(25),s=n(o),c=r(26),l=cryptowatch.currency={exchangeRates:void 0,convert:function(e,t,r){return t===r?e:-1===l.fiat.indexOf(t)?e:void 0===l.exchangeRates?e:void 0===t||void 0===r?e:"USD"===t?e*l.exchangeRates[r]:"USD"===r?e/l.exchangeRates[t]:l.convert(l.convert(e,t,"USD"),"USD",r)},fmt:function u(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(isNaN(e))return"-";void 0===r.label&&(r.label=!0),void 0===r.stripTrailingZeros&&(r.stripTrailingZeros=!1),void 0===r.currentExchangePrecision&&(r.currentExchangePrecision=!1),void 0===t&&(t=cryptowatch.currencyPair.quote),void 0!==l.fiatPreference&&l.fiat.indexOf(t)>-1&&(e=l.convert(e,t,l.fiatPreference),t=l.fiatPreference);var n=l.toPrecisionForCurrency(e,t,r);if(r.stripTrailingZeros&&(n=n.replace(/\.?0*$/,"")),r.label){var u=cryptowatch.currencies[t.toLowerCase()].fmt;return"function"==typeof u?u(n):u.replace("{!}",n)}return n},fmtPrice:function(e,t){return this.fmt(e,cryptowatch.currencyPair.quote,t)},fmtAmount:function(e,t){return this.fmt(e,cryptowatch.currencyPair.base,t)},toPrecisionForCurrency:function(e,t,r){var n=void 0;r.currentExchangePrecision&&(t===cryptowatch.currencyPair.base?n=cryptowatch.currencyPrecision[cryptowatch.currencyPair.base]:t===cryptowatch.currencyPair.quote&&(n=cryptowatch.currencyPrecision[cryptowatch.currencyPair.quote])),void 0===n&&(n=cryptowatch.currencies[t.toLowerCase()].precision);var a=e.toFixed(n);if(parseFloat(a)>e&&!r.roundUp){var i=Math.max(0,e-Math.pow(10,-n));return i.toFixed(n)}return a},fiatPreference:void 0,setFiatPreference:function(e){l.fiatPreference=e,$("[data-quotecurrency]").each(function(){var t=$(this),r=parseFloat(t.attr("value")),n=t.attr("data-quotecurrency"),a="true"===t.attr("data-label");if(!isNaN(r))if(void 0===e)t.text(l.fmt(r,n,{label:a}));else if(l.fiat.indexOf(n)>-1){var i=l.convert(r,n,e);t.text(l.fmt(i,e,{label:a}))}});var t=e||"actual";s["default"].savePreferenceInCookie("fiat-display",t),this.trigger("fiatPreference:change",t),c.store["interface"].forceUpdate()},getFiatPreference:function(){switch(this.fiatPreference){case"actual":return cryptowatch.currencyPair.quote;default:return this.fiatPreference}},fiat:["USD","CNY","EUR","CAD","ZAR","GBP","JPY"],viewingActualCurrency:function(){return void 0===this.fiatPreference||this.fiatPreference===cryptowatch.currencyPair.quote}};l=$.extend(l,i["default"]),window.cryptowatch.currency=l,t["default"]=l,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]={on:function(e,t){if(!(e instanceof Array))return this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t),this;for(var r=e,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if(a=r.next(),a.done)break;i=a.value}var o=i;this.on(o,t)}},off:function(e){return delete this._events[e],this},trigger:function(e){if(void 0!==this._events){var t=this._events[e];if(void 0!==t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;r>a;a++)n[a-1]=arguments[a];for(var i=0;i<t.length;i++){var o=t[i],s=o.call.apply(o,[this].concat(n));if(s===!1)break}}return this}}},e.exports=t["default"]},function(e,t){"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){"use strict";function r(e){return e?n(e):void 0}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,a=r.length;a>n;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){"use strict";e.exports=function(e,t,r){for(var n=0,a=e.length,i=3==arguments.length?r:e[n++];a>n;)i=t.call(null,i,e[n],++n,e);return i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(12),i=n(a),o=r(30),s=n(o),c={initialize:function(){/config=external/.test(window.location.toString())?(c.config=$.extend(!0,{},c.defaultConfig),s["default"].info("Waiting for config via postMessage")):(s["default"].info("Loading config from localStorage"),this._loadFromLocalStorage()),localStorage.setItem("lastRevision",cryptowatch.revision)},initialized:!1,getDefaultPadding:function(){return window.innerHeight<600?15:25},overlays:["ema","sma","sar","bollingerBands","keltnerChannel","ichimoku","chandelierExit","zigzag"],bottomIndicators:["rsi","stochRSI","aroon","macd","obv","volume","dpo"],defaultConfig:{candleWidth:5,candles:{spacing:3},depthZoomLevel:.015,indicators:{ema:{periods:[10,21,100,null,null],show:!0},sma:{periods:[15,50,null,null,null],show:!1},sar:{step:.025,maxStep:.05,show:!0},bollingerBands:{show:!1,period:20,stddevs:2},keltnerChannel:{show:!1,atrPeriod:14,atrs:2},volume:{show:!0,height:90},macd:{show:"main"===cryptowatch.integration,periods:[10,26],lag:9,height:150},dpo:{show:!1,period:20,height:100},rsi:{show:!1,periods:14,threshold:35,height:100},stochRSI:{show:!1,periods:14,maPeriods:5,height:90},obv:{show:!1,maPeriods:21,height:100},aroon:{show:!1,periods:25,height:100},ichimoku:{show:!1,tenkanPeriod:9,kijunPeriod:26},chandelierExit:{show:!1,periods:22,atrs:1},zigzag:{show:!1,threshold:7}},mouse:{scrollX:!0,scrollY:!0},showTrades:!0,showOrders:!0,showHistoryScroller:"main"===cryptowatch.integration,grid:!0,gridStyle:"solid",chartStyle:"OHLC",yAxis:"linear",yaxis:{depth:!0},padding:{price:25},performance:{animateFeeds:!1,frameRate:10,depthRefreshBatchWindow:500},drawing:{snap:!0,snapThreshold:25,extrapolate:!1}},_loadFromLocalStorage:function(){var e=JSON.parse(localStorage.getItem("config"));c._processConfig(e)},_processConfig:function(e){if(null===e||void 0===e.indicators||void 0===e.yAxis)e=$.extend(!0,{},c.defaultConfig);else{e=$.extend(!0,{},c.defaultConfig,e);for(var t in c.defaultConfig.indicators)e.indicators[t]=$.extend({},c.defaultConfig.indicators[t],e.indicators[t])}c.config=e,c.config.candleWidth%2==0&&(c.config.candleWidth=5),c.config.depthZoomLevel||(c.config.depthZoomLevel=c.defaultConfig.depthZoomLevel),cryptowatch.disable.settings.all||(this._setupListeners(),this.bindListeners(),this.writeConfigToDom()),c.initialized=!0,c.trigger("ready"),c.trigger("change"),c.cache()},cache:function(){localStorage.setItem("config",JSON.stringify(c.config))},shouldDraw:{ema:function(){return c.config.indicators.ema.show},sma:function(){return c.config.indicators.sma.show},sar:function(){return c.config.indicators.sar.show&&!!c.config.indicators.sar.step&&!!c.config.indicators.sar.maxStep},bollingerBands:function(){return c.config.indicators.bollingerBands.show&&!!c.config.indicators.bollingerBands.period&&!!c.config.indicators.bollingerBands.stddevs},keltnerChannel:function(){return c.config.indicators.keltnerChannel.show&&!!c.config.indicators.keltnerChannel.atrPeriod&&!!c.config.indicators.keltnerChannel.atrs},volume:function(){return c.config.indicators.volume.show},macd:function(){return c.config.indicators.macd.show&&!!c.config.indicators.macd.periods[0]&&!!c.config.indicators.macd.periods[1]&&!!c.config.indicators.macd.lag},dpo:function(){return c.config.indicators.dpo.show&&!!c.config.indicators.dpo.period},rsi:function(){return c.config.indicators.rsi.show&&!!c.config.indicators.rsi.periods},stochRSI:function(){return c.config.indicators.stochRSI.show&&!!c.config.indicators.stochRSI.maPeriods&&!!c.config.indicators.stochRSI.periods},obv:function(){return c.config.indicators.obv.show&&!!c.config.indicators.obv.maPeriods},aroon:function(){return c.config.indicators.aroon.show&&!!c.config.indicators.aroon.periods},ichimoku:function(){return c.config.indicators.ichimoku.show&&!!c.config.indicators.ichimoku.tenkanPeriod&&!!c.config.indicators.ichimoku.kijunPeriod},chandelierExit:function(){return c.config.indicators.chandelierExit.show&&!!c.config.indicators.chandelierExit.atrs&&!!c.config.indicators.chandelierExit.periods},zigzag:function(){return c.config.indicators.zigzag.threshold&&c.config.indicators.zigzag.show},trades:function(){return c.config.showTrades},orders:function(){return c.config.showOrders},grid:function(){return c.config.grid},yAxisDepth:function(){return c.config.yaxis.depth}},shouldAnimateFeeds:function(){return c.config.performance.animateFeeds&&!cryptowatch.device.isPhone},_handleChange:function(e,t){var r=c._bindings.numerics[e];void 0!==r&&(c._setVal(r.key,t),r.callback&&null!==t&&r.callback.call(c,t)),this.cache(),this.trigger("change")},_handleCheckboxToggle:function(e,t){var r=c._bindings.booleans[e.id];void 0!==r&&(c._setVal(r.key,t),c.cache(),this.trigger("change"),this.trigger("change:"+t),e.parentNode.setAttribute("checked",t))},_handleRadioSelect:function(e){var t=c._bindings.radios[e.getAttribute("name")];if(void 0!==t){var r=t.mapping[e.id];c._setVal(t.key,r)}c.cache(),this.trigger("change")},_handleRangeInput:function(e){var t=c._bindings.ranges[e.id],r=parseInt(e.value,10),n=document.getElementById(t.numericId);n&&(n.value=r,t.callback(r)),c._handleChange(n.id,r)},_handleDefault:function(e){switch(e){case"settings__default__macd":c.config.indicators.macd.periods=c.defaultConfig.indicators.macd.periods.slice(0),c.config.indicators.macd.lag=c.defaultConfig.indicators.macd.lag,this.trigger("indicator:ema:change",c.config.indicators.macd.periods[0]),this.trigger("indicator:ema:change",c.config.indicators.macd.periods[1]),this.trigger("indicator:macd:change");break;case"settings__default__obv":c.config.indicators.obv.maPeriods=c.defaultConfig.indicators.obv.maPeriods,this.trigger("indicator:obvma:change",c.defaultConfig.indicators.obv.maPeriods);break;case"settings__default__dpo":c.config.indicators.dpo.period=c.defaultConfig.indicators.dpo.period,this.trigger("indicator:dpo:change",c.defaultConfig.indicators.dpo.period);break;case"settings__default__rsi":c.config.indicators.rsi.periods=c.defaultConfig.indicators.rsi.periods,c.config.indicators.rsi.threshold=c.defaultConfig.indicators.rsi.threshold,this.trigger("indicator:rsi:change");break;case"settings__default__stochrsi":c.config.indicators.stochRSI.periods=c.defaultConfig.indicators.stochRSI.periods,c.config.indicators.stochRSI.maPeriods=c.defaultConfig.indicators.stochRSI.maPeriods,this.trigger("indicator:stochRSI:change",c.config.indicators.stochRSI.periods),this.trigger("indicator:stochRSIMA:change",c.config.indicators.stochRSI.maPeriods);break;case"settings__default__aroon":c.config.indicators.aroon.periods=c.defaultConfig.indicators.aroon.periods,this.trigger("indicator:aroon:change");break;case"settings__default__ema":c.config.indicators.ema.periods=c.defaultConfig.indicators.ema.periods.slice(0),this.trigger("indicator:ema:change",c.config.indicators.ema.periods[0]),this.trigger("indicator:ema:change",c.config.indicators.ema.periods[1]),this.trigger("indicator:ema:change",c.config.indicators.ema.periods[2]);break;case"settings__default__sma":c.config.indicators.sma.periods=c.defaultConfig.indicators.sma.periods.slice(0),this.trigger("indicator:sma:change",c.config.indicators.sma.periods[0]),this.trigger("indicator:sma:change",c.config.indicators.sma.periods[1]);break;case"settings__default__sar":c.config.indicators.sar.step=c.defaultConfig.indicators.sar.step,c.config.indicators.sar.maxStep=c.defaultConfig.indicators.sar.maxStep,this.trigger("indicator:sar:change");break;case"settings__default__bollinger":c.config.indicators.bollingerBands.period=c.defaultConfig.indicators.bollingerBands.period,c.config.indicators.bollingerBands.stddevs=c.defaultConfig.indicators.bollingerBands.stddevs,this.trigger("indicator:sma:change",c.defaultConfig.indicators.bollingerBands.period),this.trigger("indicator:stdDeviation:change",c.defaultConfig.indicators.bollingerBands.period);break;case"settings__default__keltner":c.config.indicators.keltnerChannel.atrPeriod=c.defaultConfig.indicators.keltnerChannel.atrPeriod,c.config.indicators.keltnerChannel.atrs=c.defaultConfig.indicators.keltnerChannel.atrs,this.trigger("indicator:atr:change",c.defaultConfig.indicators.keltnerChannel.atrPeriod);break;case"settings__default__ichimoku":c.config.indicators.ichimoku.tenkanPeriod=c.defaultConfig.indicators.ichimoku.tenkanPeriod,c.config.indicators.ichimoku.kijunPeriod=c.defaultConfig.indicators.ichimoku.kijunPeriod,this.trigger("indicator:ichimoku:change");break;case"settings__default__chandelier-exit":c.config.indicators.chandelierExit.periods=c.defaultConfig.indicators.chandelierExit.periods,c.config.indicators.chandelierExit.atrs=c.defaultConfig.indicators.chandelierExit.atrs,this.trigger("indicator:atr:change",c.defaultConfig.indicators.chandelierExit.periods),this.trigger("indicator:chandelierExit:change",c.defaultConfig.indicators.chandelierExit.periods);break;case"settings__default__zigzag":c.config.indicators.zigzag.threshold=c.defaultConfig.indicators.zigzag.threshold,this.trigger("indicator:zigzag:change",c.defaultConfig.indicators.zigzag.threshold)}c.cache(),c.writeConfigToDom(),this.trigger("change")},_setupListeners:function(){$('#settings input[type="text"]').keydown(function(e){e.stopPropagation();var t=e.which,r=$(e.target);if(190==t&&/\./.test($(e.target).val()))return!1;if(38==t||40==t){var n=parseFloat(r.val()),a=parseFloat(r.attr("increment")),i=parseFloat(r.attr("places")),o=parseFloat(r.attr("max"));38==t&&(n+=a),40==t&&(n-=a),isNaN(n)&&(n=a),n=Math.max(n,a),o&&(n=Math.min(n,o)),n=n.toFixed(i),isNaN(n)||r.val(n)}}).keyup(function(e){var t=parseFloat($(e.target).val());isNaN(t)&&(t=null),9!=e.which&&c._handleChange(e.target.id,t)}),$('[data-contains-settings] input[type="checkbox"]').change(function(e){c._handleCheckboxToggle(e.target,e.target.checked);
}),$('#settings input[type="radio"]').change(function(e){c._handleRadioSelect(e.target)}),$('#settings input[type="range"]').change(function(e){c._handleRangeInput(e.target)}),$("#settings .settings__default").click(function(e){c._handleDefault(e.target.id)})},writeConfigToDom:function(){for(var e in c._bindings.booleans){var t=c._getVal(c._bindings.booleans[e].key),r=$("#"+e);r.attr("disabled")||(t?r.attr("checked","checked"):r.removeAttr("checked"))}for(var n in c._bindings.radios){var a=c._bindings.radios[n],t=c._getVal(a.key)||c._getDefaultVal(a.key),e=a.reverseMapping[t];$("#"+e).attr("checked","checked")}for(var e in c._bindings.numerics){var a=c._bindings.numerics[e],t=c._getVal(a.key);$("#"+e).val(t)}},setUncheckedIndicatorsEnabledState:function(){for(var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=document.querySelectorAll('#settings__indicators input[type="checkbox"]'),r=t,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if(a=r.next(),a.done)break;i=a.value}var o=i;o.checked||(e?o.removeAttribute("disabled"):o.setAttribute("disabled",!0))}var s=document.getElementById("not-enough-room-for-more-indicators");s&&(s.style.display=e?"none":"block")},_bindings:{booleans:{},radios:{},numerics:{},ranges:{}},_getVal:function(e,t){void 0===t&&(t=c.config);var r=e.split("."),n=r[0],a=r.slice(1).join("."),i=t[n];return void 0!==i?r.length>1?c._getVal(a,i):i:void 0},_getDefaultVal:function(e){return c._getVal(e,c.defaultConfig)},_setVal:function(e,t,r){void 0===r&&(r=c.config);var n=e.split("."),a=n[0],i=n.slice(1).join("."),o=r[a];if(void 0===o)throw new Error("Can't find key "+a+" in config (rest is "+i+")");n.length>1?c._setVal(i,t,o):r[a]=t},_setCheckBox:function(e,t){t?e.attr("checked","checked"):e.removeAttr("checked")},bindCheckboxField:function(e,t){c._bindings.booleans[e]={key:t}},bindRadioField:function(e,t,r){var n={};for(var a in t)n[t[a]]=a;c._bindings.radios[e]={mapping:t,reverseMapping:n,key:r}},bindNumericInputField:function(e,t,r){c._bindings.numerics[e]={key:t,callback:r}},bindRangeFieldToNumericField:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?function(){}:arguments[2];c._bindings.ranges[e]={numericId:t,callback:r};var n=c._bindings.numerics[t];if(n){var a=document.getElementById(e);a&&(a.value=c._getVal(n.key))}},bindListeners:function(){var e=this;c.bindCheckboxField("settings__overlay__ema","indicators.ema.show"),c.bindCheckboxField("settings__overlay__sma","indicators.sma.show"),c.bindCheckboxField("settings__overlay__sar","indicators.sar.show"),c.bindCheckboxField("settings__overlay__keltner","indicators.keltnerChannel.show"),c.bindCheckboxField("settings__overlay__bollinger","indicators.bollingerBands.show"),c.bindCheckboxField("settings__overlay__ichimoku","indicators.ichimoku.show"),c.bindCheckboxField("settings__overlay__chandelier-exit","indicators.chandelierExit.show"),c.bindCheckboxField("settings__overlay__zigzag","indicators.zigzag.show"),c.bindCheckboxField("settings__indicator__volume","indicators.volume.show"),c.bindCheckboxField("settings__indicator__rsi","indicators.rsi.show"),c.bindCheckboxField("settings__indicator__stochrsi","indicators.stochRSI.show"),c.bindCheckboxField("settings__indicator__obv","indicators.obv.show"),c.bindCheckboxField("settings__indicator__dpo","indicators.dpo.show"),c.bindCheckboxField("settings__indicator__macd","indicators.macd.show"),c.bindCheckboxField("settings__indicator__aroon","indicators.aroon.show"),c.bindCheckboxField("settings__trades","showTrades"),c.bindCheckboxField("settings__orders","showOrders"),c.bindCheckboxField("settings__grid","grid"),c.bindCheckboxField("settings__yaxis__depth","yaxis.depth"),c.bindCheckboxField("settings__animate-feeds","performance.animateFeeds"),c.bindCheckboxField("settings__drawing-snap","drawing.snap"),c.bindCheckboxField("settings__drawing-extrapolate","drawing.extrapolate"),c.bindCheckboxField("settings__scroll-x","mouse.scrollX"),c.bindCheckboxField("settings__scroll-y","mouse.scrollY"),c.bindCheckboxField("settings__history-scroller","showHistoryScroller"),c.bindRadioField("settings__chart-style",{settings__chart__ohlc:"OHLC","settings__chart__heiken-ashi":"heikenAshi",settings__chart__mountain:"mountain",settings__chart__bar:"bar",settings__chart__line:"line"},"chartStyle"),c.bindRadioField("settings__yaxis",{settings__yaxis__lin:"linear",settings__yaxis__log:"log"},"yAxis"),c.bindRadioField("settings__grid__style",{"settings__grid__style-dashed":"dashed","settings__grid__style-solid":"solid"},"gridStyle");for(var t=0;5>t;t++)c.bindNumericInputField("settings__overlay__ema"+(t+1),"indicators.ema.periods."+t,function(t){e.trigger("indicator:ema:change",t)}),c.bindNumericInputField("settings__overlay__sma"+(t+1),"indicators.sma.periods."+t,function(t){e.trigger("indicator:sma:change",t)});c.bindNumericInputField("settings__overlay__sar-step","indicators.sar.step",function(){e.trigger("indicator:sar:change")}),c.bindNumericInputField("settings__overlay__sar-max-step","indicators.sar.maxStep",function(){e.trigger("indicator:sar:change")}),c.bindNumericInputField("settings__overlay__bollinger-stddevs","indicators.bollingerBands.stddevs"),c.bindNumericInputField("settings__overlay__bollinger-period","indicators.bollingerBands.period",function(t){e.trigger("indicator:sma:change",t),e.trigger("indicator:stdDeviation:change",t)}),c.bindNumericInputField("settings__overlay__keltner-atrs","indicators.keltnerChannel.atrs"),c.bindNumericInputField("settings__overlay__keltner-period","indicators.keltnerChannel.atrPeriod",function(t){e.trigger("indicator:atr:change",t)}),c.bindNumericInputField("settings__overlay__ichimoku-tenkan-periods","indicators.ichimoku.tenkanPeriod",function(t){e.trigger("indicator:ichimoku:change")}),c.bindNumericInputField("settings__overlay__ichimoku-kijun-periods","indicators.ichimoku.kijunPeriod",function(t){e.trigger("indicator:ichimoku:change")}),c.bindNumericInputField("settings__overlay__chandelier-exit-periods","indicators.chandelierExit.periods",function(t){e.trigger("indicator:atr:change",t),e.trigger("indicator:chandelierExit:change",t)}),c.bindNumericInputField("settings__overlay__chandelier-exit-atrs","indicators.chandelierExit.atrs"),c.bindNumericInputField("settings__overlay__zigzag-threshold","indicators.zigzag.threshold",function(t){e.trigger("indicator:zigzag:change",t)}),c.bindNumericInputField("settings__overlay__rsi-periods","indicators.rsi.periods",function(t){e.trigger("indicator:rsi:change")}),c.bindNumericInputField("settings__overlay__rsi-threshold","indicators.rsi.threshold",function(t){e.trigger("indicator:rsi:change")}),c.bindNumericInputField("settings__overlay__stochrsi-periods","indicators.stochRSI.periods",function(t){e.trigger("indicator:stochRSI:change",t)}),c.bindNumericInputField("settings__overlay__stochrsi-ma-periods","indicators.stochRSI.maPeriods",function(t){e.trigger("indicator:stochRSIMA:change",t)}),c.bindNumericInputField("settings__overlay__obv-ma-periods","indicators.obv.maPeriods",function(t){e.trigger("indicator:obvma:change",t)}),c.bindNumericInputField("settings__overlay__dpo-periods","indicators.dpo.period",function(t){e.trigger("indicator:sma:change",t),e.trigger("indicator:dpo:change",t)}),c.bindNumericInputField("settings__overlay__aroon-periods","indicators.aroon.periods",function(t){e.trigger("indicator:aroon:change")}),c.bindNumericInputField("settings__overlay__macd-ema1","indicators.macd.periods.0",function(t){e.trigger("indicator:ema:change",t),e.trigger("indicator:macd:change")}),c.bindNumericInputField("settings__overlay__macd-ema2","indicators.macd.periods.1",function(t){e.trigger("indicator:ema:change",t),e.trigger("indicator:macd:change")}),c.bindNumericInputField("settings__overlay__macd-lag","indicators.macd.lag",function(t){e.trigger("indicator:macd:change")}),c.bindNumericInputField("settings__price-padding","padding.price",function(t){e.trigger("padding:price:change")}),c.bindNumericInputField("settings__candle-spacing","candles.spacing",function(t){e.trigger("candles:spacing:change")}),c.bindNumericInputField("settings__snap-threshold","drawing.snapThreshold",function(t){e.trigger("drawing:snapThreshold:change")}),c.bindNumericInputField("settings__batch-refresh-depth","performance.depthRefreshBatchWindow",function(t){e.trigger("performance:depthRefreshBatchWindow:change",t)}),c.bindRangeFieldToNumericField("settings__batch-refresh-depth-range","settings__batch-refresh-depth")}};window.addEventListener("message",function(e){e.data.config&&c._processConfig(e.data.config)},!1),window.conf=c,c=$.extend(c,i["default"]),t["default"]=c,e.exports=t["default"]},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(t,n,a){var i=arguments.length<=3||void 0===arguments[3]?1:arguments[3];return r(this,e),this.r=t,this.g=n,this.b=a,this.a=i,this}return e.fromRGBA=function(e){var t=e.replace(/rgba?\(/,"").replace(")","").split(",").filter(function(e){return/^[0-9]{1,3}\s*/.test(e)}).map(parseFloat);if(t.length<3)throw new Error("Can't parse as rgba: "+e);return 3===t.length&&t.push(1),new this(t[0],t[1],t[2],t[3])},e.fromHex=function(e,t){return e=e.replace("#",""),new this(this._hexToVal(e.substring(0,2)),this._hexToVal(e.substring(2,4)),this._hexToVal(e.substring(4,6)),t||1)},e.parse=function(t){return/#?[0-9a-f]{6}/i.test(t)?e.fromHex(t):e.fromRGBA(t)},e._hexToVal=function(e){e=e.toLowerCase();var t="0123456789abcdef";return 16*t.indexOf(e.charAt(0))+t.indexOf(e.charAt(1))},e.prototype.toString=function(){return void 0!==this._asString?this._asString:(this._asString="rgba("+[this.r,this.g,this.b,this.a].join(",")+")",this._asString)},e.prototype.opacify=function(t){return new e(this.r,this.g,this.b,t)},e.prototype.add=function(t){return new e(this.r+(t.r||0),this.g+(t.g||0),this.b+(t.b||0))},e.prototype.mix=function(t,r){var n=t.r-this.r,a=t.g-this.g,i=t.b-this.b;return new e(this.r+Math.round(r*n),this.g+Math.round(r*a),this.b+Math.round(r*i))},e.prototype.desaturate=function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],r=(this.r+this.g+this.b)/3;return new e(this.r-Math.round((this.r-r)*t),this.g-Math.round((this.g-r)*t),this.b-Math.round((this.b-r)*t))},e.prototype.value=function(){return this.r/255+this.g/255+this.b/255/3},e}(),a=cryptowatch.colors={setThemeForInput:function(e){document.cookie="theme="+e+"; expires="+new Date((new Date).valueOf()+31536e6)+"; path=/",window.location=window.location},parseColorScheme:function(e){for(var t in e)if("slug"!==t&&"category"!==t){var r=e[t];null!==r&&void 0!==r&&(r instanceof Array?e[t]=r.map(function(e){return n.parse(e)}):r instanceof Object?e[t]=a.parseColorScheme(r):e[t]=n.parse(r))}return e}};a.theme=a.parseColorScheme(JSON.parse(JSON.stringify(window.colorScheme))),a.theme.guide=a.theme.bg.mix(a.theme.text,.2),a.theme.crosshair=a.theme.bg.mix(a.theme.text,.3),a.theme.ta||(a.theme.bg.value()>.5?a.theme.ta={lines:[n.parse("38A900"),n.parse("D03000"),n.parse("1DA3AC"),n.parse("A4174D"),n.parse("C8C21A")],channel:n.parse("68C01C"),tenkanSen:n.parse("5BA6B3"),kijunSen:n.parse("CD66A9"),chikouSpan:n.parse("626174"),senkouSpanA:n.parse("6CB57E"),senkouSpanB:n.parse("C86C64")}:a.theme.ta={lines:[n.parse("E09951"),n.parse("78DDE4"),n.parse("7E3154"),n.parse("689D61"),n.parse("415481")],channel:n.parse("596A83"),tenkanSen:n.parse("3CB6B5"),kijunSen:n.parse("9C34A2"),chikouSpan:n.parse("AAAAAA"),senkouSpanA:n.parse("3E814B"),senkouSpanB:n.parse("711F2D")}),t["default"]=a,e.exports=t["default"]},function(e,t){"use strict";var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){"use strict";var n=r(60),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(t,n){var a=arguments.length<=2||void 0===arguments[2]?null:arguments[2];r(this,e),this.x=t,this.y=n,this.id=a}return e.prototype.distanceFrom=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},e.prototype.clone=function(){return new e(this.x,this.y,this.id)},e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},e.fromJSON=function(t){var r=new e;for(var n in t)r[n]=t[n];return r},e}();t["default"]=n,e.exports=t["default"]},function(e,t,r){"use strict";e.exports=!r(13)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){"use strict";var n=r(1),a=r(33),i=r(13);e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",o)}},function(e,t,r){"use strict";var n=r(9),a=r(29),i=r(44)("src"),o="toString",s=Function[o],c=(""+s).split(o);r(33).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,o){"function"==typeof r&&(r.hasOwnProperty(i)||a(r,i,e[t]?""+e[t]:c.join(String(t))),r.hasOwnProperty("name")||a(r,"name",t)),e===n?e[t]=r:(o||delete e[t],a(e,t,r))})(Function.prototype,o,function(){return"function"==typeof this&&this[i]||s.call(this)})},function(e,t,r){"use strict";var n=r(72),a=r(28);e.exports=function(e){return n(a(e))}},function(e,t){"use strict";t.__esModule=!0,t["default"]={savePreferenceInCookie:function(e,t){document.cookie=e+"="+t+"; expires="+new Date((new Date).valueOf()+63072e7)+"; path=/"},nextFrame:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];void 0===window.requestAnimationFrame||void 0===window.cancelAnimationFrame?t&&e():window.requestAnimationFrame(function(t){e(t)})},setPath:function(e){window.history.replaceState({},"",e),void 0!==window.ga&&window.ga("send","pageview",e)}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(146),o=n(i),s=r(10),c=n(s),l=r(311),u=n(l),d=window.Notification,h={LOW:1,HIGH:2};t.SEVERITY=h;var f=function(){function e(){a(this,e),this.notified=!1,this.opts={notification:!0,noise:!0}}return e.prototype.dismiss=function(){},e.prototype.isActive=function(){return!1},e.prototype.emitNativeNotification=function(){try{this.nativeNotification=new d(this.declaration(),{body:cryptowatch.exchange.name+" "+cryptowatch.currencyPair.name,icon:"/assets/build/images/cryptowatch.png"}),c["default"].increment("apiAvailability.html5Notification.available")}catch(e){return void c["default"].increment("apiAvailability.html5Notification.unvailable")}this.nativeNotification.onclick=function(){window.focus()}},e.prototype.cleanup=function(){void 0!==this.nativeNotification&&this.nativeNotification.close()},e}();t.Notification=f;var p=function(){function e(){a(this,e),this.sources=[],this["interface"]=React.render(o["default"]({triggeredItems:[],untriggeredItems:[]}),document.getElementById("notifications")),this.availableAPIs={nativeNotification:!1,nativeAudio:!1},this.favico=new u["default"]({bgColor:"#FFD506",type:"rectangle",textColor:"#000000"}),this.severeItemsCount=0,this._setupAPIs(),this.refresh()}return e.prototype.items=function(){return this.sources.reduce(function(e,t){return e.concat(t.getItems())},[])},e.prototype.triggeredItems=function(){return this.items().filter(function(e){return e.triggered===!0})},e.prototype.untriggeredItems=function(){return this.items().filter(function(e){return!e.triggered})},e.prototype.registerSource=function(e){var t=this;this.sources.push(e),e.on("change",function(){t.refresh()}),this.refresh()},e.prototype.refresh=function(){var e=this.items();e.some(function(e){return e.severity===h.HIGH})&&this.ensureNotificationPermissions();var t=this.triggeredItems(),r=Math.max.apply(Math,t.map(function(e){return e.severity||h.LOW})),n=t.reduce(function(e,t){return e||t.opts.noise},!1),a=t.filter(function(e){return e.severity===h.HIGH}).length;0===t.length&&(this.stopCallingAttention(),self.lastAmountOfTriggeredItems>0&&cryptowatch.nav&&cryptowatch.nav.sidebarDropdowns.notifications.isOpen&&cryptowatch.nav.sidebarDropdowns.notifications.close()),0===a?this.favico.reset():a!==this.severeItemsCount&&(this.favico.badge(a),this.severeItemsCount=a),self.lastAmountOfTriggeredItems=t.length;for(var i=t,o=Array.isArray(i),s=0,i=o?i:i[Symbol.iterator]();;){var c;if(o){if(s>=i.length)break;c=i[s++]}else{if(s=i.next(),s.done)break;c=s.value}var l=c;l.notified||l.severity!=h.HIGH||l.emitNativeNotification(),l.notified=!0}if($("#notifications-target").attr("data-amount",t.length).attr("data-severity",r),r==h.LOW)this.stopCallingAttention();else if(r==h.HIGH){for(var u={},d=t,f=Array.isArray(d),p=0,d=f?d:d[Symbol.iterator]();;){var g;if(f){if(p>=d.length)break;g=d[p++]}else{if(p=d.next(),p.done)break;g=p.value}var l=g;if(l.opts.noisePitch){u.noisePitch=l.opts.noisePitch;break}}this.callAttention(n,u),cryptowatch.nav.sidebarDropdowns.notifications.open()}this["interface"].setProps({maxSeverity:r,triggeredItems:t,untriggeredItems:this.untriggeredItems(),availableAPIs:this.availableAPIs})},e.prototype._setupAPIs=function(){this.availableAPIs.nativeNotification=d&&"granted"===d.permission;var e=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext;void 0!==e?(this.availableAPIs.nativeAudio=!0,this.audioContext=new e,this.oscillator=this.audioContext.createOscillator(),this.oscillator.type="sine",this.oscillator.start=this.oscillator.start||this.oscillator.noteOn,this.oscillator.stop=this.oscillator.stop||this.oscillator.noteOff,this.amp=this.audioContext.createGain(),this.amp.gain.value=0,this.oscillator.connect(this.amp),this.amp.connect(this.audioContext.destination),this.oscillator.start(0)):this.availableAPIs.nativeAudio=!1},e.prototype.ensureNotificationPermissions=function(){d&&"granted"!==d.permission&&d.requestPermission(this._onPermissionResponse)},e.prototype._onPermissionResponse=function(e){self.notificationsAllowed="granted"===e},e.prototype.callAttention=function(e,t){var r=this;void 0===this.attentionInterval&&(this.attentionInterval=setInterval(function(){r._callAttentionToAlert(e,t)},1e3))},e.prototype.callAttentionNTimes=function(e,t){var r=this;0!==e&&(this._callAttentionToAlert(t),setTimeout(function(){r.callAttentionNTimes(e-1,t)},1e3))},e.prototype.stopCallingAttention=function(){void 0!==this.attentionInterval&&(clearInterval(this.attentionInterval),delete this.attentionInterval)},e.prototype._callAttentionToAlert=function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(e){var n=r.noisePitch||700,a=this.audioContext.currentTime;this.oscillator.frequency.setValueAtTime(n,a),this.amp.gain.cancelScheduledValues(a)}if(this.flashState=!0,$("#notifications-target").addClass("flash"),$("#notifications").addClass("flash"),cryptowatch.chart.refresh.axes(),setTimeout(function(){t.flashState=!1,$("#notifications-target").removeClass("flash"),$("#notifications").removeClass("flash"),cryptowatch.chart.refresh.axes()},500),e)for(var i=0;3>i;i++)this.amp.gain.setValueAtTime(this.amp.gain.value,a),this.amp.gain.linearRampToValueAtTime(.01,a+.015),this.amp.gain.linearRampToValueAtTime(.02,a+.03),this.amp.gain.linearRampToValueAtTime(.05,a+.05),this.amp.gain.linearRampToValueAtTime(.2,a+.1),this.amp.gain.linearRampToValueAtTime(this.amp.gain.value,a+.15),this.amp.gain.linearRampToValueAtTime(0,a+.2),a+=.2},e}(),g=new p;t.store=g},function(e,t,r){"use strict";var n=r(42);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}}},function(e,t){"use strict";e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){"use strict";var n=r(2),a=r(38);e.exports=r(21)?function(e,t,r){return n.setDesc(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){"use strict";function r(e,t){t=$.extend(t,{path:window.location.pathname,client:cryptowatch.clientId,revision:cryptowatch.revision}),"error"===e&&(t=$.extend(t,{cookie:document.cookie,config:localStorage.config}),navigator.userAgent&&(t.ua=navigator.userAgent)),window.performance&&window.performance.now&&(t.timestamp=window.performance.now());var r="";for(var n in t)r+=n+": "+t[n]+"\n";r+="\n",$.ajax({type:"POST",url:"/log/javascript",data:{level:e,message:r}})}t.__esModule=!0,t.persistLog=r,t["default"]={info:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];"main"===cryptowatch.integration&&(console.info("["+(new Date).toTimeString()+"] "+e),t.persist&&r("info",{message:e}))},warn:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];"main"===cryptowatch.integration&&(console.warn("["+(new Date).toTimeString()+"] "+e),t.persist&&r("warn",{message:e}))},error:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];"main"===cryptowatch.integration&&(console.error("["+(new Date).toTimeString()+"] "+e),t.persist&&r("error",{message:e}))},time:function(e,t){var r=new Date;t();var n=new Date-r;console.info("["+n+"ms] "+e)}};var n=!1;window.addEventListener("error",function(e){if(!n&&!/Script error/.test(e.message)){var t={message:e.message,line:e.lineno,col:e.colno,stack:e.stack};e.stack&&(t.stack=e.stack),n=!0,setTimeout(function(){n=!1},3e3),r("error",t)}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(12),o=n(i),s=function(){function e(){a(this,e),this.hoveredItem=null,this.selectedItem=null,this.crosshair=null}return e.prototype.hover=function(e){this.hoveredItem=e,this.trigger("active:change")},e.prototype.select=function(e){if(e!==this.selectedItem){var t=this.selectedItem;this.selectedItem=e,this.trigger("selected:change",t,e)}},e.prototype.blur=function(e){e===this.hoveredItem&&(this.hoveredItem=null,this.trigger("active:change"))},e.prototype.deselect=function(e){e===this.selectedItem&&(this.selectedItem=null,this.trigger("selected:change",e,null))},e.prototype.active=function(){return this.hoveredItem||this.selectedItem},e.prototype.isActive=function(e){return e===this.hoveredItem||e===this.selectedItem},e.prototype.setOrderPlacerPrice=function(e,t){this.trigger("orderPlacerPrice:set",e,t)},e.prototype.jumpToTrade=function(e){this.trigger("privateTrade:jump",e)},e.prototype.setCrosshair=function(e){this.crosshair=e,this.trigger("crosshair:change")},e}();s.prototype=$.extend(s.prototype,o["default"]),t["default"]=new s,e.exports=t["default"]},function(e,t){"use strict";var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){"use strict";var r=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(e,t,r){"use strict";var n=r(28);e.exports=function(e){return Object(n(e))}},,function(e,t){"use strict";function r(e){for(var t=window.i18n[e],r=t.split("{!}"),n=arguments.length,a=Array(n>1?n-1:0),i=1;n>i;i++)a[i-1]=arguments[i];if(r.length!==a.length+1)throw new Error('Mismatching subs for key: "key" (got '+a.length+")");for(var o=[],s=0;s<a.length;s++)o.push(r[s]),o.push(a[s]);return o.push(r[r.length-1]),o.join("")}t.__esModule=!0,t.ts=r,t["default"]=function(e){for(var t=window.i18n[e],r=t.split("{!}").map(function(e){return React.createElement("span",null,e)}),n=arguments.length,a=Array(n>1?n-1:0),i=1;n>i;i++)a[i-1]=arguments[i];if(r.length!==a.length+1)throw new Error('Mismatching subs for key: "key" (got '+a.length+")");for(var o=[],s=0;s<a.length;s++)o.push(r[s]),o.push(a[s]);return o.push(r[r.length-1]),React.createElement("span",null,o)}},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n={MARKET:"market",LIMIT:"limit",STOP:"stop",TRAILING_STOP:"trailing-stop"};t.ORDER_TYPES=n;var a=function(){function e(t){r(this,e),this.price=t.price,this.amount=t.amount,this.amountFilled=t.amountFilled,this.side=t.side,this.type=t.type,this.timestamp=t.timestamp,this.pending=t.pending,this.id=t.id}return e.prototype.total=function(){return this.price*this.amount},e}();t.Order=a},function(e,t){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(112),i=n(a),o=r(12),s=n(o),c=r(37),l=r(8),u=n(l),d=r(55),h=(n(d),r(187)),f=n(h),p={orders:[],trades:[],handleBalances:function(e){this.balances={};for(var t in e){var r=e[t];this.balances[t]={base:r[cryptowatch.currencyPair.base],quote:r[cryptowatch.currencyPair.quote]}}this.trigger("balances:update")},handleTrades:function(e){e||(e=[]),e=e.map(function(e){return e instanceof i["default"]?e:new i["default"]({price:e.Price,amount:e.Amount,side:e.Side,timestamp:e.Timestamp})}),e=e.sort(function(e,t){return e.timestamp-t.timestamp}),this.trades=e;for(var t=0;t<e.length;t++)this.trades[t]._idx=t;this.trigger("trades:update")},handleOrders:function(e){var t=!1;if(this.orders=[],e)for(var r=e,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if(a=r.next(),a.done)break;i=a.value}var o=i;this.orders.push(new c.Order({price:o.Price,amount:o.Amount,side:["ask","bid"][o.Side],type:o.Type,timestamp:o.Timestamp,id:o.Id})),this.previewOrder&&o.Id===this.previewOrder.id&&(t=!0)}this.previewOrder&&!t&&this.unsetPreviewOrder(),this._indexOrders(),this.trigger("orders:change",this.orders)},setPreviewOrder:function(e){this.previewOrder=e,this.trigger("previewOrder:change")},unsetPreviewOrder:function(){delete this.previewOrder,this.trigger("previewOrder:change")},setStagedOrder:function(e){this.stagedOrder=e,this.trigger("stagedOrder:change")},unsetStagedOrder:function(){delete this.stagedOrder,this.trigger("stagedOrder:change")},potentialOrder:function(){return this.stagedOrder||this.previewOrder},_indexOrders:function(){var e=this;this.orders&&(this.ordersByPrice={},this.ordersById={},this.orders.forEach(function(t){void 0===e.ordersByPrice[t.price]?e.ordersByPrice[t.price]=[t]:e.ordersByPrice[t.price].push(t),e.ordersById[t.id]=t}))},expectOrderToDisappear:function(e){var t=this.ordersById[e];t&&(t.doomed=!0),this.trigger("orders:change")},orderAmountAtPrice:function(e){if(!this.ordersByPrice)return 0;var t=this.ordersByPrice[e];return t&&0!==t.length?t.reduce(function(e,t){return e+t.amount},0):0},handleOrderBeingRemoved:function(e){void 0!==this.ordersByPrice&&this.ordersByPrice[e]&&this.trigger("orders:check")},handleOrderBookResync:function(){var e=!1;if(u["default"].orderbook.valid()){var t=u["default"].orderbook.range();for(var r in this.ordersByPrice)if(t.includes(r)&&void 0===u["default"].orderbook.getByPrice(r)){e=!0;break}}e&&this.trigger("orders:check")}};p=$.extend(p,s["default"]),u["default"].on("orderbook:remove",function(e){p.handleOrderBeingRemoved(e)}),u["default"].on("orderbook:resync",function(){p.handleOrderBookResync()}),u["default"].on("intervalQueues:load",function(){if(cryptowatch.exchange.supports.trading&&!cryptowatch.apiAccess){var e=new f["default"];p.handleTrades(e.generateTrades())}}),t["default"]=p,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(5),i=n(a),o={ago:function(e){var t=Math.round((new Date).valueOf()/1e3);return 60>t-e?"now":3600>t-e?this.pluralize(Math.floor((t-e)/60),"min"):86400>t-e?this.pluralize(Math.floor((t-e)/3600),"hour"):2592e3>t-e?this.pluralize(Math.floor((t-e)/86400),"day"):31536e3>t-e?this.pluralize(Math.floor((t-e)/2592e3),"month"):this.pluralize(Math.ceil((t-e)/94608e4),"year")},pluralize:function(e,t){return e>1&&(t+="s"),e+" "+t},formatters:{},setupFormatters:function(){void 0!==window.Intl&&(o.formatters.month=new Intl.DateTimeFormat(cryptowatch.locale,{month:"short"}),o.formatters.monthAndDate=new Intl.DateTimeFormat(cryptowatch.locale,{month:"short",day:"2-digit"}),o.formatters.time=new Intl.DateTimeFormat(cryptowatch.locale,{hour:"2-digit",hour12:!1,minute:"2-digit"}),o.formatters.monthDateAndTime=new Intl.DateTimeFormat(cryptowatch.locale,{month:"short",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit"}),o.formatters.yearMonthDateAndTime=new Intl.DateTimeFormat(cryptowatch.locale,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit"}),o.formatters.yearMonthDateAndTimeWithSeconds=new Intl.DateTimeFormat(cryptowatch.locale,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"}))},printMonth:function(e){return void 0!==window.Intl?o.formatters.month.format(e):["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"][e.getMonth()]},printMonthAndDate:function(e){return void 0!==window.Intl?o.formatters.monthAndDate.format(e):o.printMonth(e)+" "+e.getDate()},printTime:function(e){return void 0!==window.Intl?o.formatters.time.format(e):e.getHours()+":"+i["default"].doubleDigits(e.getMinutes())},printMonthDateAndTime:function(e){return void 0!==window.Intl?o.formatters.monthDateAndTime.format(e):o.printMonthAndDate(e)+" "+o.printTime(e)},printYearMonthDateAndTime:function(e){if(void 0!==window.Intl)return o.formatters.yearMonthDateAndTime.format(e);var t=e.getHours(),r=e.getMinutes();return e.toDateString().split(" ").slice(1).join(" ")+" "+(10>t?"0":"")+t+":"+i["default"].doubleDigits(r)},printYearMonthDateAndTimeWithSeconds:function(e){if(void 0!==window.Intl)return o.formatters.yearMonthDateAndTimeWithSeconds.format(e);var t=e.getHours(),r=e.getMinutes(),n=e.getSeconds();return e.toDateString().split(" ").slice(1).join(" ")+" "+(10>t?"0":"")+t+":"+i["default"].doubleDigits(r)+":"+i["default"].doubleDigits(n)},dateAtTime:function(e,t,r){return new Date(e.getYear()+1900,e.getMonth(),e.getDate(),t,r,0,0)},dateAtMidnight:function(e){return this.dateAtTime(e,0,0)}};o.setupFormatters(),setInterval(function(){$(".live-timestamp").each(function(e,t){var r=$(t);r.text(o.ago(parseInt(r.attr("value"),10)))})},3e4),t["default"]=o,e.exports=t["default"]},function(e,t){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){"use strict";var n=r(7)("unscopables"),a=Array.prototype;void 0==a[n]&&r(29)(a,n,{}),e.exports=function(e){a[n][e]=!0}},function(e,t){"use strict";var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(12),i=n(a),o=r(10),s=n(o),c=r(26),l=r(180),u=n(l),d=r(139),h=n(d),f=r(77),p=n(f),g=r(8),v=n(g),m=new u["default"]({version:1}),y={initialize:function(){this.load(),v["default"].on("trades:update",function(e,t){var r=t.map(function(e){return e.Price}),n=Math.min.apply(Math,r),a=Math.max.apply(Math,r);y.scanPriceAlerts(n,a)}),v["default"].on("intervalQueues:update",function(e,t){y.scanVolumeAlerts(t,e.Volume)})},load:function(){var e=this;cryptowatch.account.hasAccess.backendAlerts?(s["default"].increment("alerts.load.backend"),m.list().then(function(t){var r=JSON.parse(t.text);r||(r=[]),e.items=r.map(function(e){return p["default"].fromJSON(e,y.destroy.bind(y))}),e.trigger("change")})):v["default"].on("intervalQueues:load",function(){s["default"].increment("alerts.load.local");var t=localStorage.getItem(y.key());t&&(e.items=JSON.parse(t).map(function(e){return p["default"].fromJSON(e,y.destroy.bind(y))}),e.filterInvalid())})},filterInvalid:function(){this.items=this.items.filter(function(e){return e.stillValid()}),this.trigger("change")},items:[],triggeredAlerts:function(){
return y.items.filter(function(e){return e.triggered})},key:function(){return["alerts",cryptowatch.exchange.slug,cryptowatch.pair].join(":")},cache:function(){localStorage.setItem(y.key(),JSON.stringify(y.items.filter(function(e){return!e.triggered})))},savePending:function(){if(void 0!==y.pending){y.pending.id=h["default"].v1(),y.pending&&y.items.push(y.pending);var e=y.pending;return delete y.pending,s["default"].increment("alerts.new"),e._destroy=y.destroy.bind(y),cryptowatch.account.hasAccess.backendAlerts?m.create({userId:cryptowatch.session.userId,market:cryptowatch.market.slug,subject:e.subject,threshold:e.threshold,opts:e.opts}).then(function(t){var r=JSON.parse(t.text);$.extend(e,r.alert)},function(){}):this.cache(),this.trigger("change"),y.items[y.items.length-1]}},destroy:function(e){var t=void 0;this.items=this.items.filter(function(r){return r.id===e?(t=r,!1):!0}),cryptowatch.account.hasAccess.backendAlerts?m["delete"](t):this.cache(),this.trigger("change"),cryptowatch.chart.refresh.axes(),cryptowatch.chart.updateCursor()},updateAlert:function(e){cryptowatch.account.hasAccess.backendAlerts?m.update(e):this.cache(),this.trigger("change")},scanPriceAlerts:function(e,t){for(var r=!1,n=this.items,a=Array.isArray(n),i=0,n=a?n:n[Symbol.iterator]();;){var o;if(a){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var s=o;if("price"===s.subject)switch(s.opts.side){case 1:t>=s.threshold&&(s.trigger(),r=!0);break;case-1:e<=s.threshold&&(s.trigger(),r=!0)}}r&&(this.trigger("change"),this.cache())},scanVolumeAlerts:function(e,t){if(e===cryptowatch.periodInt){for(var r=!1,n=this.items,a=Array.isArray(n),i=0,n=a?n:n[Symbol.iterator]();;){var o;if(a){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var s=o;"volume"===s.subject&&s.opts.period===e&&t>s.threshold&&(s.trigger(),r=!0)}r&&(this.trigger("change"),this.cache())}},getItems:function(){return this.items.filter(function(e){return e.validForView()})}};y=$.extend(y,i["default"]),c.store.registerSource(y),t["default"]=y,e.exports=t["default"]},,,,function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,window.benchmarks={};var n=function(){function e(t){r(this,e),this.name=t,this._measurements=[],window.benchmarks[this.name]=this}return e.prototype.start=function(){this._start=window.performance.now()},e.prototype.stop=function(){return void 0===this._start?void console.warn("Bad benchmark stop request; haven't started yet"):(this._measurements.push(window.performance.now()-this._start),this._measurements=this._measurements.slice(-5e3),void delete this._start)},e.prototype.stats=function(){var e=this._measurements.slice(0).sort();console.log("10:",d3.quantile(e,.1),"MEDIAN:",d3.quantile(e,.5),"90:",d3.quantile(e,.9),"95:",d3.quantile(e,.95),"99:",d3.quantile(e,.99))},e}();t["default"]=function(e){var t=window.benchmarks[e];return void 0===t&&(t=new n(e),window.benchmarks[e]=t),t},e.exports=t["default"]},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(t,n,a){r(this,e),this.name=t,this.geometry=n,this.opts=$.extend({callbacks:{}},a)}return e.prototype.overlaps=function(e){switch(this.geometry.type){case"rect":return e.x>=this.geometry.left&&e.x<=this.geometry.right&&e.y>=this.geometry.top&&e.y<=this.geometry.bottom;case"circle":return e.distanceFrom(this.geometry.center)<=this.geometry.radius}},e.prototype.draw=function(e){switch(this.geometry.type){case"rect":this.canvas.drawRectangle({x:this.geometry.left,y:this.geometry.top},{x:this.geometry.right,y:this.geometry.bottom},"blue")}},e.prototype.hover=function(){return this.opts.callbacks.hover?this.opts.callbacks.hover():void 0},e.prototype.leave=function(){this.opts.callbacks.leave&&this.opts.callbacks.leave()},e.prototype.active=function(){this.opts.callbacks.active&&this.opts.callbacks.active()},e.prototype.inactive=function(){this.opts.callbacks.inactive&&this.opts.callbacks.inactive()},e.prototype.mousedown=function(){this.opts.callbacks.mousedown&&this.opts.callbacks.mousedown.apply(this,arguments)},e.prototype.unactivate=function(){this.opts.callbacks.unactivate&&this.opts.callbacks.unactivate.apply(this,arguments)},e.prototype.click=function(){this.opts.callbacks.click&&this.opts.callbacks.click.apply(this,arguments)},e.prototype.drag=function(){this.opts.callbacks.drag&&this.opts.callbacks.drag.apply(this,arguments)},e}();t.Hoverarea=n},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,n){r(this,e),this.min=Math.min(t,n),this.max=Math.max(t,n)}return e.prototype.includes=function(e){return e>=this.min&&e<=this.max},e.prototype.clip=function(e){return e>this.max?this.max:e<this.min?this.min:e},n(e,[{key:"length",get:function(){return this.max-this.min}}]),e}();t["default"]=a,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0;var r={bid:"Buy",ask:"Sell"};t.sideActions=r;var n={market:"Market",limit:"Limit"};t.orderTypeNames=n},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){return function(t){13===t.which&&e()}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r,n){var a=this;this.slug=r,n.xOrientation&&(this.xOrientation=n.xOrientation),n.yOrientation&&(this.yOrientation=n.yOrientation),this.reposition=n.reposition===!0,this.beforeOpen=n.beforeOpen,this.onOpen=n.onOpen,this.$button=$(e),0!==this.$button.length&&(this.$dropdown=$(t),this.opts=n,Z.dropdowns[r]=this,Z.open[r]=!1,n.onClick?this.$button.click(function(){if(a.toggle(),Z.open[a.slug])for(var e in Z.dropdowns)e!==r&&Z.dropdowns[e].close()}):[this.$button,this.$dropdown].forEach(function(e){e.mousemove(function(e){if(Z.currentlyOpen&&Z.currentlyOpen!==a&&Z.currentlyOpen.posnInsideTriangle({x:e.pageX,y:e.pageY}))return void(Z.hovering=a);for(var t in Z.dropdowns)t!==r&&Z.dropdowns[t].close();a.open()}).mouseleave(function(e){var t=e.target.getBoundingClientRect();e.pageX>=t.left&&e.pageX<=t.right&&e.pageY>=t.top&&e.pageY<=t.bottom||(delete Z.hovering,Z.open[r]=!1,setTimeout(function(){Z.open[r]===!1&&a.close()},250))})}))}t.__esModule=!0;var o=r(10),s=n(o),c=r(65),l=r(12),u=n(l),d=r(156),h=n(d),f=r(147),p=n(f),g=r(148),v=n(g),m=r(25),y=n(m),w=r(8),x=n(w),b=r(40),_=n(b),S=r(84),k=n(S),C=r(109),T=r(102),E=r(11),P=n(E),A=r(110),M=n(A),R=r(173),O=n(R),I=r(45),D=n(I),N=r(78),L=n(N),F=r(55),B=n(F),H=r(151),j=n(H),z=r(82),W=n(z),q=r(184),V=r(177),U=n(V),Y=r(178),K=n(Y),J=r(17),G=n(J),X=[],Q=$("#sidebar"),Z=cryptowatch.nav={initialize:function(){var e=this;new i("#interval","#intervals-dropdown","interval",{xOrientation:"left",yOrientation:"top",reposition:!0}),new i("#contract-period","#contract-periods-dropdown","contract-period",{xOrientation:"left",yOrientation:"top",reposition:!0}),new i("#open-update-client","#update-client","update-client",{xOrientation:"right",yOrientation:"top",reposition:!1}),new i("#locales-dropup-target","#locales-dropup","locales",{xOrientation:"left",yOrientation:"bottom",reposition:!0}),new i("#shortcuts-dropup-target","#shortcuts-dropup","shortcuts",{xOrientation:"left",yOrientation:"bottom",reposition:!0}),new i("#take-snapshot","#snapshot-dialog","snapshot",{xOrientation:"right",yOrientation:"bottom",onClick:!0,onOpen:Z.takeSnapshot}),$(".sidebar__col").each(function(e,t){X.push(new te(parseInt($(t).attr("data-col-id")),10))}),cryptowatch.disable.marketNavigation||!function(){new i("#market","#markets-dropdown","market",{xOrientation:"left",yOrientation:"top",reposition:!0});var t=new k["default"](document.getElementById("markets-dropdown"));t.on("drag:start",function(r){var n=C.closest(r.target,".nav-category__row__link");if(n){r.preventDefault();var a=n.getAttribute("data-slug"),i=document.createElement("div"),o=cryptowatch.marketBookmarks[a],s=T.Bookmark({slug:a,exchange:o.exchange,market:o.market,href:o.href,price:x["default"].tickers[a].price,fiatPreference:P["default"].fiatPreference,belowCursor:!1});React.render(s,i),L["default"]["interface"].setState({dragging:a}),e.dragElem=new M["default"](i.children[0],t.state.pagePosn,{x:90,y:25})}}).on("drag",function(r){e.dragElem&&(r.preventDefault(),e.dragElem.position(t.state.pagePosn),L["default"]["interface"].onDrag(r,t))}).on("drag:stop",function(t){e.dragElem&&(t.preventDefault(),e.dragElem.destroy(),L["default"]["interface"].onDragStop(t))})}(),Z.periodMenu=React.render(h["default"]({periods:cryptowatch.intervalPeriodsInOrder}),document.getElementById("intervals-dropdown")),Z.snapshotDialog=React.render(p["default"]({dataUrl:""}),document.getElementById("snapshot-dialog")),Z.statusBar=React.render(v["default"]({mode:null}),document.getElementById("status-bar"));for(var t=React.createFactory(j["default"]),r=["sidebar__api-accessor-create-form","trading-overlay__api-access-add-form"],n=0;n<r.length;n++){var a=r[n],o=document.getElementById(a);o&&React.render(t({xch:cryptowatch.exchange}),o)}if(React.render(W["default"]({headers:!1,createAccountCrosslink:!1}),document.getElementById("login-form")),$("[data-tool]").click(function(e){var t=$(e.target).closest("[data-tool]").data("tool");cryptowatch.chart.selectTool(t)}).mouseover(function(t){var r=t.target;r.getAttribute("data-tool")||(r=r.parentNode),/selected/.test(r.className)?e.statusBar.setProps({mode:"tool-selected",presenter:{tool:r.getAttribute("data-i18n-key")}}):e.statusBar.setProps({mode:"tool-hover",presenter:{tool:r.getAttribute("data-i18n-key")}})}).mouseout(function(t){e.statusBar.setProps({mode:null})}),Z.refreshSidebarAttrs(),!/settings/.test(window.location.hash)||cryptowatch.disable.settings.all||cryptowatch.disable.settings.inline||Z.sidebarDropdowns.settings.open(),$("#settings__close").click(function(){Z.sidebarDropdowns.settings.close()}),$("#alert-window-container").click(function(e){"alert-window-container"===e.target.id&&($("#alert-window-container").removeAttr("data-open"),$(".alert-window").removeAttr("data-open"))}),this.alertWindows=[],"main"===cryptowatch.integration)try{var s=new O["default"]("firefox-crash-alert","#firefox-crash-alert");navigator&&/Firefox\/43.0/.test(navigator.userAgent)&&s.openOnce(),this.alertWindows.push(s)}catch(c){console.error(c)}},dropdowns:{},open:{},toggleColumn:function(e){X[e].toggle()},refreshSidebarAttrs:function(){Q.attr("data-cols-open",$('.sidebar__col[data-collapsed="false"]').length),X.length>0&&$("#exchange-link a").css({display:X[0].collapsed&&X[1].collapsed?"none":"inline"}),X.length>2&&$("#trading-type-selector table").css({display:X[2].collapsed?"none":"table"})},ensureSidebarIsFull:function(e){Q.toggleClass("min-col-width-2",e&&"1"===Q.attr("data-cols-open")),Q.toggleClass("has-border",Q.outerWidth()>1)},showSidebarStatus:function(e){$("#sidebar-service-status").attr("data-problem",e).removeClass("hidden")},hideSidebarStatus:function(){$("#sidebar-service-status").addClass("hidden")},refreshDropdowns:function(){for(var e in Z.dropdowns)Z.open[e]&&Z.dropdowns[e].updatePosition()},showIntroTour:function(){var e=[];e.push(new q.TourStep("#user_username",React.createElement("div",null,"Welcome to Cryptowatch!",React.createElement("br",null),React.createElement("br",null),"Let's take a quick tour."),{orientation:"os",arrow:!0}));var t=!cryptowatch.apiAccess,r=void 0;r=t?React.createElement("div",null,React.createElement("a",{href:"/account/api-keys",className:"underline",target:"_blank"},"Import your API keys"),React.createElement("span",null," to annotate the chart with your trades and orders, like this.")):React.createElement("div",null,"The price chart is now annotated with your trades and orders.",React.createElement("br",null),React.createElement("br",null),"Hover over them for details."),e.push(new q.TourStep("#price-chart-container",r,{orientation:"itr",arrow:!0,width:"280px",offset:{right:80},setup:function(){t?(cryptowatch.account.hasAccess.annotations=!0,cryptowatch.chart._drawFakeTrades=!0,cryptowatch.chart.refresh.all()):_["default"].trades.length>0&&cryptowatch.chart.jumpToTrade(_["default"].trades[_["default"].trades.length-1])},teardown:function(){t&&(cryptowatch.account.hasAccess.annotations=!1,cryptowatch.chart._drawFakeTrades=!1,cryptowatch.chart.refresh.all())},flashOn:function(){cryptowatch.chart._pulsateTrades=!0,cryptowatch.chart.refresh.chart()},flashOff:function(){cryptowatch.chart._pulsateTrades=!1,cryptowatch.chart.refresh.chart()}})),cryptowatch.apiAccess?(e.push(new q.TourStep('[data-module-side="ask"]',React.createElement("div",null,"Open new orders using the trading interface."),{orientation:"ow",arrow:!0,width:"250px"})),e.push(new q.TourStep("#my-trade-history",React.createElement("div",null,"Click on one of your trades to jump to it on the chart."),{orientation:"ow",arrow:!0,width:"300px"})),e.push(new q.TourStep(".my-trade-history-download",React.createElement("div",null,"Download your raw trade history as a spreadsheet, for your personal records."),{orientation:"ow",arrow:!0,width:"280px",offset:{right:10}}))):e.push(new q.TourStep('[data-module-side="ask"]',React.createElement("div",null,"Once you've imported your API keys, you can also open new orders using the trading interface."),{orientation:"ow",arrow:!0,width:"300px"}));var n=void 0;n=cryptowatch.account.hasPhone?React.createElement("div",null,"Triggered alerts will be sent to your phone, even if you're offline."):React.createElement("div",null,React.createElement("a",{href:"/account",className:"underline",target:"_blank"},"Set up your phone number"),React.createElement("span",null," to receive your alerts on your phone, even while you're offline.")),e.push(new q.TourStep("#sidebar",React.createElement("div",null,0===D["default"].items.length?React.createElement("div",null,"Click on the y-axis to set alerts.",React.createElement("br",null),React.createElement("br",null)):null,n,React.createElement("br",null),"Set as many alerts as you want!",React.createElement("br",null),"You can never be too paranoid."),{orientation:"ow",arrow:!0,width:"300px",offset:{right:80}})),e.push(new q.TourStep("#contact-link",React.createElement("div",null,React.createElement("div",null,"Please email us with any questions, problems, or suggestions."),React.createElement("br",null),React.createElement("div",null,"We guarantee a response within 24 hours, and you'll usually hear back much sooner.")),{orientation:"on",arrow:!0,width:"350px"}));var a=new q.Tour(e,"paid-account-onboarding",{onAdvance:function(){U["default"].remove("needs-to-see-intro-tour")},onComplete:function(){U["default"].remove("needs-to-see-intro-tour")}});a.start()},takeSnapshot:function(){var e=cryptowatch.chart,t=e.canvas.height/e.canvas.width*400;Z.snapshotDialog.setProps({progressNumerator:0,imageHeight:t,dataUrl:null}),setTimeout(function(){cryptowatch.chart.canvas.toDataURL(function(e){Z.snapshotDialog.setProps({dataUrl:e}),s["default"].increment("nav.snapshot.create"),c.trackEvent("snapshot","create",cryptowatch.market.slug)},function(e,t){Z.snapshotDialog.setProps({progressNumerator:e,progressDenominator:t})},{postProcessing:function(e,t,r){r.scale(e.ratio,e.ratio),r.font="11px 'Droid Sans Mono', monospace",r.fillStyle=G["default"].theme.text.toString();var n=[cryptowatch.market.label];cryptowatch.market.futuresPeriod&&n.push(cryptowatch.market.futuresPeriod),n.push(cryptowatch.periodTranslated),n=n.join(" "),r.fillText(n,10,25),r.fillStyle=G["default"].theme.textWeak.toString();var a=void 0;a="main"===cryptowatch.integration?window.location.protocol+"//"+window.location.host:"https://cryptowat.ch";var i=a+"/"+cryptowatch.exchange.slug+"/"+cryptowatch.currencyPair.slug+"/"+cryptowatch.period;r.fillText(i,10,45),r.scale(1,1)}})},1)}};window.showIntroTour=Z.showIntroTour,i.prototype.close=function(){Z.currentlyOpen===this&&delete Z.currentlyOpen,Z.hovering&&Z.hovering.open(),Z.open[this.slug]=!1,this.$dropdown.hide(),this.$button.removeClass("is-open");var e=document.querySelector("body");e.getAttribute("data-dropdown-open")===this.slug&&e.removeAttribute("data-dropdown-open")},i.prototype.updatePosition=function(){if(this.reposition){var e=document.querySelector("body"),t=(e.offsetWidth-e.clientWidth)/2,r={},n=this.$button[0].getBoundingClientRect();"left"===this.xOrientation?r.left=n.left-1-t:"right"===this.xOrientation&&(r.right=window.innerWidth-(n.left+this.$button.outerWidth()-t));var a=this.$button.outerWidth(),i=this.$dropdown.outerWidth();a>i&&(r.width=a+1),"top"===this.yOrientation?r.top=n.top+this.$button.outerHeight()-$("#header").outerHeight()-t:"bottom"===this.yOrientation&&(r.bottom=window.innerHeight-n.top-t),this.$dropdown.css(r)}},i.prototype.calculateTriangle=function(){var e=this.$button.offset(),t=(this.$button.outerHeight(),this.$button.outerWidth()),r=this.$dropdown.offset(),n=this.$dropdown.outerWidth(),a=this.triangle={};"left"===this.xOrientation?(a.posn1={x:e.left+t,y:e.top},a.posn2={x:r.left+n,y:r.top}):"right"===this.xOrientation&&(a.posn1={x:e.left,y:e.top},a.posn2={x:r.left,y:r.top}),a.min={x:Math.min(a.posn1.x,a.posn2.x),y:Math.min(a.posn1.y,a.posn2.y)},a.max={x:Math.max(a.posn1.x,a.posn2.x),y:Math.max(a.posn1.y,a.posn2.y)},a.slope=(a.posn2.y-a.posn1.y)/(a.posn2.x-a.posn1.x)},i.prototype.posnInsideTriangle=function(e){if(e.x<this.triangle.min.x)return!1;if(e.x>this.triangle.max.x)return!1;if(e.y>this.triangle.max.y)return!1;var t=(e.x-this.triangle.posn1.x)*this.triangle.slope;return e.y>t},i.prototype.open=function(){Z.currentlyOpen!==this&&this.beforeOpen&&this.beforeOpen(),Z.currentlyOpen=this,Z.open[this.slug]=!0,this.$button.addClass("is-open"),this.updatePosition(),this.$dropdown.show(),this.$button.addClass("is-open"),this.calculateTriangle(),this.onOpen&&this.onOpen(),document.querySelector("body").setAttribute("data-dropdown-open",this.slug)},i.prototype.toggle=function(){Z.open[this.slug]?this.close():this.open()},Z.sidebarDropdowns={},$("#shadow").click(function(e){if("shadow"===e.target.id)for(var t in Z.sidebarDropdowns)Z.sidebarDropdowns[t].close()});var ee=function(){function e(t,r,n){var i=this,o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];a(this,e),this.id=t,this.$dropdown=$(r),0!==this.$dropdown.length&&(this.$target=$(n),this.isOpen=this.$dropdown[0].hasAttribute("open"),this.$shadow=$("#shadow"),this.opts=o,this.$target.click(function(e){e.preventDefault(),e.stopPropagation(),i.toggle()}),Z.sidebarDropdowns[t]=this)}return e.prototype.toggle=function(){this.isOpen=!this.isOpen,this.refresh(),this.opts.remember&&y["default"].savePreferenceInCookie("sidebar-dropdown-open",this.isOpen?this.id:"")},e.prototype.refresh=function(){var e=this;if(this.isOpen){for(var t in Z.sidebarDropdowns)t!==this.id&&Z.sidebarDropdowns[t].close();this.$target.attr("selected",""),this.$dropdown.attr("open",""),Q.attr("data-open-dropdown",this.id);var r=parseInt(this.$dropdown.css("min-width"),10)||this.$dropdown.outerWidth();Q.css({"min-width":r}),Z.trigger("viewport:resize"),setTimeout(function(){e.$dropdown.find('[data-autofocus="true"]').focus()},10)}else this.$target.removeAttr("selected"),this.$dropdown.removeAttr("open"),Q.removeAttr("data-open-dropdown"),Q.css({"min-width":"auto"});this.$shadow.toggle(this.isOpen),Z.ensureSidebarIsFull(this.isOpen),Z.trigger("viewport:resize")},e.prototype.close=function(){this.isOpen=!1,this.refresh(),this.opts.remember&&y["default"].savePreferenceInCookie("sidebar-dropdown-open","")},e.prototype.open=function(){this.isOpen=!0,this.refresh(),this.opts.remember&&y["default"].savePreferenceInCookie("sidebar-dropdown-open",this.id)},e}();new ee("login","#login","#login-target",{remember:!1}),new ee("api-access","#api-access","#api-access-target",{remember:!1}),new ee("settings","#settings","#settings-target",{remember:!1}),new ee("notifications","#notifications","#notifications-target",{remember:!0});var te=function(){function e(t){var r=this;a(this,e),this.id=t,this.$col=$('.sidebar__col[data-col-id="'+t+'"]'),this.$collapse=$('.sidebar__col-collapse[data-col-id="'+t+'"]'),this.collapsed="true"===this.$col.attr("data-collapsed"),this.$collapse.click(function(){r.toggle()})}return e.prototype.toggle=function(){this.collapsed=!this.collapsed,y["default"].savePreferenceInCookie("sidebar-col-"+this.id+"-collapsed",this.collapsed),this.$col.attr("data-collapsed",""+this.collapsed),this.$collapse.attr("data-collapsed",""+this.collapsed),Z.refreshSidebarAttrs(),Z.trigger("viewport:resize")},e}();$("#request-fullscreen").on("click",function(e){var t=document.querySelector("body");t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}).on("mouseenter",function(e){Z.statusBar.setProps({mode:"fullscreenEnter"}),e.stopPropagation()}).on("mouseleave",function(e){Z.statusBar.setProps({mode:null}),e.stopPropagation()}),$("#take-snapshot").on("mouseenter",function(e){Z.statusBar.setProps({mode:"takeSnapshot"})}).on("mouseleave",function(e){Z.statusBar.setProps({mode:null})}),$("#settings-target").on("mouseenter",function(e){Z.statusBar.setProps({mode:"settings"}),e.stopPropagation()}).on("mouseleave",function(e){Z.statusBar.setProps({mode:null}),e.stopPropagation()}),$(".nav-category__row__link").mouseenter(function(e){var t=C.closest(e.target,".nav-category__row");$(t).find(".nav-category__row__exchange").addClass("hover")}).mouseleave(function(e){var t=C.closest(e.target,".nav-category__row");$(t).find(".nav-category__row__exchange").removeClass("hover")}),$("#exit-fullscreen").on("click",function(e){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}).on("mouseenter",function(e){}),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){$(window).trigger("resize")}).click(function(e){Z.currentlyOpen&&(K["default"](e.target,Z.currentlyOpen.$dropdown[0])||K["default"](e.target,Z.currentlyOpen.$button[0])||Z.currentlyOpen.close())}),B["default"].on("serviceDown",function(){Z.showSidebarStatus("service-down")}),B["default"].on("serviceUp",function(){Z.hideSidebarStatus()}),x["default"].on("intervalQueues:load",function(){cryptowatch.showIntroTour&&(cryptowatch.showIntroTour=!1,setTimeout(function(){Z.showIntroTour()},1500))}),Z=$.extend(Z,u["default"]),t["default"]=Z,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=r(8),o=a(i),s=r(40),c=a(s),l=r(186),u=n(l),d=r(114),h=a(d),f=r(87),p=(a(f),r(78)),g=(a(p),r(30)),v=a(g),m=r(10),y=a(m),w=r(12),x=a(w),b=r(49),_=a(b),S=new _["default"]("handleOrderBook"),k=new _["default"]("handleOrderBookDiff"),C=500,T={initialize:function(){T.connect()},_serviceUp:!0,_reconnectWait:500,_hasConnectedBefore:!1,_consecutiveFailedConnectionAttempts:0,connect:function(){T.conn=new WebSocket(cryptowatch.stream+"/"+cryptowatch.exchange.slug+"/"+cryptowatch.pair+"/"+cryptowatch.period),v["default"].info("Connecting..."),T.conn.onclose=function(e){v["default"].info("Disconnected"),T.respondToDisconnect(),y["default"].increment("sockets.disconnected")},T.conn.onopen=function(){v["default"].info("Connected"),T.respondToConnect(),y["default"].increment("sockets.connected"),T._hasConnectedBefore||(y["default"].mark("sockets.timeToFirstConnection"),console.timeStamp&&console.timeStamp("socket:firstConnection"),T._hasConnectedBefore=!0)},"production"!==cryptowatch.env&&(T.bandwidth={},window.bandwidth=T.bandwidth),T.conn.onmessage=function(e){if(0!=e.data.length){var t=JSON.parse(e.data);if(void 0!==t.Interval){var r=t.Period||cryptowatch.periodInt;o["default"].updateInterval(t.Interval,r)}else if(void 0!==t.Intervals)o["default"].updateIntervals(t.Intervals);else if(void 0!==t.UpdateClient)t.UpdateClient!==cryptowatch.revision&&h["default"].handleUpdate();else if(void 0!==t.FiatExchangeRates){var n=void 0===cryptowatch.currency.exchangeRates;cryptowatch.currency.exchangeRates=t.FiatExchangeRates,n&&cryptowatch.currency.setFiatPreference(cryptowatch.currencyPreference)}else void 0!==t.Balances?c["default"].handleBalances(t.Balances):void 0!==t.PrivateTrades?c["default"].handleTrades(t.PrivateTrades):void 0!==t.PrivateOrders?c["default"].handleOrders(t.PrivateOrders):void 0!==t.OrderBook?(S.start(),o["default"].handleOrderBook(t),S.stop()):void 0!==t.OrderBookDiff?(k.start(),o["default"].handleOrderBookDiff(u.orderbookDiff(t.OrderBookDiff)),k.stop()):void 0!==t.Ticker?o["default"].handleTicker(t.Ticker):void 0!==t.PublicTrades?o["default"].handleTrades(t.PublicTrades):void 0!==t.CancelOrderProgress?cryptowatch.trading.handleCancelProgress(t.CancelOrderProgress):void 0!==t.CancelOrderError?cryptowatch.trading.handleCancelError(t.CancelOrderError):void 0!==t.CancelOrderSuccess?cryptowatch.trading.handleOrderCancellationSuccess():void 0!==t.PlaceOrderProgress?cryptowatch.trading.handlePlaceProgress(t.PlaceOrderProgress):void 0!==t.PlaceOrderError?cryptowatch.trading.handlePlaceError(t.PlaceOrderError):void 0!==t.PlaceOrderSuccess&&cryptowatch.trading.handleOrderPlacementSuccess();if("production"!==cryptowatch.env){var a=Object.keys(t).join("_"),i=e.data.length;void 0===T.bandwidth[a]&&(T.bandwidth[a]=0),T.bandwidth[a]+=i}}}},respondToDisconnect:function(){v["default"].info("Trying again in "+Math.round(T._reconnectWait)+"ms"),T._consecutiveFailedConnectionAttempts++,setTimeout(function(){T.connect()},T._reconnectWait),T._reconnectWait<3e3&&(T._reconnectWait*=1.1),T._consecutiveFailedConnectionAttempts>10&&T._serviceUp&&(y["default"].increment("sockets.service-down"),T.trigger("serviceDown"),T._serviceUp=!1)},respondToConnect:function(){T._reconnectWait=C,T._serviceUp||(y["default"].increment("sockets.service-up"),T.trigger("serviceUp"),T._serviceUp=!0),T._consecutiveFailedConnectionAttempts=0,T.conn.send(JSON.stringify({action:"session",data:cryptowatch.session}));var e;if(e=navigator&&navigator.userAgent?navigator.userAgent:"Unknown user-agent",T.conn.send(JSON.stringify({action:"useragent",data:e})),T.conn.send(JSON.stringify({action:"revision",data:cryptowatch.revision})),T.conn.send(JSON.stringify({action:"integration",data:cryptowatch.integration})),T.conn.send(JSON.stringify({action:"locale",data:cryptowatch.locale})),T._hasBeenConnectedPrior){var t=o["default"].intervalQueues[60],r=t.last;v["default"].info("Resyncing intervals due to lost connection"),T.send({action:"intervalSync",data:r.Time+60})}T._hasBeenConnectedPrior=!0},send:function(e){T.conn.send(JSON.stringify({action:e.action,data:JSON.stringify(e.data)}))}};T=$.extend(T,x["default"]),window.onoffline=function(){T.conn.close()},c["default"].on("orders:check",function(){T.send({action:"requestPrivateTradeUpdates"}),T.send({action:"requestPrivateOrderUpdates"}),v["default"].info("Checking for new personal data")}),window.socket=T,t["default"]=T,e.exports=t["default"]},function(e,t,r){"use strict";var n=r(27),a=r(126),i=r(123),o=r(6),s=r(19),c=r(137);e.exports=function(e,t,r,l){var u,d,h,f=c(e),p=n(r,l,t?2:1),g=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(i(f))for(u=s(e.length);u>g;g++)t?p(o(d=e[g])[0],d[1]):p(e[g]);else for(h=f.call(e);!(d=h.next()).done;)a(h,p,d.value,t)}},function(e,t){"use strict";e.exports={}},function(e,t,r){"use strict";var n=r(2).setDesc,a=r(18),i=r(7)("toStringTag");e.exports=function(e,t,r){e&&!a(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){"use strict";var n=r(60),a=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),0>e?a(e+t,0):i(e,t)}},function(e,t){"use strict";var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(31),i=n(a),o=r(8),s=n(o),c=r(40),l=n(c),u=r(12),d=n(u),h=r(11),f=n(h),p=r(25),g=(n(p),r(79)),v=r(50),m=r(16),y=n(m),w=r(155),x=n(w),b=r(87),_=n(b),S=r(45),k=n(S),C=r(77),T=n(C),E=r(5),P=n(E),A=r(83),M=n(A),R=n(p),O=r(55),I=(n(O),r(54)),D=n(I),N=r(17),L=n(N),F=(n(a),r(66)),B=(n(F),r(37)),H=80,j=70;window.BENCH=function(){window.__BENCH__=!window.__BENCH__};var z=cryptowatch.depth={initialize:function(){var e=this;cryptowatch.disable.feeds||(z.canvas=new g.MultiLayerCanvas("#depth-chart-container",{cursor:{pinchStep:5,disableContextMenu:!0}}).registerLayer("depth","#depth-chart").registerLayer("axis","#depth-axis").registerLayer("animation","#depth-animation"),z.canvas.setDefaultCursorType("crosshair"),z.canvas.cursor.on("mousemove",function(e){z.updateCrosshair(e)}).on("mouseleave",function(e){z.hideCrosshair(),D["default"].statusBar.setProps({mode:null})}).on("pinch:contract",z.zoomOut.bind(z)).on("pinch:expand",z.zoomIn.bind(z)).on("scroll:up",z.zoomOut.bind(z)).on("scroll:down",z.zoomIn.bind(z)),this.crosshairMode="depth",this.refresh()),i["default"].on(["active:change","selected:change"],function(){e.refresh()});var t=M["default"](function(){e.refresh()},y["default"].config.performance.depthRefreshBatchWindow);return s["default"].on("orders:change",function(){t()}),s["default"].on("trades:update",function(){e.refresh()}),l["default"].on(["orders:change","previewOrder:change","stagedOrder:change"],function(){e.refresh()}),f["default"].on("fiatPreference:change",function(){e.refresh()}),y["default"].on("performance:depthRefreshBatchWindow:change",function(e){t.wait(e)}),this},zoomIn:function(){z._modifyZoom(-25e-5)},zoomOut:function(){z._modifyZoom(25e-5)},_modifyZoom:function(e){var t=y["default"].config.depthZoomLevel+e;t=Math.max(.001,Math.min(z._maxZoomLevel(),t)),y["default"].config.depthZoomLevel=t,y["default"].cache(),R["default"].nextFrame(function(){z.refreshChart()})},_maxZoomLevel:function(){var e=Math.min(s["default"].orderbook.asks[s["default"].orderbook.asks.length-1].price-s["default"].orderbook.asks[0].price,s["default"].orderbook.bids[0].price-s["default"].orderbook.bids[s["default"].orderbook.bids.length-1].price);return e/z.fairMarketPrice()},determineLargeOrderThreshold:function(){var e=z.ordersToDraw.asks.map(function(e){return e.amount}).concat(z.ordersToDraw.bids.map(function(e){return e.amount})).sort(d3.ascending);z.largeOrderThreshold=d3.quantile(e,.97)},priceSlice:function(e,t){for(var r=[],n=e[0].price,a=0;a<e.length;a++){var i=e[a];if(Math.abs(i.price-n)>t)break;r.push(i)}return r},fairMarketPrice:function(){return z.bestAsk=s["default"].orderbook.asks[0].price,z.bestBid=s["default"].orderbook.bids[0].price,z.bestBid+(z.bestAsk-z.bestBid)/2},determineScale:function(){if(void 0!==z.depthLines&&z.depthLines.remove(),s["default"].orderbook.asks){var e=(Math.min(s["default"].orderbook.asks[s["default"].orderbook.asks.length-1].price-s["default"].orderbook.asks[0].price,s["default"].orderbook.bids[0].price-s["default"].orderbook.bids[s["default"].orderbook.bids.length-1].price),z.fairMarketPrice()),t=z._maxZoomLevel();y["default"].config&&(t=Math.min(y["default"].config.depthZoomLevel,t));var r=e*t,n=e*t;z.ordersToDraw={},z.ordersToDraw.asks=z.priceSlice(s["default"].orderbook.asks,r),z.ordersToDraw.bids=z.priceSlice(s["default"].orderbook.bids,n);var a=Math.min.apply(Math,s["default"].orderbook.bids.map(function(e){return e.price})),i=Math.max.apply(Math,s["default"].orderbook.asks.map(function(e){
return e.price})),o=(Math.max(e-a,i-e),s["default"].orderbook.depthAtPrice("ask",z.ordersToDraw.asks[z.ordersToDraw.asks.length-1].price)),c=s["default"].orderbook.depthAtPrice("bid",z.ordersToDraw.bids[z.ordersToDraw.bids.length-1].price),l=Math.max(c,o);z.y=d3.scale.linear().domain([0,l]).range([0,H]),z.determineLargeOrderThreshold()}},refresh:function(){s["default"].orderbook.calculateAccumulatedValues("bid"),s["default"].orderbook.calculateAccumulatedValues("ask"),s["default"].orderbook.valid()&&(this.refreshChart(),this.refreshOrderBook())},refreshChart:function(){void 0!==s["default"].orderbook&&y["default"].config&&(window.__BENCH__&&console.time("depth:refresh"),z.determineScale(),cryptowatch.disable.feeds||(z.drawChart(),z.drawAxis()),cryptowatch.chart.drawDepthMirror(),window.__BENCH__&&console.timeEnd("depth:refresh"))},initializeOrderBook:function(){this.orderBookInterface=React.render(x["default"]({bids:[],asks:[],lastPrice:cryptowatch.trades.PublicTrades.slice(-1)[0].Price,fiatPreference:f["default"].getFiatPreference(),isSignificantOrder:function(){return!1},setCrosshair:function(e){z.fixedCrosshair={price:e},z.drawCrosshair=!0,z.refresh()},unsetCrosshair:function(){z.fixedCrosshair=void 0,z.drawCrosshair=!1}}),document.getElementById("orders-container"))},refreshOrderBook:function(){cryptowatch.disable.feeds||s["default"].orderbook&&(this.orderBookInterface||this.initializeOrderBook(),this.orderBookInterface.setProps({asks:s["default"].orderbook.asks.slice(0),bids:s["default"].orderbook.bids.slice(0),fiatPreference:f["default"].getFiatPreference()}),this.orderBookInterface.setState({initialized:!0}))},highlightingPrice:void 0,drawChart:function(){window.__BENCH__&&console.time("depth:draw");var e=z.fairMarketPrice(),t=z._maxZoomLevel();y["default"].config&&(t=Math.min(y["default"].config.depthZoomLevel,t));var r=e*t,n=e*t;z.x=d3.scale.linear().domain([e-n,e+r]).range([0,z.canvas.layers.depth.height]),z.middle=z.x(e);var a=z.canvas.layers.depth.height/2-z.middle;z.verticalOffset=a,z.canvas.layers.depth.clear();var i=z._stairstepLine("ask",z.ordersToDraw.asks,z.canvas.layers.depth.width,z.canvas.layers.depth.height,z.x,z.y,z.verticalOffset),o=z._stairstepLine("bid",z.ordersToDraw.bids,z.canvas.layers.depth.width,z.canvas.layers.depth.height,z.x,z.y,z.verticalOffset);z.canvas.layers.depth.drawArea(o,function(e){return e},[{x:z.canvas.layers.depth.width+1,y:z.canvas.layers.depth.height+1},{x:o[o.length-1].x,y:z.canvas.layers.depth.height+1}],function(e){return e},{fill:L["default"].theme["long"].toString(),stroke:L["default"].theme["long"].toString(),fillAlpha:.1}),z.canvas.layers.depth.drawArea(i,function(e){return e},[{x:z.canvas.layers.depth.width+1,y:-1},{x:i[i.length-1].x,y:-1}],function(e){return e},{fill:L["default"].theme["short"].toString(),stroke:L["default"].theme["short"].toString(),fillAlpha:.1}),window.__BENCH__&&console.timeEnd("depth:draw")},_stairstepLine:function(e,t,r,n,a,i,o){for(var c=[],l=0,u=t,d=Array.isArray(u),h=0,u=d?u:u[Symbol.iterator]();;){var f;if(d){if(h>=u.length)break;f=u[h++]}else{if(h=u.next(),h.done)break;f=h.value}var p=f,g=s["default"].orderbook.depthAtPrice(e,p.price);c.push({x:r-Math.max(Math.floor(i(l))+.5,1.5),y:Math.floor(n-a(p.price)-o)+.5}),c.push({x:r-Math.max(Math.floor(i(g))+.5,1.5),y:Math.floor(n-a(p.price)-o)+.5}),l=g}return c},fmtPriceForAxis:function(e){return cryptowatch.currency.fmt(e,cryptowatch.currencyPair.quote,{label:!1,stripTrailingZeros:!1})},drawAxis:function(){var e=this;if(s["default"].orderbook){if(z.canvas.layers.axis.clear(),z.canvas.layers.axis.resetHoverareas(),z._setUpAxisHoverArea(),z.canvas.layers.axis.drawLineSegment({x:j-.5,y:0},{x:j-.5,y:z.canvas.layers.axis.height},{color:L["default"].theme.guide.toString()}),z.midPoint=z.canvas.layers.depth.height/2,z.labelsDrawn=[],z.drawCrosshair)if("depth"===z.crosshairMode){var t,r,n;z.fixedCrosshair&&(z.crosshairY=z.canvas.layers.axis.height-z.x(z.fixedCrosshair.price)),z.crosshairY>z.midPoint?(n="bid",r=z.crosshairY,t=z.crosshairY-2*(z.crosshairY-z.midPoint)):(n="ask",t=z.crosshairY,r=z.crosshairY+2*(z.midPoint-z.crosshairY));var a=s["default"].orderbook.farthestOrderAtPrice(z.x.invert(z.canvas.layers.axis.height-r)),o=s["default"].orderbook.farthestOrderAtPrice(z.x.invert(z.canvas.layers.axis.height-t));if(r>=z.canvas.layers.axis.height-z.x(s["default"].orderbook.bids[0].price)){z.orderBookInterface.setHoveredOrders(o.price,a.price),z._drawCrosshairLabel(o,"ask"),z._drawCrosshairLabel(a,"bid");var c=_["default"].lastPrice,u=s["default"].orderbook.depthAtPrice("ask",o.price),d=s["default"].orderbook.depthAtPrice("bid",a.price),h=s["default"].orderbook.priceAtDepth("ask",u),f=s["default"].orderbook.priceAtDepth("bid",d);D["default"].statusBar&&D["default"].statusBar.setProps({mode:"depth",presenter:{buy:{amount:u,change:Math.abs((c-o.price)/c),"final":o.price,cost:h},sell:{amount:d,change:Math.abs((c-a.price)/c),"final":a.price,cost:f}}})}}else"alert"===z.crosshairMode&&(z.orderBookInterface.unsetHoveredOrders(),i["default"].active()?i["default"].active()instanceof T["default"]&&D["default"].statusBar.setProps({mode:"removeAlert",presenter:{alert:i["default"].active()}}):k["default"].pending&&(D["default"].statusBar.setProps({mode:"setAlert",presenter:{alert:k["default"].pending}}),z.drawAlert(k["default"].pending,!0)));else D["default"].statusBar&&"depth"===D["default"].statusBar.props.mode&&D["default"].statusBar.setProps({mode:null});for(var p=k["default"].getItems(),g=Array.isArray(p),v=0,p=g?p:p[Symbol.iterator]();;){var m;if(g){if(v>=p.length)break;m=p[v++]}else{if(v=p.next(),v.done)break;m=v.value}var y=m;"price"!==y.subject||y.triggered||this.drawAlert(y,!1)}if(z.hoveringOverOrder){var w=z.hoveringOverOrder,x=w.price<=s["default"].orderbook.bids[0].price?L["default"].theme["long"].toString():L["default"].theme["short"].toString();z.canvas.layers.axis.drawCircle({x:Math.floor(z.canvas.layers.axis.width-z.y(s["default"].orderbook.depthAtPrice(w.side,w.price))),y:Math.floor(z.canvas.layers.axis.height-z.x(w.price))+.5},3,void 0,x)}l["default"].orders&&l["default"].orders.forEach(function(t){e.drawOrder(t)});var b=l["default"].potentialOrder();b?this.drawPotentialOrder(b):this.canvas.layers.animation.removeAnimation("pendingOrderDottedCircle");var S=L["default"].theme.text;this.deemphasizeLargeOrders()&&(S=S.mix(L["default"].theme.bg,.35)),z.ordersToDraw.bids.filter(function(e){return z.isSignificantOrder(e.amount)}).sort(function(e,t){return t.amount-e.amount}).slice(0,7).forEach(function(e){z._drawAxisLabel("bid",e.price,z.fmtPriceForAxis(e.price),{tickColor:S,dashedLineColor:L["default"].theme["long"].mix(L["default"].theme.bg,.5),textColor:S,drawLine:!z.deemphasizeLargeOrders()})}),z.ordersToDraw.asks.filter(function(e){return z.isSignificantOrder(e.amount)}).sort(function(e,t){return t.amount-e.amount}).slice(0,7).forEach(function(e){z.isSignificantOrder(e.amount)&&z._drawAxisLabel("ask",e.price,z.fmtPriceForAxis(e.price),{tickColor:S,dashedLineColor:L["default"].theme["short"].mix(L["default"].theme.bg,.5),textColor:S,drawLine:!z.deemphasizeLargeOrders()})});var C=P["default"].sharpen(z.midPoint);z.canvas.layers.axis.drawLineSegment({x:65,y:C},{x:70,y:C},{color:L["default"].theme.text.toString()}),z.canvas.layers.axis.drawLineSegment({x:69.5,y:C},{x:190,y:C},{color:L["default"].theme.guide.toString()}),z._roomForLabel(C)&&z.canvas.layers.axis.drawText({x:60,y:C},z.fmtPriceForAxis(z.fairMarketPrice()),S,{align:"end"})}},_setUpAxisHoverArea:function(){var e=new v.Hoverarea("depthAxis",{type:"rect",left:0,right:j,top:0,bottom:z.canvas.layers.depth.height},{});e.opts.callbacks.click=function(e){if("alert"===z.crosshairMode&&k["default"].pending){var t=k["default"].savePending();i["default"].hover(t),z.refresh(),z.canvas.scanHoverareas()}},e.opts.callbacks.leave=function(){delete k["default"].pending},z.canvas.layers.axis.registerHoverarea(e)},drawOrder:function(e){var t=Math.floor(z.canvas.layers.axis.height-z.x(e.price))+.5,r=s["default"].orderbook.depthAtPrice(e.side,e.price);void 0===r&&(r=z.depthForOrder(e));var n=Math.floor(z.canvas.layers.axis.width-z.y(r))+.5,a="ask"===e.side?L["default"].theme["short"]:L["default"].theme["long"],o=L["default"].theme.text;e.doomed&&(a=a.desaturate(),o=o.mix(L["default"].theme.bg,.5));var c=i["default"].isActive(e)?10:8;z.canvas.layers.axis.drawCircle({x:n,y:t},c+2,void 0,L["default"].theme.bg.toString()),z.canvas.layers.axis.drawCircle({x:n,y:t},4,a.toString(),L["default"].theme.bg.toString()),z.canvas.layers.axis.drawCircle({x:n,y:t},c,o.toString()),z._drawAxisLabel(e.side,e.price,cryptowatch.currency.fmt(e.price,void 0,{label:!1}),{tickColor:L["default"].theme.text,dashedLineColor:a,textColor:i["default"].isActive(e)?L["default"].theme.textStrong.toString():L["default"].theme.text.toString(),drawLine:!0}),z.canvas.layers.axis.registerHoverarea(new v.Hoverarea("depth:trade:"+e.Id,{type:"rect",left:0,top:t-6,bottom:t+6,right:z.canvas.layers.depth.width},{cursor:"pointer",callbacks:{hover:function(){i["default"].hover(e)},leave:function(){i["default"].blur(e)},click:function(){i["default"].select(e)}}}))},drawPotentialOrder:function(e){var t=Math.floor(z.canvas.layers.axis.height-z.x(e.price))+.5,r=this.depthForOrder(e),n=Math.floor(z.canvas.layers.axis.width-z.y(r))+.5,a="ask"===e.side?L["default"].theme["short"]:L["default"].theme["long"],i={x:n,y:t};z.canvas.layers.axis.drawCircle(i,4,a.toString(),L["default"].theme.bg.toString()),z.canvas.layers.animation.upsertAnimation("pendingOrderDottedCircle",this.canvas.layers.animation.animatedDashedCircle(i,{stroke:L["default"].theme.text.toString(),radius:8.5})),z._drawAxisLabel(e.side,e.price,cryptowatch.currency.fmt(e.price,void 0,{label:!1}),{tickColor:L["default"].theme.text,dashedLineColor:a,textColor:L["default"].theme.textStrong.toString(),drawLine:!0})},_roomForLabel:function(e){return 0==z.labelsDrawn.filter(function(t){return Math.abs(t-e)<12}).length},deemphasizeLargeOrders:function(){return z.drawCrosshair||i["default"].active()instanceof B.Order||l["default"].previewOrder},_drawAxisLabel:function(e,t,r,n){var a=Math.floor(z.canvas.layers.axis.height-z.x(t))+.5;r||(r=z.fmtPriceForAxis(t)),z.canvas.layers.axis.drawLineSegment({x:65,y:a},{x:70,y:a},{color:n.tickColor.toString()});var i=s["default"].orderbook.depthAtPrice(e,s["default"].orderbook.farthestOrderAtPrice(t).price);n.drawLine&&z.canvas.layers.axis.drawDashedHorizontalLineSegment(71,z.canvas.layers.axis.width-z.y(i),a,n.dashedLineColor.toString()),z._roomForLabel(a)&&(z.canvas.layers.axis.drawText({x:j-10,y:a},r,n.textColor.toString(),{align:"end"}),z.labelsDrawn.push(a))},drawAlert:function(e,t){var r=this.canvas.layers.axis.height-this.x(e.threshold);if(r>0&&r<this.canvas.layers.axis.height){var n=i["default"].active()===e,a=s["default"].orderbook.farthestOrderAtPrice(e.threshold),o=void 0;o=r<z.midPoint?"ask":"bid";var c=s["default"].orderbook.depthAtPrice(o,a.price),l=Math.floor(z.canvas.layers.axis.width-z.y(c));if(z.canvas.layers.axis.drawTriangle({x:P["default"].sharpen(j),y:P["default"].sharpen(r)},L["default"].theme.alert.toString(),"right"),t||n){var u=.3;n&&(u=.5),z.canvas.layers.axis.drawDashedHorizontalLineSegment(j,l,r,L["default"].theme.alert.toString(),{alpha:u})}z.canvas.layers.axis.drawText({x:j-10,y:r},e.formattedY(),n||t?L["default"].theme.textStrong.toString():L["default"].theme.text.toString(),{align:"end"}),t||z.canvas.layers.axis.registerHoverarea(new v.Hoverarea("alert:"+e.field+":"+e.threshold,{type:"rect",left:10,top:r-14,bottom:r+14,right:j},{cursor:"pointer",callbacks:{hover:function(){i["default"].hover(e)},leave:function(){i["default"].blur(e)},click:function(){e.cancel(),i["default"].blur(e),z.canvas.scanHoverareas()}}})),z.labelsDrawn.push(r)}},_drawCrosshairLabel:function(e,t){var r,n=s["default"].orderbook.depthAtPrice(t,e.price),a=z.fmtPriceForAxis(e.price),i=Math.floor(z.canvas.layers.axis.width-z.y(n)),o="ask"===t?L["default"].theme["short"].toString():L["default"].theme["long"].toString(),c=("ask"===t?L["default"].theme["long"].toString():L["default"].theme["short"].toString(),P["default"].sharpen(Math.floor(z.canvas.layers.axis.height-z.x(e.price))));switch(t){case"ask":r=Math.max(Math.min(z.midPoint-15,c),10);break;case"bid":r=Math.min(Math.max(z.midPoint+15,c),z.canvas.layers.axis.height-10)}z.canvas.layers.axis.drawDashedHorizontalLineSegment(j-.5,i,c,o),z.canvas.layers.axis.drawLineSegment({x:65,y:c},{x:70,y:c},{color:L["default"].theme.text.toString()}),z.canvas.layers.axis.drawCircle({x:i,y:c},3,void 0,o),z.canvas.layers.axis.drawCircle({x:i,y:z.midPoint},1.5,void 0,o),z.canvas.layers.axis.drawDashedVerticalLineSegment(c,z.midPoint,i,o),z.canvas.layers.axis.drawText({x:60,y:r},a,L["default"].theme.textStrong.toString(),{align:"end"}),z.labelsDrawn.push(r)},orderCountDepthForAmount:function(e,t){for(var r=0,n=s["default"].orderbook.get(t),a=0;a<n.length;a++)if(r+=n[a].amount,r>=e)return a+1;return n.length+1},pricesForAmount:function(e,t){for(var r=0,n=0,a=0,i=0,o=s["default"].orderbook.get(t),c=0;c<o.length;c++){var l=o[c];if(a=l.price,i+l.amount>e){var u=e-i;r+=l.price*(u/e),n+=l.price*u,i+=u}else r+=l.price*(l.amount/e),n+=l.price*l.amount,i+=l.amount;if(i==e)return{vwap:r,sum:n,finalp:l.price}}return{vwap:r*(e/i),finalp:a}},depthForTotalCost:function(e,t){var r=0,n=0,a=s["default"].orderbook.get(t);if(!a)return 0;for(var i=0;i<a.length;i++){var o=a[i],c=o.price*o.amount;if(n==e)return r;if(c>e-n)return r+=o.amount*((e-n)/c);n+=c,r+=o.amount}return r},depthForOrder:function(e){for(var t=0,r="ask"===e.side?"asks":"bids",n=s["default"].orderbook.get(r),a=Array.isArray(n),i=0,n=a?n:n[Symbol.iterator]();;){var o;if(a){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var c=o;if("asks"===r&&c.price>e.price||"bids"===r&&c.price<e.price)return t;t+=c.amount}},farthestOrderAtPrice:function(e){if(e<=s["default"].orderbook.bids[0].price){for(var t=0;t<s["default"].orderbook.bids.length-1;t++){var r=s["default"].orderbook.bids[t+1];if(r.price<e)return s["default"].orderbook.bids[t]}return s["default"].orderbook.bids[s["default"].orderbook.bids.length-1]}for(var t=0;t<s["default"].orderbook.asks.length-1;t++){var r=s["default"].orderbook.asks[t+1];if(r.price>e)return s["default"].orderbook.asks[t]}return s["default"].orderbook.asks[s["default"].orderbook.asks.length-1]},updateCrosshair:function(e){var t=z.canvas.cursor.state.posn.x,r=z.canvas.cursor.state.posn.y;i["default"].active()instanceof B.Order?z.hideCrosshair():(z.drawCrosshair=!0,z.crosshairY=r,j>=t?(z.crosshairMode="alert",k["default"].pending=new T["default"]("price",z.x.invert(z.canvas.layers.axis.height-r))):i["default"].active()instanceof B.Order||(z.crosshairMode="depth"),z.drawChart(),z.drawAxis())},hideCrosshair:function(){z.drawCrosshair=!1,z.drawAxis()},isSignificantOrder:function(e){return e>z.largeOrderThreshold},latestOrder:function(e,t){var r;if("bids"===e)for(var n=0;n<s["default"].orderbook.bids.length;n++){var a=s["default"].orderbook.bids[n];if(a.price<t)break;r=a}else for(var n=0;n<s["default"].orderbook.asks.length;n++){var a=publicDatpublicDataorderbook.asks[n];if(a.price>t)break;r=a}return r}};z=$.extend(z,d["default"]),t["default"]=z,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(5),i=(n(a),r(11)),o=n(i);t["default"]=React.createClass({displayName:"Price",getInitialState:function(){return{fiatPreference:this.props.fiatPreference}},getDefaultProps:function(){return{label:!1,icon:!1,colorize:!0,currentExchangePrecision:!1}},render:function(){var e=o["default"].fmt(this.props.price,this.props.fiatPreference,{label:this.props.label,currentExchangePrecision:this.props.currentExchangePrecision}).split("."),t=this.props.emphasis||{left:!0,right:!0},r=this.props.icon&&this.props.side?this.props.side:!1;return React.createElement("data",{"data-direction":r,className:React.addons.classSet({price:!0,"price--long":this.props.colorize&&"long"===this.props.side,"price--short":this.props.colorize&&"short"===this.props.side})},React.createElement("span",{className:React.addons.classSet({"price-left":!0,deemphasized:!t.left})},e[0]+"."),React.createElement("span",{className:React.addons.classSet({"price-right":!0,deemphasized:!t.right})},e[1]))}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(12),i=n(a),o=r(66),s=n(o),c=r(54),l=n(c),u=cryptowatch.hotkeys={initialize:function(){var e=this;$(document).on("keydown",function(t){e._updateModifiers(t),t.metaKey||t.ctrlKey||t.altKey||($('[data-key-code="'+t.which+'"]').addClass("pushed"),9===t.which&&"input"!==t.target.nodeName.toLowerCase()&&t.preventDefault(),void 0!==e._downActions[t.which]&&e._downActions[t.which](t))}),$(document).on("keyup",function(t){e._updateModifiers(t),$('[data-key-code="'+t.which+'"]').removeClass("pushed")}),$(document).on("keypress",function(e){u.keypress(e)}),$('#settings input[type="text"], #settings input[type="password"]').keydown(function(e){e.stopPropagation()}),$('#settings input[type="text"], #settings input[type="password"]').keypress(function(e){e.stopPropagation()})},modifiers:{alt:!1,shift:!1},_updateModifiers:function(e){var t={alt:e.altKey!==this.modifiers.alt,shift:e.shiftKey!==this.modifiers.shift};this.modifiers.alt=e.altKey,this.modifiers.shift=e.shiftKey,t.alt&&u.trigger("hotkey:modifierChange","alt"),t.shift&&u.trigger("hotkey:modifierChange","shift")},keypress:function(e){if("INPUT"!==e.target.nodeName||"text"!==e.target.getAttribute("type")){var t=String.fromCharCode(e.which);console.log(e.which,t),void 0!==u._pressActions[t]&&u._pressActions[t](e)}},keydown:function(e){},_pressActions:{"+":function(e){u.trigger("hotkey:increaseCandleWidth")},"=":function(e){u.trigger("hotkey:increaseCandleWidth")},"-":function(e){u.trigger("hotkey:decreaseCandleWidth")},1:function(e){u.trigger("hotkey:defaultCandleWidth")},"[":function(e){l["default"].sidebarDropdowns.settings.toggle()},"]":function(e){l["default"].sidebarDropdowns.notifications.toggle()},i:function(e){l["default"].toggleColumn(0)},o:function(e){l["default"].toggleColumn(1)},p:function(e){l["default"].toggleColumn(2)}," ":function(e){u.trigger("hotkey:defaultPosition")},m:function(e){l["default"].dropdowns.market.toggle()},j:function(e){u.trigger("hotkey:selectTool","crosshair")},l:function(e){u.trigger("hotkey:selectTool","line")},x:function(e){u.trigger("hotkey:selectTool","extrapolator")},e:function(){u.trigger("hotkey:selectTool","freeline")},h:function(){u.trigger("hotkey:selectTool","horizontalLine")},v:function(){u.trigger("hotkey:selectTool","verticalLine")},w:function(e){u.trigger("hotkey:selectTool","arrow")},r:function(e){u.trigger("hotkey:selectTool","fibonnaciRetracement")},f:function(e){u.trigger("hotkey:selectTool","fibonnaciFan")},a:function(e){u.trigger("hotkey:selectTool","fibonnaciArc")},c:function(e){u.trigger("hotkey:selectTool","circle")},t:function(e){$("#settings__trades").trigger("click")},y:function(e){$("#settings__orders").trigger("click")}},_downActions:{27:function(){for(var e in l["default"].sidebarDropdowns){l["default"].sidebarDropdowns[e].open&&l["default"].sidebarDropdowns[e].close();for(var t=l["default"].alertWindows,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if(n=t.next(),n.done)break;a=n.value}var i=a;i.close()}}l["default"].currentlyOpen&&l["default"].currentlyOpen.close(),s["default"]["interface"]&&s["default"]["interface"].reset()},37:function(e){var t=1;e.shiftKey&&(t*=10),u.trigger("hotkey:nudge",t)},39:function(e){var t=-1;e.shiftKey&&(t*=10),u.trigger("hotkey:nudge",t)}}};u=$.extend(u,i["default"]),t["default"]=u,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){var r=void 0;return function(){clearTimeout(r),r=setTimeout(e,t)}},e.exports=t["default"]},function(e,t){"use strict";function r(e,t,r){window.ga?window.ga("send","event",e,t,r):console.info("event",e,t,r)}t.__esModule=!0,t.trackEvent=r},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=r(31),o=a(i),s=r(12),c=a(s),l=r(37),u=r(25),d=(a(u),r(161)),h=a(d),f=r(159),p=a(f),g=r(40),v=a(g),m=r(8),y=a(m),w=r(61),x=a(w),b=r(55),_=a(b),S=r(174),k=n(S),C=r(83),T=a(C),E=r(10),P=a(E),A=cryptowatch.trading={initialize:function(){var e=this;if(this.enabled="enabled"===$("body").attr("trading"),this.enabled){this["interface"]=React.render(h["default"]({tradingTypesSupported:["spot","margin"],tradingType:"spot",orderTypesSupported:["limit","market"],priceIncrement:this.determinePriceIncrement(),trades:null,placeOrder:function(t){e.placeOrder(t)},cancelOrder:function(t){e.cancelOrder(t)},defaultPrice:y["default"].currentPrice(),previewOrder:function(e){v["default"].setPreviewOrder(e)},stopPreviewingOrder:function(e){v["default"].unsetPreviewOrder()},stageOrder:function(e){v["default"].setStagedOrder(e)},stopStagingOrder:function(e){v["default"].unsetStagedOrder()}}),document.getElementById("trading-interface-container"));var t=document.getElementById("active-orders-table-container");t&&(this.activeOrdersTable=React.render(p["default"]({orders:null,cancelOrder:function(t){e.cancelOrder(t)},trades:null}),t)),$("#trading-type").change(function(t){e["interface"].setProps({tradingType:t.target.value})}),v["default"].on("balances:update",function(){e["interface"].setProps({balances:v["default"].balances})}),t&&(v["default"].on("trades:update",function(){e.activeOrdersTable.setProps({trades:v["default"].trades})}),v["default"].on("orders:change",function(t){e.activeOrdersTable.setProps({orders:t})})),y["default"].on("orders:change",T["default"](function(){e["interface"].recalculate()},1e3)),o["default"].on("selected:change",function(t,r){r instanceof l.Order&&e["interface"].setState({modifyingOrder:r})})}},_placingOrder:!1,placeOrder:function(e){if(!this._placingOrder){this._placingOrder=!0,_["default"].send({action:"placeOrder",data:{Price:e.price,Amount:e.amount,Type:e.type,Side:["ask","bid"].indexOf(e.side)}});var t=x["default"].fairMarketPrice(),r=void 0;switch(e.side){case"ask":r=e.price<t;break;case"bid":r=e.price>t}r&&_["default"].send({action:"requestPrivateTradeUpdates"}),this["interface"].setProps({placementProgress:"Broadcasting order"})}},cancelOrder:function(e){this._placingOrder||(this._placingOrder=!0,v["default"].expectOrderToDisappear(e.id),o["default"].blur(e),_["default"].send({action:"cancelOrder",data:{Id:""+e.id}}),this.handleCancelProgress("Sending cancel request"))},handlePlaceProgress:function(e){this["interface"].setProps({placementProgress:e})},handleCancelProgress:function(e){this["interface"].setProps({cancellationProgress:e})},handlePlaceError:function(e){switch(P["default"].increment("trading-client.handle-error."+e),console.info("APIError",e),e){case k.NoResponse:this.flashPlacementError("Error: no response from "+cryptowatch.exchange.name);break;case k.NotEnoughBalance:this.flashPlacementError("Error: insufficient funds");break;case k.UnprivilegedKey:this.flashPlacementError("Error: unprivileged API key");break;case k.InvalidKey:this.flashPlacementError("Error: invalid API key");break;default:this.flashPlacementError("Unhandled error, try again")}},flashPlacementError:function(e){var t=this;this["interface"].setProps({placementError:e,progress:null}),setTimeout(function(){t.handleOrderPlacementSuccess()},5e3)},handleOrderPlacementSuccess:function(e){this._placingOrder=!1,this["interface"].tradeComplete(),this["interface"].setProps({placementProgress:null,placementError:null})},handleCancelError:function(e){var t=this;this["interface"].setProps({cancellationError:e,progress:null}),setTimeout(function(){t.handleOrderCancellationSuccess()},5e3)},handleOrderCancellationSuccess:function(e){this._placingOrder=!1,this["interface"].stopModifyingOrder(),this["interface"].setProps({cancellationProgress:null})},determinePriceIncrement:function(){var e=y["default"].currentPrice();return e>1e5?100:e>1e4?10:e>1e3?1:e>100?.1:e>10?.01:e>1?.001:e>.1?1e-4:1e-5}};A=$.extend(A,c["default"]),t["default"]=A,e.exports=t["default"]},function(e,t,r){"use strict";var n=r(27),a=r(72),i=r(34),o=r(19),s=r(191);e.exports=function(e){var t=1==e,r=2==e,c=3==e,l=4==e,u=6==e,d=5==e||u;return function(h,f,p){for(var g,v,m=i(h),y=a(m),w=n(f,p,3),x=o(y.length),b=0,_=t?s(h,x):r?s(h,0):void 0;x>b;b++)if((d||b in y)&&(g=y[b],v=w(g,b,m),e))if(t)_[b]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return b;case 2:_.push(g)}else if(l)return!1;return u?-1:c||l?l:_}}},function(e,t,r){"use strict";var n=r(32),a=r(7)("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[a])?r:i?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,r){"use strict";var n=r(9),a=r(1),i=r(23),o=r(73),s=r(56),c=r(75),l=r(4),u=r(13),d=r(91),h=r(58);e.exports=function(e,t,r,f,p,g){var v=n[e],m=v,y=p?"set":"add",w=m&&m.prototype,x={},b=function(e){var t=w[e];i(w,e,"delete"==e?function(e){return g&&!l(e)?!1:t.call(this,0===e?0:e)}:"has"==e?function(e){return g&&!l(e)?!1:t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof m&&(g||w.forEach&&!u(function(){(new m).entries().next()}))){var _,S=new m,k=S[y](g?{}:-0,1)!=S,C=u(function(){S.has(1)}),T=d(function(e){new m(e)});T||(m=t(function(t,r){c(t,m,e);var n=new v;return void 0!=r&&s(r,p,n[y],n),n}),m.prototype=w,w.constructor=m),g||S.forEach(function(e,t){_=1/t===-(1/0)}),(C||_)&&(b("delete"),b("has"),p&&b("get")),(_||k)&&b(y),g&&w.clear&&delete w.clear}else m=f.getConstructor(t,e,p,y),o(m.prototype,r);return h(m,e),x[e]=m,a(a.G+a.W+a.F*(m!=v),x),g||f.setStrong(m,e,p),m}},function(e,t,r){"use strict";var n=r(29),a=r(23),i=r(13),o=r(28),s=r(7);e.exports=function(e,t,r){var c=s(e),l=""[e];i(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(a(String.prototype,e,r(o,c,l)),n(RegExp.prototype,c,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)}))}},function(e,t){"use strict";e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){"use strict";var n=r(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){"use strict";var n=r(23);e.exports=function(e,t){for(var r in t)n(e,r,t[r]);return e}},function(e,t,r){"use strict";var n=r(9),a=r(2),i=r(21),o=r(7)("species");e.exports=function(e){var t=n[e];i&&t&&!t[o]&&a.setDesc(t,o,{configurable:!0,get:function(){return this}})}},function(e,t){"use strict";e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e}},function(e,t,r){"use strict";var n=r(1),a=r(28),i=r(13),o="	\n\x0B\f\r \u2028\u2029\ufeff",s="["+o+"]",c="",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t){var r={};r[e]=t(h),n(n.P+n.F*i(function(){return!!o[e]()||c[e]()!=c}),"String",r)},h=d.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var o=r(26),s=r(36),c=n(s),l=r(5),u=n(l),d=r(10),h=n(d),f=r(8),p=n(f),g=r(31),v=n(g),m=React.createClass({displayName:"ChartAlertNotification",render:function(){var e=this;return React.createElement("div",null,React.createElement("table",{width:"100%",className:"chart-alert"},React.createElement("tr",null,React.createElement("td",{onMouseOver:function(){v["default"].hover(e.props.alert)},onMouseOut:function(){v["default"].blur(e.props.alert)},width:"260"},React.createElement("span",null,this.props.triggered?this.props.declaration:React.createElement("span",null,c["default"]("alert")," ",this.props.description))),this.props.triggered?null:React.createElement("td",{style:{textAlign:"center"}},React.createElement("input",{type:"checkbox",id:"alert-entry-"+this.props.id+"__option--noise",checked:!this.props.availableAPIs.nativeAudio||this.props.silent,onChange:this.props.toggleSilent,disabled:!this.props.availableAPIs.nativeAudio}),React.createElement("label",{htmlFor:"alert-entry-"+this.props.id+"__option--noise"},"silent")),this.props.triggered?null:React.createElement("td",{width:30,style:{textAlign:"center"}},React.createElement("div",{className:"notification-item__destroy icon-cross",onClick:this.props.destroy})),this.props.triggered?React.createElement("td",{style:{textAlign:"right",border:"none"}},React.createElement("a",{onClick:this.props.destroy,className:"button"},"Dismiss")):null)))}}),y=function(e){function t(r,n){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(a(this,t),e.call(this),this.subject=r,this.threshold=n,this.severity=o.SEVERITY.HIGH,this.market=cryptowatch.market.slug,this.opts=i,void 0===this.opts.period&&(this.opts.period=cryptowatch.periodInt),void 0===this.opts.side)switch(r){case"price":var s=p["default"].intervalQueues[60].last.Candle.Close;n>s?this.opts.side=1:this.opts.side=-1}if(void 0===this.opts.noise&&(this.opts.noise=!0),this.opts.noise)switch(this.opts.side){case 1:this.opts.noisePitch=700;break;case-1:this.opts.noisePitch=500}}return i(t,e),t.fromJSON=function(e,r){e.opts||(e.opts={side:"above"===e.side?1:-1,period:e.timeInterval}),e.market||(e.market=cryptowatch.market.slug),!e.userId&&cryptowatch.session&&(e.userId=cryptowatch.session.userId),e.subject||(e.subject=e.field);var n=new t(e.subject,e.threshold,e.opts);return n.opts=e.opts||{},n.id=e.id,n.subject=e.subject,n.market=e.market,n.userId=e.userId,n._destroy=r,n},t.fieldSupported=function(e){return-1!==["price","volume"].indexOf(e)},t.prototype.render=function(e){return React.createElement(m,{alert:this,id:this.id,declaration:this.declaration(),description:this.description(),triggered:this.triggered,value:this.formattedY(),silent:!this.opts.noise,availableAPIs:e,toggleSilent:this.toggleSilent.bind(this),destroy:this.destroy.bind(this)})},t.prototype.toggleSilent=function(){this.opts.noise=!this.opts.noise,self.trigger("change"),self.updateAlert(this)},t.prototype.description=function(){switch(this.subject){case"price":return s.ts("if-price-reaches",this.formattedY());case"volume":return s.ts("if-volume-exceeds",this.formattedY())}},t.prototype.declaration=function(){switch(this.subject){case"price":return s.ts("price-has-reached",this.formattedY());case"volume":return s.ts("volume-has-exceeded",this.formattedY())}},t.prototype.stillValid=function(){switch(this.subject){case"price":var e=p["default"].intervalQueues[cryptowatch.periodInt].last.Candle.Close;switch(this.opts.side){case 1:return e<this.threshold;case-1:return e>this.threshold}break;case"volume":var t=p["default"].intervalQueues[this.opts.period],r=t.last.Volume;return r<this.threshold}},t.prototype.y=function(){
return cryptowatch.chart.canvas.fields[this.subject].y(this.threshold)},t.prototype.formattedY=function(){switch(this.subject){case"price":return cryptowatch.currency.fmt(this.threshold,void 0,{label:!1});case"volume":return u["default"].amountToString(this.threshold);default:return this.threshold}},t.prototype.trigger=function(){this.triggered||h["default"].increment("alerts.trigger"),this.triggered=!0,this.triggeredTime=Math.floor((new Date).valueOf()/1e3),window.ga&&window.ga("send","event","alerts","trigger")},t.prototype.destroy=function(){this._destroy(this.id),this.cleanup()},t.prototype.cancel=function(){this.destroy(),h["default"].increment("alerts.cancel")},t.prototype.validForView=function(){return"volume"===this.subject?this.opts.period===cryptowatch.periodInt:!0},t}(o.Notification);t["default"]=y,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(102),i=n(a),o=r(11),s=n(o),c=r(8),l=n(c),u=["bitfinex:btcusd","bitstamp:btcusd","kraken:btceur","okcoin:btcusd-weekly-futures","okcoin:btccny","huobi:btccny","bitmex:xbu-monthly-futures"];t["default"]={initialize:function(){var e=this;if(!cryptowatch.disable.feeds){this.load(),this.prices={},this.directions={};for(var t=this.bookmarks,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if(n=t.next(),n.done)break;a=n.value}var o=a;this.prices[o]=0,this.directions[o]="long"}this["interface"]=React.render(i["default"]({bookmarks:this.bookmarks,price:this.prices,directions:this.directions,fiatPreference:s["default"].fiatPreference,cache:this.cache}),document.getElementById("bookmarked-tickers-container")),s["default"].on("fiatPreference:change",function(){e["interface"].setProps({fiatPreference:s["default"].fiatPreference})}),l["default"].on("ticker:update",function(t){e.handleTicker(t)})}},load:function(){var e=localStorage.getItem("bookmarkedTickers");e?this.bookmarks=JSON.parse(e):this.bookmarks=u},cache:function(){localStorage.setItem("bookmarkedTickers",JSON.stringify(this.bookmarks))},handleTicker:function(e){this.prices[e.slug]={price:e.price,quote:e.quote},this.directions[e.slug]=e.direction?"long":"short",this["interface"].setProps({prices:this.prices,directions:this.directions})}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5),s=(n(o),r(25)),c=(n(s),r(16)),l=(n(c),r(86)),u=(n(l),r(20)),d=(n(u),r(100)),h=(n(d),r(84)),f=n(h),p=r(142),g=n(p),v=function(){function e(t,r){var n=this;a(this,e),this.layers={},this.fields={},r=r||{},this._layersOrder=[],this.DOMElement=document.querySelector(t),this.cursor=new f["default"](this.DOMElement,r.cursor),this.cursor.on("mousemove",function(e,t){for(var r in this.fields){var n=this.fields[r];n.unpaddedRange.bottom>=t.y&&n.unpaddedRange.top<=t.y&&"yaxis"!==n.name&&"priceConverted"!==n.name&&(this.cursor.state.activeFieldY=n),n.unpaddedRange.right>=t.x&&n.unpaddedRange.left<=t.x&&(this.cursor.state.activeFieldX=n),n.unpaddedRange.bottom>=t.y&&n.unpaddedRange.top<=t.y&&n.unpaddedRange.right>=t.x&&n.unpaddedRange.left<=t.x&&(this.cursor.state.activeField=n)}}.bind(this)).on("mousedown",function(e){for(var t in this.layers){var r=this.layers[t];void 0!==r.hoverareaState.hover&&(r.hoverareaState.active=r.hoverareaState.hover,r.activateHoverarea(r.hoverareaState.hover),r.hoverareaState.active.active(),r.hoverareaState.active.mousedown(e,this.cursor.state.snappedPosn||this.cursor.state.posn))}}.bind(this)).on("mouseup",function(){this.unactivateHoverarea()}.bind(this)).on("mousemove",function(){this.scanHoverareas()}.bind(this)).on("mouseenter",function(){this.setCursorType(this._defaultCursorType)}.bind(this)).on("mouseleave",function(){this.unhoverHoverarea(),this.setCursorType(this._defaultCursorType)}.bind(this)).on("click",function(){var e=this.activeHoverarea();e&&e.click(this.cursor.state.posn)}.bind(this)).on("drag",function(e,t,r){var n=this.activeHoverarea();return n?(n.drag(this.cursor.state.snappedPosn||this.cursor.state.posn,t,r),!1):void 0}.bind(this)),$(window).on("resize.canvas-"+name,function(){n.refreshSize()})}return e.prototype.height=function(){return self.layers[Object.keys(self.layers)[0]].height},e.prototype.registerLayer=function(e,t){var r=new g["default"](t);return this.layers[e]=r,this._layersOrder.push(e),r.refreshSize(),r.canvas=this,this},e.prototype.scanHoverareas=function(){for(var e in this.layers){var t=this.layers[e];if(t._scanForHoverarea(this.cursor.state.snappedPosn||this.cursor.state.posn))break}},e.prototype.hoverHoverarea=function(){for(var e in this.layers){var t=this.layers[e];if(void 0!==t.hoverareaState.hover)return t.hoverareaState.hover}},e.prototype.activeHoverarea=function(){for(var e in this.layers){var t=this.layers[e];if(void 0!==t.hoverareaState.active)return t.hoverareaState.active}},e.prototype.unhoverHoverarea=function(){for(var e in this.layers){var t=this.layers[e];t.hoverareaState.hover&&(t.hoverareaState.hover.leave(),delete t.hoverareaState.hover)}},e.prototype.unactivateHoverarea=function(){for(var e in this.layers){var t=this.layers[e];if(t.hoverareaState.active){var r=t.hoverareaState.active;r.unactivate(),t.deactivateHoverarea(r),delete t.hoverareaState.active}}},e.prototype.registerHoverarea=function(e){this.hoverareas.push(e),this.hoverareasIndex[e.name]=e,e.canvas=this},e.prototype.setCursorType=function(e){this.DOMElement.setAttribute("cursor",e)},e.prototype.setDefaultCursorType=function(e){this._defaultCursorType=e,this.setCursorType(e)},e.prototype.refreshSize=function(){for(var e in this.layers)this.layers[e].refreshSize();for(var e in this.layers)this.layers[e].resize&&this.layers[e].resize()},e.prototype.toDataURL=function(e,t){var r=this,n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=document.createElement("canvas");a.width=this.width,a.height=this.height;var i=a.getContext("2d");this._drawLayersToContext(i,this._layersOrder,function(){n.postProcessing&&n.postProcessing(r,a,i),e(a.toDataURL())},t,this._layersOrder.length)},e.prototype._drawLayersToContext=function(e,t,r,n,a){var i=this,o=this.layers[t[0]],s=o.DOMElement.toDataURL(),c=new Image;n(a-t.length,a),c.onload=function(){e.drawImage(c,0,0),1===t.length?r(e):i._drawLayersToContext(e,t.slice(1),r,n,a)},c.src=s},i(e,[{key:"width",get:function(){return this.layers[this._layersOrder[0]].DOMElement.width}},{key:"height",get:function(){return this.layers[this._layersOrder[0]].DOMElement.height}},{key:"ratio",get:function(){return this.layers[this._layersOrder[0]].ratio}}]),e}();t.MultiLayerCanvas=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(11),i=n(a);t["default"]=React.createClass({displayName:"Amount",getDefaultProps:function(){return{label:!1,currentExchangePrecision:!1}},render:function(){var e=i["default"].fmtAmount(this.props.amount,{label:this.props.label,currentExchangePrecision:this.props.currentExchangePrecision}).split(".");return React.createElement("div",{className:"amount-component"},React.createElement("span",null,e[0]+"."),React.createElement("span",{className:"amount-component__right-half"},e[1]))}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(3),i=n(a),o=r(64),s=n(o),c={btce:"https://btc-e.com/profile#api_keys",bitfinex:"https://www.bitfinex.com/account/api",bitstamp:"https://www.bitstamp.net/account/security/api/",coinbase:"https://exchange.coinbase.com/settings",kraken:null};t["default"]=React.createClass({displayName:"APIAccessorAddForm",getInitialState:function(){return{inNetworkCall:!1}},componentDidMount:function(){this.onInputDebounced=s["default"](this.onInput,1e3)},onInput:function(){"bitstamp"===this.props.xch.slug&&""===this.getCustomerId()||"coinbase"===this.props.xch.slug&&""===this.getPassphrase()||this.getKey().length>10&&this.getSecret().length>10&&this.submit()},buildSubmitPayload:function(){var e={exchange:this.props.xch.slug,key:this.getKey(),secret:this.getSecret()};switch(this.props.xch.slug){case"bitstamp":e.customerId=this.getCustomerId();break;case"coinbase":e.passphrase=this.getPassphrase()}return e},submit:function(){var e=this;this.props.onNetworkCallStart(),this.setState({inNetworkCall:!0}),i["default"].post("/account/api-access/create").type("form").send(this.buildSubmitPayload()).end(function(t,r){e.setState({inNetworkCall:!1}),e.props.onNetworkCallEnd();var n=JSON.parse(r.text);200===r.status?e.props.onSuccess(n.key):e.props.onError(n.error)})},getKey:function(){return this.refs.key.getDOMNode().value},getSecret:function(){return this.refs.secret.getDOMNode().value},getCustomerId:function(){return this.refs.customerId.getDOMNode().value},getPassphrase:function(){return this.refs.passphrase.getDOMNode().value},render:function(){var e=this,t=void 0,r=[React.createElement("input",{ref:"key",type:"text",placeholder:"API Key",onChange:this.onInput}),React.createElement("input",{ref:"secret",type:"text",placeholder:"API Secret",onChange:this.onInput})],n=void 0,a=c[this.props.xch.slug];switch(a&&(n=React.createElement("div",null,React.createElement("br",null),React.createElement("a",{className:"account-api-accessor-form__help-link",target:"_blank",href:a},"Where do I generate a key? ",React.createElement("span",{className:"icon icon-popup"})))),this.props.xch.slug){case"bitstamp":r.unshift(React.createElement("input",{ref:"customerId",type:"text",placeholder:"Customer ID",onChange:this.onInput}));break;case"coinbase":r.push(React.createElement("input",{ref:"passphrase",type:"text",placeholder:"Key Passphrase",onChange:function(){e.onInputDebounced()}}))}return t=React.createElement("div",{className:"account-api-accessor-form__fields",onKeyDown:function(t){13===t.which&&e.submit()}},r,n)}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(3),i=n(a),o=r(53),s=n(o),c=r(36),l=n(c);t["default"]=React.createClass({displayName:"LoginForm",getInitialState:function(){return{step:0,error:null,inNetworkCall:!1}},getDefaultProps:function(){return{redirectTo:""+window.location}},componentDidUpdate:function(e,t){var r=this;1===this.state.step&&0===t.step&&setTimeout(function(){r.refs.mfaPasscodeInput.getDOMNode().focus()},10)},getEmailInput:function(){return this.refs.emailInput.getDOMNode().value},getPasswordInput:function(){return this.refs.passwordInput.getDOMNode().value},getMFAInput:function(){return this.refs.mfaPasscodeInput.getDOMNode().value},submit:function(e){var t=this;e.preventDefault();var r=!1;return this.setState({inNetworkCall:!0,error:null}),0===this.state.step?i["default"].post("/account/login/basic").type("form").send({email:this.getEmailInput(),password:this.getPasswordInput()}).end(function(e,n){try{var a=JSON.parse(n.text);switch(n.status){case 200:a.mfaRequired?t.goToMFAStep():(r=!0,t.goToRedirect());break;default:t.setState({error:a.error})}}catch(i){t.setState({error:"Unhandled error"})}t.setState({inNetworkCall:r})}):1===this.state.step&&i["default"].post("/account/login/multi-factor").type("form").send({passcode:this.getMFAInput()}).end(function(e,n){switch(n.status){case 200:r=!0,t.goToRedirect();break;default:var a=void 0;try{a=JSON.parse(n.text).error}catch(i){a="Unhandled error"}t.setState({error:a})}t.setState({inNetworkCall:r})}),!1},goToRedirect:function(){window.location=this.props.redirectTo},goToMFAStep:function(){this.setState({step:1})},renderEmailPasswordForm:function(){return React.createElement("div",null,React.createElement("form",{method:"POST",action:"/account/login/basic",onSubmit:this.submit},this.props.headers?React.createElement("h2",null,React.createElement("strong",null,"Login")):null,React.createElement("input",{id:"account-email","data-autofocus":"true",type:"text",name:"email",ref:"emailInput",placeholder:"Email",onKeyUp:s["default"](this.submit)}),React.createElement("input",{id:"account-pwd",type:"password",ref:"passwordInput",name:"password",placeholder:"Password",onKeyUp:s["default"](this.submit)}),React.createElement("div",null,React.createElement("input",{type:"submit",className:React.addons.classSet({button:!0,"button--in-progress":this.state.inNetworkCall}),value:"Login"}),this.state.error?React.createElement("error",null,this.state.error):null),React.createElement("div",null,React.createElement("br",null),this.props.createAccountCrosslink?React.createElement("a",{className:"underline",href:"/account/create/"},l["default"]("create-account")):null,this.props.createAccountCrosslink?React.createElement("span",null," - "):null,React.createElement("a",{className:"underline",href:"/account/recover-password/"},l["default"]("forgot-password")))))},renderMFAForm:function(){return React.createElement("div",null,this.props.headers?React.createElement("h2",null,React.createElement("strong",null,"Multi-factor authentication")):null,React.createElement("p",null,"Please enter the 6 digit passcode from Google Authenticator."),React.createElement("br",null),React.createElement("form",{method:"POST",action:"/account/login/multi-factor",onSubmit:this.submit},React.createElement("input",{maxLength:6,type:"text",ref:"mfaPasscodeInput",className:"mfa-input",onKeyDown:s["default"](this.submit)}),React.createElement("div",null,React.createElement("input",{type:"submit",className:React.addons.classSet({button:!0,"button--in-progress":this.state.inNetworkCall}),disabled:this.state.inNetworkCall,value:"Submit"}),this.state.error?React.createElement("error",null,this.state.error):null)),React.createElement("div",null,React.createElement("br",null),React.createElement("a",{className:"underline",href:"/account/recover-mfa"},l["default"]("lost-device"))))},render:function(){return[this.renderEmailPasswordForm,this.renderMFAForm][this.state.step]()}}),e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){var r=0,n=void 0,a=function(){clearTimeout(n);var a=(new Date).valueOf(),i=a-r;i>t?(e(),r=a):n=setTimeout(function(){e(),r=(new Date).valueOf()},Math.max(t-i,100))};return a.wait=function(e){t=e},a},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(20),o=n(i),s=r(12),c=n(s),l=r(25),u=(n(l),r(183)),d=n(u),h=function(){function e(t){var r=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];a(this,e),this.state={down:!1,dragging:!1,posn:new o["default"](0,0),lastEvent:null,lastDownEvent:null,mousemoveAccum:{x:0,y:0},activeField:null},this._callbacks={},this.opts=n||{},this.DOMElement=t,$(t).on("mouseenter",function(e){this.mouseenter(e)}.bind(this)).on("mousemove",function(e){this.mousemove(e)}.bind(this)).on("mousedown",function(e){this.mousedown(e)}.bind(this)).on("mouseleave",function(e){this.mouseleave(e)}.bind(this)).on("contextmenu",function(e){this.contextmenu(e)}.bind(this)),$(document).on("mouseup",function(e){this.state.down&&this.mouseup(e)}.bind(this)),d["default"].bind(this,n);var i=/Firefox/.test(navigator.userAgent),s=i?"DOMMouseScroll":"mousewheel";t.addEventListener(s,function(e){i?e.detail<0?r.trigger("scroll:down",e.detail):r.trigger("scroll:up",e.detail):Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r.trigger("scroll:horizontal",e.wheelDeltaX):e.wheelDeltaY>0?r.trigger("scroll:down",e.wheelDeltaY):r.trigger("scroll:up",e.wheelDeltaY),n.enableScrolling||e.preventDefault()})}return e.prototype.drag=function(e){this.state.dragging||(this.trigger("drag:start",e),document.addEventListener("mousemove",this.state._documentDragListener),this.DOMElement.removeEventListener("mousemove",this.state._documentDragListener)),this.state.dragging=!0;var t={x:e.pageX-this.state.lastEvent.pageX,y:e.pageY-this.state.lastEvent.pageY},r={x:0,y:0};if(this.opts.dragSnap&&this.opts.dragSnap.x){this.state.mousemoveAccum.x+=t.x;var n=Math.abs(this.state.mousemoveAccum.x);n>=this.opts.dragSnap.x&&(r.x=Math.floor(this.state.mousemoveAccum.x/this.opts.dragSnap.x)*this.opts.dragSnap.x,this.state.mousemoveAccum.x-=r.x)}else r.x=t.x;if(this.opts.dragSnap&&this.opts.dragSnap.y){this.state.mousemoveAccum.y+=t.y;var n=Math.abs(this.state.mousemoveAccum.y);n>=this.opts.dragSnap.y&&(r.y=Math.floor(n/this.opts.dragSnap.y)*this.opts.dragSnap.y,this.state.mousemoveAccum.y-=r.y)}else r.y=t.y;this.trigger("drag",e,this.state.posn,t,r)},e.prototype.setDragSnapping=function(e){e=e||{},e.x&&(this.opts.dragSnap.x=e.x),e.y&&(this.opts.dragSnap.y=e.y)},e.prototype.mouseenter=function(e){this.trigger("mouseenter",e,this.state.posn)},e.prototype.mousemove=function(e){this.calculatePosns(e),this.snap(),e.posn=this.state.posn,e.pagePosn=this.state.pagePosn,e.snappedPosn=this.state.snappedPosn,null!==this.state.lastEvent&&(this.state.down&&this.state.downLeftClick?(this.drag(e),this.state.posn.distanceFrom(this.state.lastDownPosn)>5&&(this.state.actuallyDragged=!0)):this.trigger("mousemove",e,this.state.posn)),this.state.lastEvent=e},e.prototype.snap=function(){var e=this;if(this.opts.snapPosns&&this.opts.snapThreshold){var t=function(){var t=e.opts.snapThreshold(),r=e.opts.snapPosns(e.state.posn);if(!r)return e.state.snappedPosn=null,{v:void 0};var n=r.filter(function(r){return r._cursorDistance=r.distanceFrom(e.state.posn),r._cursorDistance<=t}).sort(function(e,t){return e._cursorDistance-t._cursorDistance});0===n.length?e.state.snappedPosn=null:e.state.snappedPosn=n[0]}();if("object"==typeof t)return t.v}else this.state.snappedPosn=null},e.prototype.mouseleave=function(e){var t=this;this.state.posn.x=-1e3,this.state.posn.y=-1e3,this.trigger("mouseleave",e,this.state.posn),this.state.dragging&&(this.trigger("drag:leaveParent",e),this.state._documentDragListener=function(e){t.mousemove(e)},document.addEventListener("mousemove",this.state._documentDragListener)),delete this.state.activeField,delete this.state.activeFieldY,delete this.state.activeFieldX},e.prototype.mouseup=function(e){e.posn=this.state.posn,e.pagePosn=this.state.pagePosn,this.state.lastDownEvent&&(this.state.actuallyDragged||(3==e.which||e.which<2&&e.ctrlKey?(this.trigger("rightclick",e,this.state.posn),this.state.down=!1):1!=e.which&&0!=e.which||(this.trigger("click",e,this.state.posn),this.state.down=!1,this.state.downLeftClick=!1,this.state.dragging&&!this.state.actuallyDragged&&$(this.state.lastDownEvent.target).click()))),this.state.dragging&&(this.trigger("drag:stop",e,this.state.posn),document.removeEventListener("mousemove",this.state._documentDragListener),this.DOMElement.addEventListener("mousemove",this.state._documentDragListener)),this.state._documentDragListener&&(document.removeEventListener("mousemove",this.state._documentDragListener),delete this.state._documentDragListener),this.trigger("mouseup",e,this.state.posn),this.state.mousemoveAccum.x=0,this.state.mousemoveAccum.y=0,this.state.down=!1,this.state.lastEvent=null,this.state.dragging=!1,this.state.actuallyDragged=!1},e.prototype.mousedown=function(e){this.state.down=!0,1!=e.which&&0!=e.which||(this.state.downLeftClick=!0),this.state.lastDownEvent=e,this.calculatePosns(e),this.state.lastDownPosn=this.state.posn,this.trigger("mousedown",e,this.state.posn)},e.prototype.calculatePosns=function(e){var t=this.DOMElement.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;this.state.posn=new o["default"](r,n),this.state.pagePosn=new o["default"](e.pageX,e.pageY)},e.prototype.contextmenu=function(e){this.opts.disableContextMenu&&e.preventDefault()},e}();$.extend(h.prototype,c["default"]),t["default"]=h,e.exports=t["default"]},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){return null===e?[]:void 0===e?[]:e.map(function(e){return new a(e[0],e[1])})}t.__esModule=!0,t.parseOrderTuples=n;var a=function(){function e(t,n){r(this,e),this.price=t,this.amount=n}return e.prototype.equals=function(e){return this.price===e.price&&this.amount===e.amount},e}();t["default"]=a},function(e,t){"use strict";function r(e,t){for(var r in t)if(t.hasOwnProperty(r)){if(void 0!==e[r])throw new Error("Tried to add mixin which would override property: "+r);e[r]=t[r].bind(e)}}t.__esModule=!0,t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(8),i=n(a),o={initialize:function(){var e=this;o.defaultTitle=document.title,i["default"].on("ticker:update",function(t){e.handleTicker(t)})},handleTicker:function(e){if(0!==e.price&&($('[data-slug="'+e.slug+'"]').each(function(t,r){var n=$(r),a=n.find(".js-ticker-price"),i=n.attr("data-quote-currency"),o=cryptowatch.currency.fmt(e.price,i,{label:!1});a.text(o).attr("value",e.price)}),e.slug===cryptowatch.market.slug)){var t=cryptowatch.currency.fmt(e.price,cryptowatch.currencyPair.quote);cryptowatch.depth.orderBookInterface&&cryptowatch.depth.orderBookInterface.setProps({lastPrice:e.price}),o.lastPrice=e.price,document.title=t+" - "+o.defaultTitle}}};t["default"]=o,e.exports=t["default"]},function(e,t,r){"use strict";var n=r(7)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(a){}}return!0}},function(e,t,r){"use strict";var n=r(32);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){"use strict";var n=r(92),a=r(1),i=r(23),o=r(29),s=r(18),c=r(57),l=r(127),u=r(58),d=r(2).getProto,h=r(7)("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",g="keys",v="values",m=function(){return this};e.exports=function(e,t,r,y,w,x,b){l(r,t,y);var _,S,k=function(e){if(!f&&e in P)return P[e];switch(e){case g:return function(){return new r(this,e)};case v:return function(){return new r(this,e)}}return function(){return new r(this,e)}},C=t+" Iterator",T=w==v,E=!1,P=e.prototype,A=P[h]||P[p]||w&&P[w],M=A||k(w);if(A){var R=d(M.call(new e));u(R,C,!0),!n&&s(P,p)&&o(R,h,m),T&&A.name!==v&&(E=!0,M=function(){return A.call(this)})}if(n&&!b||!f&&!E&&P[h]||o(P,h,M),c[t]=M,c[C]=m,w)if(_={values:T?M:k(v),keys:x?M:k(g),entries:T?k("entries"):M},b)for(S in _)S in P||i(P,S,_[S]);else a(a.P+a.F*(f||E),t,_);return _}},function(e,t,r){"use strict";var n=r(7)("iterator"),a=!1;try{var i=[7][n]();i["return"]=function(){a=!0},Array.from(i,function(){throw 2})}catch(o){}e.exports=function(e,t){if(!t&&!a)return!1;var r=!1;try{var i=[7],o=i[n]();o.next=function(){r=!0},i[n]=function(){return o},e(i)}catch(s){}return r}},function(e,t){"use strict";e.exports=!1},function(e,t){"use strict";e.exports=Math.expm1||function(e){return 0==(e=+e)?e:e>-1e-6&&1e-6>e?e+e*e/2:Math.exp(e)-1}},function(e,t){"use strict";e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}},function(e,t,r){"use strict";var n=r(2).getDesc,a=r(4),i=r(6),o=function(e,t){if(i(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=r(27)(Function.call,n(Object.prototype,"__proto__").set,2),a(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:a(e,r),e}}({},!1):void 0),check:o}},function(e,t,r){"use strict";var n=r(60),a=r(28);e.exports=function(e){return function(t,r){var i,o,s=String(a(t)),c=n(r),l=s.length;return 0>c||c>=l?e?"":void 0:(i=s.charCodeAt(c),55296>i||i>56319||c+1===l||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):i:e?s.slice(c,c+2):(i-55296<<10)+(o-56320)+65536)}}},function(e,t,r){"use strict";var n=r(125),a=r(28);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(a(e))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(10),i=n(a),o=React.createClass({displayName:"PromoNotification",getInitialState:function(){return{dismissed:!1}},dismiss:function(){this.setState({dismissed:!0}),this.props.onDismiss&&this.props.onDismiss()},render:function(){var e=this;return this.state.dismissed?null:React.createElement("div",{className:React.addons.classSet({"promo-notif":!0,"promo-notif--padded":this.props.padded})},this.props.children,React.createElement("div",{className:"promo-notif__close"},React.createElement("span",{className:"icon icon-cross",onClick:function(){e.dismiss(),i["default"].increment("promos.sms-alerts-notif.dismiss")}})))}});t["default"]=o,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(){if("main"===cryptowatch.integration){var e="true"===localStorage.getItem("triggered-sms-promo"),t="true"===localStorage.getItem("closed-sms-promo");e&&!t&&(localStorage.setItem("triggered-sms-promo","true"),h["default"].increment("promos.sms-alerts-notif.trigger"),cryptowatch.session&&cryptowatch.account.hasAccess.backendAlerts?cryptowatch.account.hasPhone||f.push(new l.SMSNumberInputPrompt):f.push(new l.SMSNumberSignupAd))}}function i(){if("main"===cryptowatch.integration&&cryptowatch.session){var e="true"===localStorage.getItem("closed-payment-prompt-"+cryptowatch.subscription.expires);if(!e){if(!cryptowatch.subscription.exists)return;if(cryptowatch.subscription.exists&&"card"===cryptowatch.subscription.paymentSource)return;var t=Math.round(cryptowatch.subscription.expires-(new Date).valueOf()/1e3),r=Math.ceil(t/86400);if(r>3)return;h["default"].increment("promos.subscription-expiring.render");var n=void 0;n=0>t?"has expired":1===r?"expires today":"expires in "+r+" days";var a=void 0,i=void 0;cryptowatch.subscription.freeTrial?(a="free trial",i="Set up payment"):(a="subscription",i="Make payment"),f.push(new u.SubscriptionExpiringAlert({timeRemaining:n,object:a,cta:i})),o.store.callAttentionNTimes(3,!1)}}}t.__esModule=!0,t.triggerSMSPromoBaby=a,t.triggerPaymentPrompt=i;var o=r(26),s=r(185),c=n(s),l=r(140),u=r(141),d=r(10),h=n(d),f=new c["default"];setTimeout(function(){a(),i()},1e3),o.store.registerSource(f),t["default"]=f},function(e,t){"use strict";t.__esModule=!0,t["default"]={animatedDashedCircle:function(e,t){return{draw:function(r){var n=this,a=1*Math.PI*r,i=t.pieces||8,o=2*Math.PI/(3*i),s=a,c=t.radius||20;this["do"](function(){for(var t=0;i>t;t++){var r=s-o;r%=2*Math.PI,s%=2*Math.PI,n.context.beginPath(),n.context.arc(e.x,e.y,c,s,r,!0),n.context.stroke(),n.context.closePath(),s+=3*o}},t)}.bind(this),cycle:3e3}}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(16),i=n(a),o=r(5),s=n(o),c=r(50),l=function(e,t,r,n){var a=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];a.padding=$.extend({top:0,bottom:0,left:0,right:0},a.padding),this.name=t,this.opts=a,this.unpaddedRange=n,this.domain=r,n=$.extend({top:0,bottom:0},n),this.range={top:n.top+a.padding.top,bottom:n.bottom-a.padding.bottom,left:n.left+a.padding.left,right:n.right-a.padding.right},this.range.top<0&&(this.range.top=e.height()+this.range.top),this.range.bottom<0&&(this.range.bottom=e.height()+this.range.bottom),e.fields[t]=this,this.x=d3.scale.linear().domain([r.left,r.right]).range([this.range.left,this.range.right]);var o=a.optIntoLogScale?i["default"].config.yAxis:"linear";this.scaleType=o,this.y=d3.scale[o]().domain([r.bottom,r.top]).range([this.range.bottom,this.range.top]),this.yUnpadded=d3.scale[o]().domain([r.bottom,r.top]).range([this.unpaddedRange.bottom,this.unpaddedRange.top]),this.xSharp=function(e){return this.x(e)+.5},this.ySharp=function(e){return Math.floor(this.y(e))+.5},this.snapScreenX=function(e){return this.x(s["default"].roundDownTo(this.x.invert(e),cryptowatch.periodInt))}.bind(this),this.includes={domain:{x:function(e){return e>=r.left&&e<=r.right},y:function(e){return e>=r.bottom&&e<=r.top}},range:{x:function(e){return e>=this.range.left&&e<=this.range.right},y:function(e){return e>=this.range.bottom&&e<=this.range.top}}},this.hoverarea=new c.Hoverarea(t,{type:"rect",left:this.unpaddedRange.left,right:this.unpaddedRange.right,top:this.unpaddedRange.top,bottom:this.unpaddedRange.bottom},{})};l.prototype.yInScale=function(e){return d3.scale[e]().range(this.y.range()).domain(this.y.domain())},l.withDefaults=function(e){var t={},r={},n=e._fullCandleWidth();t.left=e._timeBounds.start,t.right=e._timeBounds.end+cryptowatch.periodInt;var a=n-e._widthForIntervals()%n,i=-(a+n),o=(t.right-t.left)/cryptowatch.periodInt*n;return a===n&&(i=-n),function(e,n,a,s){var c=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];return r.left=i,r.right=s.right-s.left-o-i,c.padding=c.padding||{},void 0!==a.left&&void 0!==a.right||$.extend(a,t),void 0!==c.padding.left&&void 0!==c.padding.right||$.extend(c.padding,r),new l(e,n,a,s,c)}},l.prototype.width=function(){return Math.abs(this.range.left-this.range.right)},l.prototype.height=function(){return Math.abs(this.range.bottom-this.range.top)},l.prototype.tickSize=function(e){for(var t=this.domain.top-this.domain.bottom,r=this.height()/e,n=1e-8;;){if(!(t/10>n))break;n*=10}return r/2>t/n?n/=2:t/n>r/2&&(n*=2),n},l.prototype.withClipMask=function(e,t){e.context.save(),e.context.beginPath(),e.context.moveTo(this.unpaddedRange.left,this.unpaddedRange.top),e.context.lineTo(this.unpaddedRange.right,this.unpaddedRange.top),e.context.lineTo(this.unpaddedRange.right,this.unpaddedRange.bottom),e.context.lineTo(this.unpaddedRange.left,this.unpaddedRange.bottom),e.context.closePath(),e.context.clip(),t(),e.context.restore()},t["default"]=l,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(62),i=n(a),o=r(84),s=n(o),c=r(109),l=r(110),u=n(l),d=42,h=React.createClass({displayName:"Bookmark",render:function(){return React.createElement("a",{href:this.props.href,key:this.props.slug,className:React.addons.classSet({"bookmarked-ticker":!0,"bookmarked-ticker--below-cursor":this.props.belowCursor}),"data-slug":this.props.slug},React.createElement("table",null,React.createElement("tr",null,React.createElement("td",{className:"bookmarked-ticker-label"},React.createElement("span",{className:"bookmarked-ticker-label__exchange"},this.props.exchange),React.createElement("span",{className:"bookmarked-ticker-label__market"}," ",this.props.market)),React.createElement("td",{className:"bookmarked-ticker-price"},this.props.price?React.createElement(i["default"],{price:this.props.price,label:!1,icon:!0,colorize:!1,fiatPreference:this.props.fiatPreference}):"-"))))}});t.Bookmark=h,t["default"]=React.createClass({displayName:"Bookmarks",getInitialState:function(){return{}},getDefaultProps:function(){return{prices:{}}},onDragStart:function(e){e.preventDefault();var t=c.closest(e.target,"[data-slug]");if(t){var r=t.getAttribute("data-slug"),n=new u["default"](t,this.state.cursorTracking.state.pagePosn);this.setState({dragging:r,dragElement:n,cursorY:e.pageY})}else this.setState({dragging:void 0})},onDrag:function(e,t){e.preventDefault();var r=e.pageY,n=r-this.state.topOffset+this.refs.list.getDOMNode().scrollTop,a=Math.floor(n/d),i=this.getDOMNode().getBoundingClientRect(),o=e.pagePosn,s=o.x>=i.left&&o.x<i.right;this.state.dragElement&&this.state.dragElement.position(t.state.pagePosn),this.setState({cursorY:r,dropIndex:a,insideRect:s})},onDragStop:function(e){var t=this;if(e.preventDefault(),this.state.dragging){this.state.dragElement&&this.state.dragElement.destroy();var r=void 0,n=this.getDOMNode().getBoundingClientRect(),a=e.pagePosn;if(a.x<n.left||a.x>n.right||a.y<n.top||a.y>n.bottom)r=this.props.bookmarks.filter(function(e){return e!==t.state.dragging;
});else{var i=this.props.bookmarks.filter(function(e){return e!==t.state.dragging}),o=(this.props.bookmarks.indexOf(this.state.dragging),i.slice(0,this.state.dropIndex)),s=i.slice(this.state.dropIndex);r=o.concat([this.state.dragging]).concat(s)}this.setProps({bookmarks:r}),this.setState({dragging:void 0,dragElement:void 0,dropIndex:void 0,cursorY:0}),this.props.cache(),window.ga&&window.ga("send","event","tickers","modify")}},componentDidMount:function(){var e=this,t=this.getDOMNode(),r=new s["default"](this.getDOMNode(),{enableScrolling:!0});r.on("drag:start",function(t){e.onDragStart(t)}).on("drag",function(t){e.onDrag(t,e.state.cursorTracking)}).on("drag:stop",function(t){e.onDragStop(t)});var n=t.getBoundingClientRect().top+26;this.setState({cursorTracking:r,topOffset:n})},items:function f(){for(var f=[],e=-1,t=this.props.bookmarks,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if(n=t.next(),n.done)break;a=n.value}var i=a;if(i!==this.state.dragging){e++;var o=cryptowatch.marketBookmarks[i];if(o){var s=this.props.prices[i];f.push(React.createElement(h,{slug:i,exchange:o.exchange,market:o.market,href:o.href,price:s?s.price:null,fiatPreference:s?s.quote:null,direction:this.props.directions[i],belowCursor:this.state.insideRect&&e===this.state.dropIndex,key:"bookmark:"+i}))}}}return f},_showHelp:function(){this.setState({help:!0})},_hideHelp:function(){this.setState({help:!1})},render:function(){return React.createElement("div",null,React.createElement("div",{id:"bookmarked-tickers-header"},"Sticky Tickers",React.createElement("div",{id:"bookmarked-tickers-help",onMouseOver:this._showHelp,onMouseOut:this._hideHelp},"?")),React.createElement("div",{ref:"list",id:"bookmarked-tickers-list"},this.items()),this.state.help?React.createElement("div",{id:"bookmarked-tickers-help-overlay"},React.createElement("div",{id:"bookmarked-tickers-help-overlay-content"},React.createElement("p",null,"Drag tickers from navigation menu to stick"),React.createElement("p",null,"Drag out to unstick"),React.createElement("p",null,"Drag around to rearrange"))):void 0)}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(5),i=n(a);t["default"]=React.createClass({displayName:"Timestamp",_timeParts:function(e){var t=e.getHours(),r=i["default"].doubleDigits(e.getMinutes()),n=i["default"].doubleDigits(e.getSeconds());return{hour:t,minute:r,second:n}},_compareTimes:function(e,t){var r=e.hour!==t.hour,n=r||e.minute!==t.minute,a=r||n||e.second!==t.second;return{hourDifferent:r,minuteDifferent:n,secondDifferent:a}},render:function(){var e=this._timeParts(this.props.date),t=e.hour,r=e.minute,n=e.second,a=!1,i=!1,o=!1;if(this.props.diffAgainst){var s=this._timeParts(this.props.diffAgainst),c=this._compareTimes(e,s);a=c.hourDifferent,i=c.minuteDifferent,o=c.secondDifferent}return React.createElement("div",{className:"timestamp"},React.createElement("span",{className:React.addons.classSet({different:a})},t),":",React.createElement("span",{className:React.addons.classSet({different:i})},r),":",React.createElement("span",{className:React.addons.classSet({different:o})},n))}}),e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=React.createClass({displayName:"NumberInput",getInitialState:function(){return{value:this.props.defaultValue,formattedValue:this.props.formatter(this.props.defaultValue),hasBeenModified:!1,modifiedManually:!1}},componentDidUpdate:function(e,t){t.value!==this.state.value&&this.props.onChange&&this.props.onChange(this.state.value)},getDefaultProps:function(){return{formatter:function(e){return e},increment:1,incrementAlt:.1}},_onManualInput:function(){this.setState({modifiedManually:!0}),this.props.onManualChange&&this.props.onManualChange()},_onEdit:function(e){e.stopPropagation(),e.nativeEvent.stopPropagation();var t=e.nativeEvent.target.value,r=parseFloat(t);""===t&&(r=0),isNaN(r)||this.setState({value:r,formattedValue:t,hasBeenModified:!0,lastValidValue:r,lastValidFormattedValue:t})},_onFocus:function(){this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus()},_onBlur:function(e){var t=void 0,r=void 0,n=!1,a=!1;if(isNaN(this.state.value)?(t=this.props.defaultValue,r=this.props.formatter(this.props.defaultValue),a=n=!0):(t=this.state.value,r=this.props.formatter(this.state.value)),this.props.getRange){var i=this.props.getRange(),o=i.clip(t);o!==t&&(t=o,r=this.props.formatter(o),a=!0)}this.setState({focused:!1,value:t,formattedValue:r,hasBeenModified:n===!1}),n&&this.props.onChange&&this.props.onChange(this.props.defaultValue),this.props.onBlur&&this.props.onBlur(e)},set:function(e){var t=this.props.formatter(e);e===1/0&&(e=0,t="-"),this.setState({value:e,formattedValue:t,hasBeenModified:!0})},focus:function(){this.refs.input.getDOMNode().focus()},selectAll:function(){this.refs.input.getDOMNode().select()},_onKeydown:function(e){switch(e.stopPropagation(),e.which){case 38:e.altKey?this.set(this.state.value+this.props.incrementAlt):this.set(this.state.value+this.props.increment);break;case 40:e.altKey?this.set(this.state.value-this.props.incrementAlt):this.set(this.state.value-this.props.increment)}},render:function(){return React.createElement("input",{ref:"input",type:"text",className:this.props.className,id:this.props.id,value:this.state.formattedValue,onChange:this._onEdit,onKeyPress:this._onManualInput,onKeyUp:function(e){e.stopPropagation()},onFocus:this._onFocus,onBlur:this._onBlur,onKeyDown:this._onKeydown})}}),e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=React.createClass({displayName:"RangeInput",getInitialState:function(){return{value:this.props.defaultValue}},_onChange:function(e){var t=parseFloat(e.nativeEvent.target.value);t=parseFloat(t.toFixed(2)),this.setState({value:t}),this.props.onChange(t)},render:function(){return React.createElement("input",{type:"range",min:"0.00",max:"1",step:"0.01",value:this.state.value,onChange:this._onChange})}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(11),i=n(a),o=r(52),s=r(37),c=r(5);n(c);t["default"]=React.createClass({displayName:"OrderInfo",render:function(){var e=void 0,t=i["default"].fmt(this.props.order.price,cryptowatch.currencyPair.quote,{label:!0,currentExchangePrecision:!0});return e=this.props.order.type===s.ORDER_TYPES.MARKET?React.createElement("span",null,"Market ",React.createElement("br",null),React.createElement("weak",null,"(VWA ",t,")")):React.createElement("span",null,t),React.createElement("table",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("weak",null,"Type")),React.createElement("td",null,React.createElement("strong",null,o.orderTypeNames[this.props.order.type]))),React.createElement("tr",null,React.createElement("td",{width:"60"},React.createElement("weak",null,"Amount")),React.createElement("td",null,React.createElement("strong",null,i["default"].fmtAmount(this.props.order.amount,{label:!1,currentExchangePrecision:!0})),React.createElement("weak",null," ",cryptowatch.currencyPair.base))),React.createElement("tr",null,React.createElement("td",null,React.createElement("weak",null,"Price")),React.createElement("td",null,React.createElement("strong",null,e))),React.createElement("tr",null,React.createElement("td",null,React.createElement("weak",null,"Total")),React.createElement("td",null,React.createElement("strong",null,i["default"].fmt(this.props.order.total(),cryptowatch.currencyPair.quote,{label:!0,currentExchangePrecision:!0})))))}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){this.posn1=e,this.posn1.id=1,this.posn2=void 0;var t=v["default"].config.drawing.extrapolate;this._extrapolate={1:t,2:t},this._previewExtrapolate={1:!1,2:!1},this.stage=1,this.done=!1}function i(e){this.posn1=e,this.posn2=void 0,this.stage=1,this.done=!1}function o(e){this.posn1=e,this.posn2=void 0,this.stage=1,this.done=!1}function s(e){this.posn1=e,this.posn2=void 0,this.stage=1,this.done=!1}function c(e){this.posn1=e,this.posn2=void 0,this.stage=1,this.done=!1}function l(e){this.posn1=e,this.posn2=void 0,this.stage=1,this.done=!1}function u(e){var t=R[e.type];return t.fromJSON(e)}function d(){return cryptowatch.chart.canvas.fields[this.field]}t.__esModule=!0;var h=r(50),f=r(5),p=n(f),g=r(16),v=n(g),m=r(11),y=(n(m),r(20)),w=n(y),x=r(63),b=n(x),_=r(65),S=r(17),k=n(S),C=r(169),T=n(C),E=r(170),P=n(E),A=r(171),M=n(A),R={line:a,fibonnaciRetracement:i,fibonnaciFan:o,fibonnaciArc:s,circle:l,arrow:c,freeline:T["default"],horizontalLine:P["default"],verticalLine:M["default"]},O=cryptowatch.drawing={elements:[],initialize:function(){this.load(),O.$clearButton=$("#clear-drawing-button"),O.$clearButton.click(function(){O.clear()}),O.refreshClearButton()},pending:void 0,clear:function(){O.elements=[],O.refresh(),O.persist()},refresh:function(){cryptowatch.chart.canvas.layers.drawing.clear();var e=O.elements.slice(0);O.pending&&e.push(O.pending),e.forEach(function(e,t){e.field=e.field||"price",void 0!==e.getField()&&e.getField().withClipMask(cryptowatch.chart.canvas.layers.drawing,function(r){e.draw(cryptowatch.chart);var n=cryptowatch.chart.tool;e.posns().forEach(function(r,i){if(r){"extrapolator"===n?e.constructor===a&&(O.posnHovered===r?cryptowatch.chart.canvas.layers.drawing.drawCircle(O.domainPosnToScreenPosn(r,{field:e.getField()}),5,k["default"].theme.text.toString(),k["default"].theme.bg,{strokeAlpha:1}):cryptowatch.chart.canvas.layers.drawing.drawCircle(O.domainPosnToScreenPosn(r,{field:e.getField()}),3,k["default"].theme.text.toString(),k["default"].theme.bg,{strokeAlpha:1})):"crosshair"!==n&&cryptowatch.chart.canvas.layers.drawing.drawCircle(O.domainPosnToScreenPosn(r,{field:e.getField()}),3,k["default"].theme.text.toString(),k["default"].theme.bg);var o="drawing-posn:"+t+":"+i,s=["crosshair"];e.constructor!==a&&s.push("extrapolator");var c=new h.Hoverarea(o,{type:"circle",center:O.domainPosnToScreenPosn(r,{field:e.getField()}),radius:8},{cursor:function(){return"extrapolator"===cryptowatch.chart.tool?"pointer":"move"},incompatibleTools:s,callbacks:{hover:function(){return O.pending?!1:(O.elemHovered=e,O.posnHovered=r,e.constructor===a&&"extrapolator"===cryptowatch.chart.tool&&(e._previewExtrapolate[r.id]=!0),void O.refresh())},leave:function(){delete O.elemHovered,delete O.posnHovered,e.constructor===a&&(e._previewExtrapolate[r.id]=!1),O.refresh()},click:function(){e.constructor===a&&"extrapolator"===cryptowatch.chart.tool&&(e._extrapolate[r.id]=!e._extrapolate[r.id]),O.refresh(),O.persist()},active:function(){},inactive:function(){},drag:function(t){if("extrapolator"!==cryptowatch.chart.tool){var n=O.screenPosnToDomainPosn(t,{field:e.getField()});r.x=n.x,r.y=n.y,cryptowatch.chart.canvas.layers.drawing.resetHoverareas(),O.elemHovered.recalculateAfterUpdate&&O.elemHovered.recalculateAfterUpdate(),O.persist(),O.refresh()}}}});cryptowatch.chart.canvas.layers.drawing.registerHoverarea(c)}})})})},elementPosns:function(){return O.elements.reduce(function(e,t){return e.concat(t.posns().map(function(e){return O.domainPosnToScreenPosn(e,t.getField(),!1)}))},[])},shouldSnap:function(){if("verticalLine"===cryptowatch.chart.tool)return!0;var e=v["default"].config.drawing.snap;return b["default"].modifiers.alt&&(e=!e),e},getPosn:function(){return this.shouldSnap()?this.cursor.state.snappedPosn||this.cursor.state.posn:this.cursor.state.posn},advance:function(){var e=O.pending?O.pending.getField():cryptowatch.chart.canvas.cursor.state.activeField;"priceConverted"===e.name&&(e=cryptowatch.chart.canvas.fields.price);var t=O.getPosn(),r=O.screenPosnToDomainPosn(t,{field:e});if(void 0!==O.pending)O.pending.advance(r),O.pending.done?O.end():O.refresh();else{switch(cryptowatch.chart.tool){case"line":O.pending=new a(r);break;case"fibonnaciRetracement":O.pending=new i(r);break;case"fibonnaciFan":O.pending=new o(r);break;case"fibonnaciArc":O.pending=new s(r);break;case"circle":O.pending=new l(r);break;case"arrow":O.pending=new c(r);break;case"horizontalLine":O.pending=new P["default"](r);break;case"verticalLine":O.pending=new M["default"](r);break;case"freeline":O.pending=new T["default"]([r])}O.pending.field=e.name,O.pending.log="log"===v["default"].config.yAxis,O.pending.done&&O.end()}},end:function(){O.elements.push(O.pending),O.persist(),_.trackEvent("drawing","add",cryptowatch.chart.tool),delete O.pending,O.refresh()},handleMousemove:function(){O.pending&&(O.pending.constructor===T["default"]?O.advance():O.refresh())},handleClick:function(e){O.pending&&O.pending.constructor===T["default"]?O.end():O.advance()},toJSON:function(){return O.elements.map(function(e){return e.toJSON()})},fromJSON:function(e){var e=JSON.parse(e);return e.field=e.field||"price",e.map(u)},key:function(){return["drawing",cryptowatch.exchange.slug,cryptowatch.pair].join(":")},persist:function(){localStorage.setItem(O.key(),JSON.stringify(O.toJSON())),O.refreshClearButton()},refreshClearButton:function(){0===O.elements.length?O.$clearButton.hide():O.$clearButton.show()},load:function(){var e=localStorage.getItem(O.key());e&&(O.elements=[],O.elements=O.fromJSON(e)),O.refresh()},domainPosnToScreenPosn:function(e,t){var r=t.field||cryptowatch.chart.canvas.fields.price,n=void 0;n=void 0!==t.log?r.yInScale(t.log?"log":"linear"):r.y;var a=n(e.y);return e=e.clone(),t.sharp&&(a=p["default"].sharpen(a)),new w["default"](r.x(e.x),a)},screenPosnToDomainPosn:function(e,t){var r=t.field||cryptowatch.chart.canvas.fields.price,n=void 0;return n=void 0!==t.log?r.yInScale(t.log?"log":"linear"):r.y,new w["default"](r.x.invert(e.x),n.invert(e.y))},pointsForLine:function(e,t,r){var n,a,i=[];r.field=r.field||cryptowatch.chart.canvas.fields.price;var o=O.domainPosnToScreenPosn(e,{field:r.field}),s=O.domainPosnToScreenPosn(t,{field:r.field});if(r.log==("log"===v["default"].config.yAxis)||"price"!==r.field.name){if(r.overshoot){(o.y-s.y)/(s.x-o.x);return[o,{x:o.x+(s.x-o.x)*r.overshoot,y:o.y+(s.y-o.y)*r.overshoot}]}return[o,s]}a=Math.sqrt(Math.pow(s.x-o.x,2)+Math.pow(s.y-o.y,2));var c=Math.round(a/5);n=r.log?d3.scale.log().base(10).domain(r.field.y.domain()).range([0,100]):d3.scale.linear().domain(r.field.y.domain()).range([0,100]);var l=n(e.y),u=n(t.y),d=c+1+(r.overshoot||0)*c;return d3.range(d).forEach(function(a){var o=a/c,s=e.x+(t.x-e.x)*o,d=l+(u-l)*o,h=n.invert(d);i.push(O.domainPosnToScreenPosn(new w["default"](s,h),{field:r.field}))}),i},rotatePosn:function(e,t,r){if(e.x==t.x&&e.y==t.y)return e;r*=Math.PI/180;var n=e.x-t.x,a=e.y-t.y,i=n*Math.cos(r)-a*Math.sin(r),o=n*Math.sin(r)+a*Math.cos(r);return{x:i+t.x,y:o+t.y}},removeElemHovered:function(){O.elements=O.elements.filter(function(e){return e!==O.elemHovered}),O.refresh(),O.persist()},cancelPending:function(){delete O.pending,O.refresh()},pop:function(){O.pending?O.cancelPending():(O.elements.pop(),O.refresh(),O.persist())}};a.prototype.shouldExtrapolate=function(e){return this._extrapolate[e]||this._previewExtrapolate[e]},a.prototype.draw=function(e){var t,r;switch(this.stage){case 0:return;case 1:t=this.posn1.clone(),r=O.screenPosnToDomainPosn(O.getPosn(),{field:this.getField()}).clone();break;case 2:t=this.posn1.clone(),r=this.posn2.clone()}"price"===this.field&&(t=O.domainPosnToScreenPosn(t,{field:this.getField(),log:this.log}),r=O.domainPosnToScreenPosn(r,{field:this.getField(),log:this.log}));var n=t.distanceFrom(r),a=1.5*window.innerWidth/n,i=(r.x-t.x)*a,o=(r.y-t.y)/(r.x-t.x);this.shouldExtrapolate(2)&&(r.x+=i,r.y+=o*i),this.shouldExtrapolate(1)&&(t.x-=i,t.y-=o*i),"price"===this.field&&(t=O.screenPosnToDomainPosn(t,{log:this.log}),r=O.screenPosnToDomainPosn(r,{log:this.log})),e.canvas.layers.drawing.drawLine(O.pointsForLine(t,r,{log:this.log,field:this.getField()}),function(e){return e},k["default"].theme.text.toString())},a.prototype.posns=function(){return[this.posn1,this.posn2]},a.prototype.advance=function(e){switch(this.stage){case 0:this.posn1=e,this.posn1.id=1,this.stage=1;break;case 1:this.posn2=e,this.posn2.id=2,this.stage=2,this.done=!0}},a.fromJSON=function(e){var t=new a(e.posn1);return t.posn1=w["default"].fromJSON(e.posn1),t.posn2=w["default"].fromJSON(e.posn2),t.field=e.field,t._extrapolate=e._extrapolate||{1:!1,2:!1},t.done=!0,t.log=e.log,t.stage=2,t},i.prototype.posns=function(){return[this.posn1,this.posn2]},i.prototype.draw=function(e){var t,r;switch(this.stage){case 0:return;case 1:t=this.posn1,r=O.screenPosnToDomainPosn(O.getPosn(),{field:this.getField()});break;case 2:t=this.posn1,r=this.posn2}var n=[0,.236,.382,.5,.618,.786,1,1.272,1.618];n.forEach(function(n){var a;a=r.y-(r.y-t.y)*n;var i=O.domainPosnToScreenPosn(new w["default"](t.x,a),{field:this.getField(),sharp:!0}),o=O.domainPosnToScreenPosn(new w["default"](r.x,a),{field:this.getField(),sharp:!0}),s=Math.max(o.x,i.x);e.canvas.layers.drawing.drawLineSegment(i,o),e.canvas.layers.drawing.drawText({x:s+18,y:o.y},p["default"].percentageAsString(n)+"  "+cryptowatch.currency.fmt(a,void 0,{label:!1}),k["default"].theme.text.toString())}.bind(this))},i.prototype.advance=function(e){switch(this.stage){case 0:this.posn1=e,this.stage=1;break;case 1:this.posn2=e,this.stage=2,this.done=!0}},i.fromJSON=function(e){var t=new i;return t.posn1=w["default"].fromJSON(e.posn1),t.posn2=w["default"].fromJSON(e.posn2),t.field=e.field,t.done=!0,t.stage=2,t},o.prototype.posns=function(){return[this.posn1,this.posn2]},o.prototype._calculateIntersectionPoints=function(){var e,t;switch(this.stage){case 0:return;case 1:e=this.posn1,t=O.screenPosnToDomainPosn(O.getPosn(),{field:this.getField()});break;case 2:e=this.posn1,t=this.posn2}this._interPoints={};var r=[,.382,.5,.618];r.forEach(function(r){var n=O.domainPosnToScreenPosn(e,{field:this.getField()}),a=O.domainPosnToScreenPosn(t,{field:this.getField()}),i=new w["default"](a.x,a.y+(n.y-a.y)*r);this._interPoints[r]=O.screenPosnToDomainPosn(i,{field:this.getField()})}.bind(this))},o.prototype.recalculateAfterUpdate=function(){this._calculateIntersectionPoints()},o.prototype.draw=function(e){var t,r;switch(this.stage){case 0:return;case 1:t=this.posn1,r=O.screenPosnToDomainPosn(O.getPosn(),{field:this.getField()}),this._calculateIntersectionPoints();break;case 2:t=this.posn1,r=this.posn2}var n,a;t.y<r.y?(n=r,a=t):(n=t,a=r),e.canvas.layers.drawing.drawLine(O.pointsForLine(t,r,{log:this.log,field:this.getField()}),function(e){return e},k["default"].theme.text.toString());var i=this.getField();e.canvas.layers.drawing.drawLineSegment({x:i.x(t.x),y:i.ySharp(t.y)},{x:i.x(r.x),y:i.ySharp(t.y)},{color:k["default"].theme.guide.toString()}),e.canvas.layers.drawing.drawLineSegment({x:i.xSharp(r.x),y:i.y(t.y)},{x:i.xSharp(r.x),y:i.y(r.y)},{color:k["default"].theme.guide.toString()});for(var o in this._interPoints){o=parseFloat(o);var s=this._interPoints[o];e.canvas.layers.drawing.drawLine(O.pointsForLine(t,s,{log:this.log,overshoot:10,field:this.getField()}),function(e){return e},k["default"].theme.text.toString())}},o.prototype.advance=function(e){switch(this.stage){case 0:this.posn1=e,this.stage=1;break;case 1:this.posn2=e,this.stage=2,this.done=!0}},o.prototype.toJSON=function(e){return{type:"fibonnaciFan",posn1:this.posn1,posn2:this.posn2,field:this.field,log:this.log}},o.fromJSON=function(e){var t=new o;return t.posn1=w["default"].fromJSON(e.posn1),t.posn2=w["default"].fromJSON(e.posn2),t.field=e.field,t.log=e.log,t.done=!0,t.stage=2,t._calculateIntersectionPoints(),t},s.prototype.posns=function(){return[this.posn1,this.posn2]},s.prototype.draw=function(e){var t,r;switch(this.stage){case 0:return;case 1:t=this.posn1,r=O.screenPosnToDomainPosn(O.getPosn(),{field:this.getField()});break;case 2:t=this.posn1,r=this.posn2}var n=O.domainPosnToScreenPosn(t,{field:this.getField()}),a=O.domainPosnToScreenPosn(r,{field:this.getField()});e.canvas.layers.drawing.drawLine(O.pointsForLine(t,r,{log:this.log,field:this.getField()}),function(e){return e},k["default"].theme.text.toString());var i=[,.382,.5,.618];i.forEach(function(t){var r=new w["default"](n.x+(a.x-n.x)*t,n.y+(a.y-n.y)*t),i=Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2)),o=e.canvas.layers.drawing.context;o.beginPath(),o.strokeStyle=k["default"].theme.text.toString(),a.y>n.y?o.arc(n.x,n.y,i,-Math.PI,0,!0):o.arc(n.x,n.y,i,0,Math.PI,!0),o.stroke(),o.closePath()})},s.prototype.advance=function(e){switch(this.stage){case 0:this.posn1=e,this.stage=1;break;case 1:this.posn2=e,this.stage=2,this.done=!0}},s.fromJSON=function(e){var t=new s;return t.posn1=w["default"].fromJSON(e.posn1),t.posn2=w["default"].fromJSON(e.posn2),t.field=e.field,t.log=e.log,t.done=!0,t.stage=2,t},c.prototype.draw=function(e){var t,r=this.posn1;switch(this.stage){case 0:return;case 1:t=O.screenPosnToDomainPosn(O.getPosn(),{field:this.getField()});break;case 2:t=this.posn2}var n=O.domainPosnToScreenPosn(t,{field:this.getField(),sharp:!0}),a=O.domainPosnToScreenPosn(r,{field:this.getField(),sharp:!0}),i=O.pointsForLine(r,t,{log:this.log,field:this.getField()});e.canvas.layers.drawing.drawLine(i,function(e){return e},k["default"].theme.text.toString());var o=10,s=(a.y-n.y)/(n.x-a.x),c=(Math.atan(s)/(Math.PI/180),Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2))),l={x:n.x-(n.x-a.x)*(o/c),y:n.y-(n.y-a.y)*(o/c)},u=cryptowatch.drawing.rotatePosn(l,n,22),d=cryptowatch.drawing.rotatePosn(l,n,-22);e.canvas.layers.drawing.context.fillStyle=k["default"].theme.text.toString(),e.canvas.layers.drawing.context.beginPath(),e.canvas.layers.drawing.context.moveTo(n.x,n.y),e.canvas.layers.drawing.context.lineTo(u.x,u.y),e.canvas.layers.drawing.context.lineTo(d.x,d.y),e.canvas.layers.drawing.context.fill(),e.canvas.layers.drawing.context.closePath()},c.prototype.posns=function(){return[this.posn1,this.posn2]},c.prototype.advance=function(e){switch(this.stage){case 0:this.posn1=e,this.stage=1;break;case 1:this.posn2=e,this.stage=2,this.done=!0}},c.fromJSON=function(e){var t=new c;return t.posn1=w["default"].fromJSON(e.posn1),t.posn2=w["default"].fromJSON(e.posn2),t.field=e.field,t.done=!0,t.stage=2,t},l.prototype.posns=function(){return[this.posn1,this.posn2]},l.prototype.draw=function(e){var t,r;switch(this.stage){case 0:return;case 1:t=O.domainPosnToScreenPosn(this.posn1,{field:this.getField(),sharp:!0}),r=O.getPosn();break;case 2:t=O.domainPosnToScreenPosn(this.posn1,{field:this.getField(),sharp:!0}),r=O.domainPosnToScreenPosn(this.posn2,{field:this.getField(),sharp:!0})}var n=Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));e.canvas.layers.drawing.drawCircle(O.domainPosnToScreenPosn(this.posn1,{field:this.getField(),sharp:!0}),n,k["default"].theme.text.toString(),void 0)},l.prototype.advance=function(e){switch(this.stage){case 0:this.posn1=e,this.stage=1;break;case 1:this.posn2=e,this.stage=2,this.done=!0}},l.fromJSON=function(e){var t=new l;return t.posn1=w["default"].fromJSON(e.posn1),t.posn2=w["default"].fromJSON(e.posn2),t.field=e.field,t.done=!0,t.stage=2,t};var I=function(e){return function(){var t={};for(var r in this)t[r]=this[r];return t.type=e,t}};for(var D in R)if("freeline"!==D){var N=R[D];void 0===N.prototype.toJSON&&(N.prototype.toJSON=I(D))}for(var D in R)"freeline"!==D&&(R[D].prototype.getField=d);window.addEventListener("shake",function(){if(O.elements.length>0){var e=confirm("Clear the drawing?");e&&(O.elements=[],O.refresh())}},!1),t["default"]=O,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(20),i=n(a);t["default"]={domainPosnToScreenPosn:function(e,t){var r=t.field||cryptowatch.chart.canvas.fields.price,n=void 0;n=void 0!==t.log?r.yInScale(t.log?"log":"linear"):r.y;var a=n(e.y);return e=e.clone(),t.sharp&&(a=mathUtils.sharpen(a)),new i["default"](r.x(e.x),a)},screenPosnToDomainPosn:function(e,t){var r=t.field||cryptowatch.chart.canvas.fields.price,n=void 0;return n=void 0!==t.log?r.yInScale(t.log?"log":"linear"):r.y,new i["default"](r.x.invert(e.x),n.invert(e.y))}},e.exports=t["default"]},function(e,t){"use strict";function r(e,t){for(var r=!0;r;){var n=e,a=t;r=!1;var i=void 0;if(void 0!==n.matches)i="matches";else{if(void 0===n.matchesSelector)throw new Error("Cannot check a selector against node");i="matchesSelector"}if(n[i](a))return n;{if(!n.parentElement)return null;e=n.parentElement,t=a,r=!0,i=void 0}}}t.__esModule=!0,t.closest=r},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=document.getElementById("cursor-drag-element"),a=function(){function e(t,a,i){if(r(this,e),this.$node=$(t).clone(),this.$node.addClass("drag-element-clone"),i)this.offset=i;else{var o=t.getBoundingClientRect();this.offset={x:a.x-o.left,y:a.y-o.top}}n.innerHTML="",n.appendChild(this.$node[0])}return e.prototype.position=function(e){this.$node.css({position:"absolute",left:e.x-this.offset.x,top:e.y-this.offset.y})},e.prototype.destroy=function(){n.innerHTML="",delete this.$node},e}();t["default"]=a,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(41),i=n(a),o=r(5),s=n(o),c=60*(new Date).getTimezoneOffset();t["default"]={calculateSize:function(e,t,r){for(var n=0;t.length/e[n]>r&&n!==e.length-1;)n++;return e[n]},calculateTimeTicks:function(e,t,r){var n,a=[],o=this.calculateSize(e,t,r);if(o<l["1_WEEK"])for(var u=s["default"].roundDownTo(t.min-t.length,o)+c-o-86400,d=t.max+t.length,h=u;d>=h;h+=o){var f=void 0,p=new Date(1e3*h);f=0===p.getHours()&&0===p.getMinutes()?i["default"].printMonthAndDate(p):i["default"].printTime(p),a.push({unix:h,print:f})}else{var g=new Date(1e3*t.min),d=(new Date(1e3*(t.max+t.length)),t.max+t.length),v=void 0,u=void 0,m=void 0;switch(o){case l["1_WEEK"]:case l["2_WEEK"]:var y=i["default"].dateAtMidnight(g);v=new Date(y.valueOf()-60*y.getDay()*60*24*1e3),v=i["default"].dateAtMidnight(v),u=v.valueOf()/1e3;for(var h=u;d>h;h+=o){var w=new Date(1e3*h);23===w.getHours()?w=new Date(1e3*h+36e5):1===w.getHours()&&(w=new Date(1e3*h-36e5));var x=i["default"].printMonthAndDate(w);a.push({unix:h,print:x})}break;case l["1_MONTH"]:case l["3_MONTH"]:case l["6_MONTH"]:var b=(n={},n[l["1_MONTH"]+""]=1,n[l["3_MONTH"]+""]=3,n[l["6_MONTH"]+""]=6,n)[o+""],_=g.getMonth();for(_=s["default"].roundDownTo(_,o),v=new Date(g.getYear()+1900,_,1,0,0,0,0),m=v;m.valueOf()/1e3<d;){var h=m.valueOf()/1e3,S=void 0;S=0===m.getMonth()?m.getYear()+1900+"":i["default"].printMonth(m),a.push({unix:h,print:S}),m=11===m.getMonth()?new Date(m.getYear()+1900+1,0,1,0,0,0,0):new Date(m.getYear()+1900,m.getMonth()+b,1,0,0,0,0)}break;case l["1_YEAR"]:for(v=new Date(g.getYear()+1900,0,1,0,0,0,0),m=v;m.valueOf()/1e3<d;){var h=m.valueOf()/1e3,k=m.getYear()+1900+"";a.push({unix:h,print:k}),m=new Date(m.getYear()+1900+1,0,1,0,0,0,0)}}}return a}};var l={"5_MINUTE":300,"15_MINUTE":900,"30_MINUTE":1800,"1_HOUR":3600,"6_HOUR":21600,"12_HOUR":43200,"1_DAY":86400,"3_DAY":259200,"1_WEEK":604800,"2_WEEK":1209600,"1_MONTH":2592e3,"3_MONTH":7776e3,"6_MONTH":15552e3,"1_YEAR":31536e3};t.TIME_TICK_OPTIONS=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var o=r(113),s=n(o),c=function(e){function t(r){a(this,t),e.call(this,r),this.side=r.side}return i(t,e),t}(s["default"]);t["default"]=c,e.exports=t["default"]},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function a(e){r(this,a),this.price=e.price,this.amount=e.amount,this.timestamp=e.timestamp};t["default"]=n,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]={handleUpdate:function(){var e=this;cryptowatch.chart._blurred?this._refresh():window.onblur=function(){e._refresh()}},_refresh:function(){cryptowatch.chart.cachePosition(),window.location=window.location}},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(24),a=r(19),i=r(59);e.exports=function(e){return function(t,r,o){var s,c=n(t),l=a(c.length),u=i(o,l);if(e&&r!=r){for(;l>u;)if(s=c[u++],s!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===r)return e||u;return!e&&-1}}},function(e,t,r){"use strict";var n=r(2),a=r(29),i=r(73),o=r(27),s=r(75),c=r(28),l=r(56),u=r(90),d=r(128),h=r(44)("id"),f=r(18),p=r(4),g=r(74),v=r(21),m=Object.isExtensible||p,y=v?"_s":"size",w=0,x=function(e,t){if(!p(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!f(e,h)){if(!m(e))return"F";if(!t)return"E";a(e,h,++w)}return"O"+e[h]},b=function(e,t){var r,n=x(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,a){var u=e(function(e,i){s(e,u,t),e._i=n.create(null),e._f=void 0,e._l=void 0,e[y]=0,void 0!=i&&l(i,r,e[a],e)});return i(u.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[y]=0},"delete":function(e){var t=this,r=b(t,e);if(r){var n=r.n,a=r.p;delete t._i[r.i],r.r=!0,a&&(a.n=n),n&&(n.p=a),t._f==r&&(t._f=n),t._l==r&&(t._l=a),t[y]--}return!!r},forEach:function(e){for(var t,r=o(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!b(this,e)}}),v&&n.setDesc(u.prototype,"size",{get:function(){return c(this[y])}}),u},def:function(e,t,r){var n,a,i=b(e,t);return i?i.v=r:(e._l=i={i:a=x(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[y]++,"F"!==a&&(e._i[a]=i)),e},getEntry:b,setStrong:function(e,t,r){u(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?d(0,r.k):"values"==t?d(0,r.v):d(0,[r.k,r.v]):(e._t=void 0,d(1))},r?"entries":"values",!r,!0),g(t)}}},function(e,t,r){"use strict";var n=r(56),a=r(68);e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+"#toJSON isn't generic");var t=[];return n(this,!1,t.push,t),t}}},function(e,t,r){"use strict";var n=r(29),a=r(73),i=r(6),o=r(4),s=r(75),c=r(56),l=r(67),u=r(18),d=r(44)("weak"),h=Object.isExtensible||o,f=l(5),p=l(6),g=0,v=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},y=function(e,t){return f(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=y(this,e);return t?t[1]:void 0},has:function(e){return!!y(this,e)},set:function(e,t){var r=y(this,e);r?r[1]=t:this.a.push([e,t])},"delete":function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var i=e(function(e,a){s(e,i,t),e._i=g++,e._l=void 0,void 0!=a&&c(a,r,e[n],e)});return a(i.prototype,{"delete":function(e){return o(e)?h(e)?u(e,d)&&u(e[d],this._i)&&delete e[d][this._i]:v(this)["delete"](e):!1},has:function(e){return o(e)?h(e)?u(e,d)&&u(e[d],this._i):v(this).has(e):!1}}),i},def:function(e,t,r){return h(i(t))?(u(t,d)||n(t,d,{}),t[d][e._i]=r):v(e).set(t,r),e},frozenStore:v,WEAK:d}},function(e,t,r){"use strict";var n=r(4),a=r(9).document,i=n(a)&&n(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},function(e,t,r){"use strict";var n=r(6);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){"use strict";var n=r(24),a=r(2).getNames,i={}.toString,o="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return a(e)}catch(t){return o.slice()}};e.exports.get=function(e){return o&&"[object Window]"==i.call(e)?s(e):a(n(e));
}},function(e,t,r){"use strict";e.exports=r(9).document&&document.documentElement},function(e,t,r){"use strict";var n=r(57),a=r(7)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[a]===e)}},function(e,t,r){"use strict";var n=r(4),a=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&a(e)===e}},function(e,t,r){"use strict";var n=r(4),a=r(32),i=r(7)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},function(e,t,r){"use strict";var n=r(6);e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(i){var o=e["return"];throw void 0!==o&&n(o.call(e)),i}}},function(e,t,r){"use strict";var n=r(2),a=r(38),i=r(58),o={};r(29)(o,r(7)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n.create(o,{next:a(1,r)}),i(e,t+" Iterator")}},function(e,t){"use strict";e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){"use strict";e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&1e-8>e?e-e*e/2:Math.log(1+e)}},function(e,t,r){"use strict";var n=r(2),a=r(24),i=n.isEnum;e.exports=function(e){return function(t){for(var r,o=a(t),s=n.getKeys(o),c=s.length,l=0,u=[];c>l;)i.call(o,r=s[l++])&&u.push(e?[r,o[r]]:o[r]);return u}}},function(e,t,r){"use strict";var n=r(2),a=r(6),i=r(9).Reflect;e.exports=i&&i.ownKeys||function(e){var t=n.getNames(a(e)),r=n.getSymbols;return r?t.concat(r(e)):t}},function(e,t){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,r){"use strict";var n=r(9),a="__core-js_shared__",i=n[a]||(n[a]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,r){"use strict";var n=r(19),a=r(135),i=r(28);e.exports=function(e,t,r,o){var s=String(i(e)),c=s.length,l=void 0===r?" ":String(r),u=n(t);if(c>=u)return s;""==l&&(l=" ");var d=u-c,h=a.call(l,Math.ceil(d/l.length));return h.length>d&&(h=h.slice(0,d)),o?h+s:s+h}},function(e,t,r){"use strict";var n=r(60),a=r(28);e.exports=function(e){var t=String(a(this)),r="",i=n(e);if(0>i||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r}},function(e,t,r){"use strict";var n,a,i,o=r(27),s=r(71),c=r(122),l=r(119),u=r(9),d=u.process,h=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,g=0,v={},m="onreadystatechange",y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},w=function(e){y.call(e.data)};h&&f||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return v[++g]=function(){s("function"==typeof e?e:Function(e),t)},n(g),g},f=function(e){delete v[e]},"process"==r(32)(d)?n=function(e){d.nextTick(o(y,e,1))}:p?(a=new p,i=a.port2,a.port1.onmessage=w,n=o(i.postMessage,i,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(e){u.postMessage(e+"","*")},u.addEventListener("message",w,!1)):n=m in l("script")?function(e){c.appendChild(l("script"))[m]=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:h,clear:f}},function(e,t,r){"use strict";var n=r(68),a=r(7)("iterator"),i=r(57);e.exports=r(33).getIteratorMethod=function(e){return void 0!=e?e[a]||e["@@iterator"]||i[n(e)]:void 0}},function(e,t,r){"use strict";var n=r(43),a=r(128),i=r(57),o=r(24);e.exports=r(90)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,a(1)):"keys"==t?a(0,r):"values"==t?a(0,e[r]):a(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";function n(e,t,r){var n=t&&r||0,a=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>a&&(t[n+a++]=l[e])});16>a;)t[n+a++]=0;return t}function a(e,t){var r=t||0,n=c;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}function i(e,t,r){var n=t&&r||0,i=t||[];e=e||{};var o=void 0!==e.clockseq?e.clockseq:f,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:g+1,l=s-p+(c-g)/1e4;if(0>l&&void 0===e.clockseq&&(o=o+1&16383),(0>l||s>p)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=s,g=c,f=o,s+=122192928e5;var u=(1e4*(268435455&s)+c)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=255&u;var d=s/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(var v=e.node||h,m=0;6>m;m++)i[n+m]=v[m];return t?t:a(i)}function o(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;16>o;o++)t[n+o]=i[o];return t||a(i)}for(var s=r(313),c=[],l={},u=0;256>u;u++)c[u]=(u+256).toString(16).substr(1),l[c[u]]=u;var d=s(),h=[1|d[0],d[1],d[2],d[3],d[4],d[5]],f=16383&(d[6]<<8|d[7]),p=0,g=0,v=o;v.v1=i,v.v4=o,v.parse=n,v.unparse=a,e.exports=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var o=r(26),s=r(3),c=n(s),l=r(10),u=n(l),d=r(98),h=n(d),f=React.createClass({displayName:"PhoneNumberForm",getInitialState:function(){return{screen:"form",inNetworkCall:!1}},dismiss:function(){this.props.onDismiss&&this.props.onDismiss(),localStorage.setItem("closed-sms-promo","true")},handleSubmit:function(e){var t=this;e.preventDefault();var r=this.refs.phoneNumber.getDOMNode().value;this.setState({inNetworkCall:!0}),c["default"].post("/account/add-phone-number").type("form").accept("json").send({"phone-number":r}).end(function(e,r){var n=JSON.parse(r.text);switch(t.setState({inNetworkCall:!1}),r.status){case 200:t.setState({screen:"success"}),setTimeout(t.dismiss,1e4),u["default"].increment("promos.sms-alerts-notif.complete");break;default:t.setState({error:n.error})}})},render:function(){var e=void 0;switch(this.state.screen){case"form":e=React.createElement("div",null,React.createElement("p",null,"Set up your phone number to receive your price & volume alerts as text messages! Our system watches your alerts for you 24/7. Never miss another market movement!"),React.createElement("form",{action:"/account/add-phone-number/",method:"post",onSubmit:this.handleSubmit},React.createElement("p",null,React.createElement("input",{ref:"phoneNumber",style:{width:150,marginRight:10},type:"text",name:"phone-number",placeholder:"Phone number"}),React.createElement("input",{className:React.addons.classSet({button:!0,"button--in-progress":this.state.inNetworkCall}),type:"submit",value:"Set up phone",disabled:this.state.inNetworkCall}),this.state.error?React.createElement("p",{className:"error"},React.createElement("br",null),this.state.error):null)));break;case"success":e=React.createElement("div",null,React.createElement("p",{className:"confirmation"},"Your phone number has been registered.",React.createElement("br",null),"Please check your messages to verify."))}return React.createElement(h["default"],{padded:!0,onDismiss:this.dismiss},e)}}),p=function(e){function t(){a(this,t),e.call(this),this.promo=!0,this.severity=o.SEVERITY.LOW,this.triggered=!0}return i(t,e),t.prototype.render=function(){var e=this;return React.createElement(f,{onDismiss:function(){e._destroy()}})},t}(o.Notification);t.SMSNumberInputPrompt=p;var g=React.createClass({displayName:"PhoneAlertsSignupAd",dismiss:function(){this.props.onDismiss&&this.props.onDismiss(),localStorage.setItem("closed-sms-promo","true")},render:function(){var e=void 0,t=void 0;return t=cryptowatch.session?React.createElement("a",{className:"button",href:"/account/subscription"},"Activate Account"):React.createElement("a",{className:"button",href:"/account/create"},"Create Account"),e=React.createElement("div",null,React.createElement("div",{id:"notifications-account-promo"},React.createElement("div",{id:"nap_headline"},"Get your price & volume alerts on your phone"),React.createElement("div",{id:"nap_cta"},t),React.createElement("div",{id:"nap_phone"},React.createElement("div",{id:"nap_phone_speaker"}),React.createElement("div",{id:"nap_phone_screen"},React.createElement("div",{id:"nap_phone_message"},React.createElement("span",null,"Cryptowatch: ",cryptowatch.exchange.name," "),React.createElement("span",null,cryptowatch.currencyPair.base,cryptowatch.currencyPair.quote," "),React.createElement("span",null,"price has reached 1572.50")))))),React.createElement(h["default"],{padded:!1,onDismiss:this.dismiss},e)}}),v=function(e){function t(){a(this,t),e.call(this),this.promo=!0,this.severity=o.SEVERITY.LOW,this.triggered=!0}return i(t,e),t.prototype.render=function(){var e=this;return React.createElement(g,{anonymous:void 0===cryptowatch.session,onDismiss:function(){e._destroy()}})},t}(o.Notification);t.SMSNumberSignupAd=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=r(26),c=r(3),l=(n(c),r(10)),u=n(l),d=r(98),h=n(d),f=React.createClass({displayName:"SubscriptionExpiringCTA",dismiss:function(){this.props.onDismiss&&this.props.onDismiss(),localStorage.setItem("closed-payment-prompt-"+cryptowatch.subscription.expires,"true"),u["default"].increment("promos.subscription-expiring.close")},render:function(){return React.createElement(h["default"],{padded:!0,onDismiss:this.dismiss},React.createElement("div",null,React.createElement("table",null,React.createElement("tr",null,React.createElement("td",null,"Your ",this.props.object," ",this.props.timeRemaining),React.createElement("td",{style:{textAlign:"right"}},React.createElement("a",{href:"/account/subscription",className:"button",target:"_blank"},this.props.cta))))))}}),p=function(e){function t(r){a(this,t),e.call(this),this.props=r,this.promo=!0,this.severity=s.SEVERITY.LOW,this.triggered=!0}return i(t,e),t.prototype.render=function(){var e=this;return React.createElement(f,o({onDismiss:function(){e._destroy()}},this.props))},t}(s.Notification);t.SubscriptionExpiringAlert=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){this.DOMElement=document.querySelector(e),this.context=this.DOMElement.getContext("2d"),this._selector=e,this.context.font="11px 'Droid Sans Mono', monospace",this.hoverareaState={hover:void 0,active:void 0},this.animations={}}t.__esModule=!0;var i=r(100),o=n(i),s=r(86),c=(n(s),r(16)),l=n(c),u=r(25),d=n(u),h=r(5),f=n(h),p=r(20),g=n(p);a.prototype={clear:function(){this.context.clearRect(0,0,this.width,this.height)},"do":function(e,t){t.alpha&&(this.context.globalAlpha=t.alpha),t.stroke&&(this.context.strokeStyle=t.stroke.toString()),t.fill&&(this.context.fillStyle=t.fill.toString()),e(),t.alpha&&(this.context.globalAlpha=1)},drawLine:function(e,t,r){var n=this,a=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];this["do"](function(){n.context.beginPath();for(var r=0;r<e.length;r++){var a=e[r],i=t(a,r);0===r?n.context.moveTo(i.x,i.y):n.context.lineTo(i.x,i.y)}n.context.stroke(),n.context.closePath()},{alpha:a.alpha,stroke:r})},drawDashedLine:function(e,t,r,n){n=n||{},n.evenOddOffset||(n.evenOddOffset=0),this.context.strokeStyle=r,this.context.beginPath();for(var a=0;a<e.length;a++){var i=e[a],o=t(i,a);(a+n.evenOddOffset)%2==0?this.context.moveTo(o.x,o.y):this.context.lineTo(o.x,o.y)}this.context.closePath(),this.context.stroke()},drawLineSegment:function(e,t,r){r||(r={}),r=$.extend({color:cryptowatch.colors.theme.text.toString(),alpha:1,width:1},r),this.context.globalAlpha=r.alpha,this.context.strokeStyle=r.color;var n=this.context.lineWidth;this.context.lineWidth=r.width,this.context.beginPath(),this.context.moveTo(e.x,e.y),this.context.lineTo(t.x,t.y),this.context.stroke(),this.context.closePath(),this.context.globalAlpha=1,this.context.lineWidth=n},drawHorizontalLine:function(e,t){this.drawLineSegment(new g["default"](0,e),new g["default"](this.width,e),t)},drawVerticalLine:function(e,t){this.drawLineSegment(new g["default"](e,0),new g["default"](e,this.height),t)},drawDashedHorizontalLineSegment:function(e,t,r,n){var a=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];r=Math.floor(r)+.5,a.alpha=a.alpha||.5,void 0===a.length&&(a.length=2),void 0===a.spacing&&(a.spacing=2);var i=a.length+a.spacing;this.context.globalAlpha=a.alpha;var o=Math.min(f["default"].roundUpTo(e,i),f["default"].roundUpTo(t,i)),s=Math.max(f["default"].roundUpTo(e,i),f["default"].roundUpTo(t,i));this.context.strokeStyle=n,this.context.beginPath();for(var c=o;s>=c+i;c+=i)this.context.moveTo(c,r),this.context.lineTo(c+a.length,r);this.context.closePath(),this.context.stroke(),this.context.globalAlpha=1},drawDashedVerticalLineSegment:function(e,t,r,n){var a=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];r=Math.floor(r)+.5,a.alpha=a.alpha||.5,void 0===a.length&&(a.length=2),void 0===a.spacing&&(a.spacing=2);var i=a.length+a.spacing,o=Math.min(f["default"].roundTo(e,i),f["default"].roundTo(t,i)),s=Math.max(f["default"].roundTo(e,i),f["default"].roundTo(t,i));this.context.globalAlpha=a.alpha,this.context.strokeStyle=n,this.context.beginPath();for(var c=o;s>=c+i;c+=i)this.context.moveTo(r,c),this.context.lineTo(r,c+a.length);this.context.closePath(),this.context.stroke(),this.context.globalAlpha=1},fill:function(e){this.drawRectangle(new g["default"](0,0),new g["default"](this.width,this.height),null,e,1)},drawRectangle:function(e,t,r,n,a){this.context.strokeStyle=r,this.context.fillStyle=n;var i=this.context.globalAlpha;a&&(this.context.globalAlpha=a),n&&this.context.fillRect(e.x,e.y,Math.abs(t.x-e.x),Math.abs(t.y-e.y)),r&&this.context.strokeRect(e.x,e.y,Math.abs(t.x-e.x),Math.abs(t.y-e.y)),a&&(this.context.globalAlpha=i)},drawRectangularPath:function(e,t){this.context.moveTo(e.x,e.y),this.context.lineTo(t.x,e.y),this.context.lineTo(t.x,t.y),this.context.lineTo(e.x,t.y)},drawRectangularGradient:function(e,t,r,n,a,i){var o=this.context.createLinearGradient(e.x,e.y,t.x,t.y);o.addColorStop(0,a),o.addColorStop(1,i),this.drawRectangle(r,n,null,o)},drawCircle:function(e,t,r,n,a){a=a||{},this.context.beginPath(),n&&(this.context.fillStyle=n),r&&(this.context.strokeStyle=r),this.context.arc(e.x,e.y,t,0,2*Math.PI,!0),void 0!==a.fillAlpha&&(this.context.globalAlpha=a.fillAlpha),n&&this.context.fill(),void 0!==a.fillAlpha&&(this.context.globalAlpha=1),void 0!==a.strokeAlpha&&(this.context.globalAlpha=a.strokeAlpha),r&&this.context.stroke(),void 0!==a.strokeAlpha&&(this.context.globalAlpha=1),this.context.closePath()},drawTriangle:function(e,t,r){var n=e.x,a=e.y;switch(r){case"left":this.context.fillStyle=t,this.context.globalAlpha=1,this.context.beginPath(),this.context.moveTo(n,a),this.context.lineTo(n+6,a-3),this.context.lineTo(n+6,a+3),this.context.fill(),this.context.closePath();break;case"right":this.context.fillStyle=t,this.context.globalAlpha=1,this.context.beginPath(),this.context.moveTo(n,a),this.context.lineTo(n-6,a-3),this.context.lineTo(n-6,a+3),this.context.fill(),this.context.closePath()}},drawArea:function(e,t,r,n,a){a.fill&&(this.context.fillStyle=a.fill),a.stroke&&(this.context.strokeStyle=a.stroke),this.context.beginPath(),e.forEach(function(e,r){var n=t(e);this.context[0==r?"moveTo":"lineTo"](n.x,n.y)}.bind(this)),r.slice(0).reverse().forEach(function(e,t){var r=n(e);this.context.lineTo(r.x,r.y)}.bind(this)),a.fillAlpha&&(this.context.globalAlpha=a.fillAlpha),a.fill&&this.context.fill(),a.fillAlpha&&(this.context.globalAlpha=1),a.strokeAlpha&&(this.context.globalAlpha=a.strokeAlpha),a.stroke&&this.context.stroke(),a.strokeAlpha&&(this.context.globalAlpha=1),this.context.closePath()},_sharpenCoords:function(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}},drawText:function(e,t,r,n){n=n||{},this.context.font="11px 'Droid Sans Mono', monospace",this.context.textAlign=n.align||"start",this.context.globalAlpha=n.opacity||1,this.context.fillStyle=r,e=this._sharpenCoords(e),this.context.fillText(t,e.x,e.y+4),this.context.globalAlpha=1},fields:{},hoverareas:[],hoverareasIndex:{},registerHoverarea:function(e){this.hoverareas.push(e),this.hoverareasIndex[e.name]=e,e.canvas=this},resetHoverareas:function(){this.hoverareas=[],this.hoverareasIndex={}},hoverareaActiveRelease:function(){this.hoverareaState.active&&(this.hoverareaState.active.inactive(),delete this.hoverareaState.active)},activateHoverarea:function(e){e.opts.cursorActive&&this.setCursor(e.opts.cursorActive)},deactivateHoverarea:function(e){e.opts.cursorActive&&e.opts.cursor&&this.setCursor(e.opts.cursor)},setCursor:function(e){"function"==typeof e?this.setCursorType(e()||this.canvas._defaultCursorType):void 0!==e?this.setCursorType(e||this.canvas._defaultCursorType):this.setCursorType(this.canvas._defaultCursorType)},_scanForHoverarea:function(e){for(var t=this.hoverareas.slice(0).reverse(),r=0;r<t.length;r++){var n=t[r];if((!n.opts.compatibleTools||-1!==n.opts.compatibleTools.indexOf(cryptowatch.chart.tool))&&(!n.opts.incompatibleTools||-1===n.opts.incompatibleTools.indexOf(cryptowatch.chart.tool))&&n.overlaps(e)){var a=this.hoverareaState.hover;if(n===a)return!0;this.hoverareaState.hover=n,a&&a.leave();var i=n.hover()!==!1;return i&&this.setCursor(n.opts.cursor),!0}}return void 0!==this.hoverareaState.hover&&(this.hoverareaState.hover.leave(),delete this.hoverareaState.hover,this.setCursorType(this.canvas._defaultCursorType)),!1},setCursorType:function(e){this.canvas.setCursorType(e)},refreshSize:function(){var e=window.devicePixelRatio;void 0===e&&(e=1),e>2&&(e=2);var t=Math.floor(this.DOMElement.offsetWidth),r=Math.floor(this.DOMElement.offsetHeight);this.ratio=e,t===this.width&&r===this.height||0===t&&0===r||(this.DOMElement.width=t*e,this.DOMElement.height=r*e,this.width=t,this.height=r,this.context.scale(e,e))},upsertAnimation:function(e,t){var r=this,n=0===Object.keys(this.animations).length;this.animations[e]=t,n&&d["default"].nextFrame(function(e){r.renderAnimationsIfNeeded(e)})},removeAnimation:function(e){delete this.animations[e]},renderAnimationsIfNeeded:function(e){var t=this;this.clear();var r=Math.round(e);if(Object.keys(this.animations).length>0){for(var n in this.animations){var a=this.animations[n];a.draw.call(this,r%a.cycle/a.cycle)}setTimeout(function(){d["default"].nextFrame(function(e){t.renderAnimationsIfNeeded(e)},!1)},10/l["default"].config.performance.frameRate)}},doWithClipMask:function(e,t){this.context.save(),e.call(this),this.context.clip(),t.call(this),this.context.restore()}},a.prototype=$.extend(a.prototype,o["default"]),t["default"]=a,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(12),i=n(a),o=r(31),s=n(o),c=r(8),l=n(c),u=r(40),d=n(u),h=r(16),f=n(h),p=r(11),g=n(p),v=r(20),m=n(v),y=r(50),w=r(101),x=n(w),b=r(45),_=n(b),S=r(99),k=r(77),C=n(k),T=r(79),E=r(17),P=n(E),A=r(54),M=n(A),R=r(61),O=n(R),I=r(144),D=n(I),N=r(107),L=n(N),F=r(63),B=n(F),H=r(26),j=r(66),z=(n(j),r(37)),W=r(113),q=n(W),V=r(86),U=(n(V),r(41)),Y=n(U),K=r(5),J=n(K),G=r(25),X=n(G),Q=r(49),Z=(n(Q),r(111)),ee=n(Z),te=r(51),re=n(te),ne=30,ae=cryptowatch.disable.feeds?10:30,ie=10,oe=30,se=80,ce=20,le=-2,ue={initialize:function(){var e=this;console.timeStamp&&console.timeStamp("draw:start"),ue.canvas=new T.MultiLayerCanvas("#price-chart-container",{cursor:{dragSnap:{x:ue._fullCandleWidth()},pinchStep:10,snapThreshold:function(){return f["default"].config.drawing.snapThreshold},disableContextMenu:!0,snapPosns:function(e){var t=f["default"].config.drawing.snapThreshold;if("extrapolator"===ue.tool)return L["default"].elementPosns();if("verticalLine"===ue.tool){var r=J["default"].roundDownTo(ue.canvas.fields.price.x.invert(e.x),cryptowatch.periodInt);return[new m["default"](ue.canvas.fields.price.x(r)+ue._halfCandleWidth(),e.y)]}if("crosshair"!==ue.tool){for(var n=Math.ceil(t/2/ue._fullCandleWidth())+1,a=J["default"].roundDownTo(ue.canvas.fields.price.x.invert(e.x),cryptowatch.periodInt),i=[],o=cryptowatch.periodInt*n,r=a-o;a+o>=r;r+=cryptowatch.periodInt){var s=ue.queue.closeTimeIndex[r],c=ue.canvas.fields.price.x(r)+ue._halfCandleWidth();s&&(i.push(new m["default"](c,ue.canvas.fields.price.y(s.Candle.Open))),i.push(new m["default"](c,ue.canvas.fields.price.y(s.Candle.High))),i.push(new m["default"](c,ue.canvas.fields.price.y(s.Candle.Low))),i.push(new m["default"](c,ue.canvas.fields.price.y(s.Candle.Close))))}return i}}}}).registerLayer("crosshair","#crosshair").registerLayer("chart","#chart").registerLayer("drawing","#drawing").registerLayer("depthMirror","#depth-mirror").registerLayer("axes","#axes").registerLayer("animation","#animation").registerLayer("debug","#debug"),L["default"].cursor=this.canvas.cursor,ue.POSITION=ue._defaultPosition(),ue.useQueue(l["default"].intervalQueues[cryptowatch.periodInt]),ue.canvas.cursor.on("mouseenter",function(e,t){ue._focused=!0}).on("mousemove",function(e,t){t.x>ue.canvas.fields.yaxis.x(0)&&!s["default"].active()?ue.hideCrosshair():ue.showCrosshair(),X["default"].nextFrame(function(){L["default"].handleMousemove(),ue.updateCursor()})}).on("mousedown",function(e,t){}).on("mouseleave",function(e,t){ue.hideCrosshair(),ue.hideCrosshairInfo(),ue._focused=!1,delete _["default"].pending}).on("click",function(e,t){"crosshair"===ue.tool||"extrapolator"===ue.tool||this.state.dragging||(L["default"].handleClick(),ue.updateToolTip())}).on("rightclick",function(e,t){L["default"].elemHovered?L["default"].removeElemHovered():L["default"].pop(),ue.updateToolTip()}).on("drag",function(e,t,r,n){ue.hideCrosshair(),ue.hideCrosshairInfo(),ue.nudge(n.x/ue._fullCandleWidth())}).on("drag:stop",function(e,t){ue.refresh.chart()}).on("pinch:expand",this.increaseCandleWidth.bind(this)).on("pinch:contract",this.decreaseCandleWidth.bind(this)).on("scroll:up",function(){f["default"].config.mouse.scrollY&&e.decreaseCandleWidth()}).on("scroll:down",function(){f["default"].config.mouse.scrollY&&e.increaseCandleWidth()}).on("scroll:horizontal",function(t){f["default"].config.mouse.scrollX&&e.nudge(t/e._fullCandleWidth())}),f["default"].on("change",function(){X["default"].nextFrame(function(){e._viewportChange(),e.refresh.all()})}),B["default"].on("hotkey:increaseCandleWidth",this.increaseCandleWidth.bind(this)),B["default"].on("hotkey:decreaseCandleWidth",this.decreaseCandleWidth.bind(this)),B["default"].on("hotkey:defaultCandleWidth",this.defaultCandleWidth.bind(this)),B["default"].on("hotkey:defaultPosition",this.goToDefaultPosition.bind(this)),B["default"].on("hotkey:selectTool",this.selectTool.bind(this)),B["default"].on("hotkey:modifierChange",function(e){"alt"===e&&ue.updateCursor()}),B["default"].on("hotkey:nudge",this.nudge.bind(this)),s["default"].on(["active:change","selected:change"],function(){e.updateCursor(),e.refresh.all(),s["default"].active()||ue.hideCrosshairInfo()}),s["default"].on("privateTrade:jump",function(t){e.jumpToTrade(t)}),g["default"].on("fiatPreference:change",function(){ue._viewportChange(),ue.refresh.all()}),ue.canvas.layers.axes.context.font="11px 'Droid Sans Mono', monospace",ue.canvas.layers.chart.context.font="11px 'Droid Sans Mono', monospace",ue.canvas.layers.chart.resize=function(){ue._viewportChange(),X["default"].nextFrame(ue.refresh.all)},M["default"].on("viewport:resize",function(){ue.canvas.refreshSize()}),ue._viewportChange(),ue._tzoffset=60*(new Date).getTimezoneOffset();var t=sessionStorage.getItem("tool")||"crosshair";ue.selectTool(t),window.onblur=function(){ue._blurred=!0},window.onfocus=function(){ue._blurred=!1},ue.initialized=!0,ue.refresh.all(),D["default"].initialize(),l["default"].on("intervalQueues:push",function(e,t){t===cryptowatch.periodInt&&(D["default"].calculateSeries(),D["default"].refresh.all())}),l["default"].on("intervalQueues:update",function(t,r){e.handleIntervalUpdate(t,r)}),d["default"].on("trades:update",function(t,r){e.refresh.all()}),d["default"].on("orders:change",function(t,r){e.refresh.axes()}),d["default"].on(["previewOrder:change","stagedOrder:change"],function(t,r){e.refresh.axes()}),D["default"].on("window:change",function(e){ue.setPositionByTime(e)}),_["default"].on("change",ue.refresh.axes.bind(ue))},useQueue:function(e){ue.queue&&ue.queue.setInactive(),ue.queue=e,ue.queue.setActive()},setPeriod:function(e,t){cryptowatch.periodInt=e,ue.useQueue(l["default"].intervalQueues[e]),ue.setPosition(ue._defaultPosition()),ue._viewportChange(),ue.refresh.all(),D["default"].calculateSeries(),D["default"].refresh.all()},_indicatorsHeight:function(){var e=0;return f["default"].bottomIndicators.forEach(function(t){f["default"].shouldDraw[t]()&&(e+=f["default"].config.indicators[t].height,e+=ie)}),e>0&&(e+=ie),e},_priceVerticalPadding:function(){return ue.canvas.layers.chart.height<250?ue.canvas.layers.chart.height/20:f["default"].config.padding.price},_priceChartHeight:function(){return ue.canvas.layers.chart.height-ue._indicatorsHeight()-ue._priceVerticalPadding()-ae-ne-oe},_clipIndicatorHeights:function(){var e=ue._priceChartHeight(),t=100-e,r=f["default"].bottomIndicators.filter(function(e){return f["default"].shouldDraw[e]()}),n=r.slice(0).filter(function(e){return f["default"].config.indicators[e].height>50});if(150>e){for(var a=0,i=function(){var e=r[a];f["default"].config.indicators[e].show&&(f["default"].config.indicators[e].height>50?(f["default"].config.indicators[e].height--,t--,n=r.slice(0).filter(function(e){return f["default"].config.indicators[e].height>50})):0===n.length&&(f["default"].config.indicators[e].show=!1,t-=f["default"].config.indicators[e].height,r=r.filter(function(t){return t!==e})),a===r.length-1?a=0:a++)};r.length>0&&t>0;)i();f["default"].cache(),f["default"].writeConfigToDom()}f["default"].setUncheckedIndicatorsEnabledState(e>=150)},_viewportChange:function(){ue._clipPosition(),ue.scales={},ue.canvas.fields={},ue.canvas.layers.chart.resetHoverareas(),ue.canvas.layers.drawing.resetHoverareas(),ue._timeBounds=ue._calculateTimeBounds(),D["default"].setWindow(ue._timeBounds.start,ue._timeBounds.end),ue._visibleCandles=ue.queue.getTimeRange(ue._timeBounds.start||0,ue._timeBounds.end||0),ue._clipIndicatorHeights(),ue.numIndicators=0;var e=ue._priceVerticalPadding();f["default"].bottomIndicators.forEach(function(e){f["default"].shouldDraw[e]()&&ue.numIndicators++});var t=oe,r=(f["default"].config.indicatorHeight,x["default"].withDefaults(this));f["default"].shouldDraw.aroon()&&(r(ue.canvas,"aroon",{top:100,bottom:0},{top:ue.canvas.layers.chart.height-(t+f["default"].config.indicators.aroon.height),bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se}),t+=f["default"].config.indicators.aroon.height+ie,ue._registerIndicatorHeightAdjustment("aroon",t)),f["default"].shouldDraw.rsi()&&(r(ue.canvas,"rsi",{top:100,bottom:0},{top:ue.canvas.layers.chart.height-(t+f["default"].config.indicators.rsi.height),bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se}),t+=f["default"].config.indicators.rsi.height+ie,ue._registerIndicatorHeightAdjustment("rsi",t)),f["default"].shouldDraw.stochRSI()&&(r(ue.canvas,"stochRSI",{top:100,bottom:0},{top:ue.canvas.layers.chart.height-(t+f["default"].config.indicators.stochRSI.height),bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se}),t+=f["default"].config.indicators.stochRSI.height+ie,ue._registerIndicatorHeightAdjustment("stochRSI",t)),f["default"].shouldDraw.obv()&&(r(ue.canvas,"obv",{top:d3.max(ue._visibleCandles.map(function(e){return Math.max(e.calculations.OBV,e.calculations.OBVMA[f["default"].config.indicators.obv.maPeriods])})),bottom:d3.min(ue._visibleCandles.map(function(e){return Math.min(e.calculations.OBV,e.calculations.OBVMA[f["default"].config.indicators.obv.maPeriods])}))},{top:ue.canvas.layers.chart.height-(t+f["default"].config.indicators.obv.height),bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se}),t+=f["default"].config.indicators.obv.height+ie,ue._registerIndicatorHeightAdjustment("obv",t));var n=Math.max(d3.max(ue._visibleCandles.map(function(e){return e.calculations.DPO})),-d3.min(ue._visibleCandles.map(function(e){return e.calculations.DPO})));if(f["default"].shouldDraw.dpo()&&(r(ue.canvas,"dpo",{top:n,bottom:-n},{top:ue.canvas.layers.chart.height-(t+f["default"].config.indicators.dpo.height),bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se}),t+=f["default"].config.indicators.dpo.height+ie,ue._registerIndicatorHeightAdjustment("dpo",t)),f["default"].shouldDraw.macd()){var a=Math.abs(Math.max(d3.max(ue._visibleCandles.map(function(e){return e.calculations.MACD.mainLine})),d3.max(ue._visibleCandles.map(function(e){return e.calculations.MACD.signalLine})))),i=Math.abs(Math.min(d3.min(ue._visibleCandles.map(function(e){return e.calculations.MACD.mainLine})),d3.min(ue._visibleCandles.map(function(e){return e.calculations.MACD.signalLine})))),o=Math.max(a,i);r(ue.canvas,"macd",{top:o,bottom:-o},{top:ue.canvas.layers.chart.height-(t+f["default"].config.indicators.macd.height),bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se}),r(ue.canvas,"macdHistogram",{top:o,bottom:-o},{top:ue.canvas.layers.chart.height-(t+f["default"].config.indicators.macd.height),bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se}),t+=f["default"].config.indicators.macd.height+ie,ue._registerIndicatorHeightAdjustment("macd",t)}f["default"].shouldDraw.volume()&&(r(ue.canvas,"volume",{top:d3.max(ue._visibleCandles.map(function(e){return e.Volume})),bottom:0},{top:ue.canvas.layers.chart.height-(t+f["default"].config.indicators.volume.height),bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se},{}),t+=f["default"].config.indicators.volume.height+ie,ue._registerIndicatorHeightAdjustment("volume",t)),ue.indicatorTop=t;var s=void 0,c=void 0;switch(f["default"].config.chartStyle){case"mountain":s=c="Close";break;default:s="High",c="Low"}var l=d3.max(ue._visibleCandles.map(function(e){return e.Candle[s]})),u=Math.max(0,d3.min(ue._visibleCandles.map(function(e){return e.Candle[c]}))),d=l,h=d,p=Math.max(0,u),v=p;g["default"].fiatPreference&&g["default"].fiat.indexOf(cryptowatch.currencyPair.quote)>-1?(h=g["default"].convert(d,cryptowatch.currencyPair.quote,g["default"].fiatPreference),v=g["default"].convert(p,cryptowatch.currencyPair.quote,g["default"].fiatPreference),ue._priceAxisCurrency=g["default"].fiatPreference):ue._priceAxisCurrency=cryptowatch.currencyPair.quote;var m=Math.max(ne+ae,e);r(ue.canvas,"price",{top:d,bottom:p},{top:0,bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se},{padding:{top:m,bottom:e},optIntoLogScale:!0}),r(ue.canvas,"priceConverted",{top:h,bottom:v},{top:0,bottom:ue.canvas.layers.chart.height-t,left:0,right:ue.canvas.layers.chart.width-se},{padding:{top:m,bottom:e},optIntoLogScale:!0}),r(ue.canvas,"yaxis",{top:h,bottom:v,left:0,right:se},{top:0,bottom:ue.canvas.layers.chart.height,left:ue.canvas.layers.chart.width-se,right:ue.canvas.layers.chart.width
},{optIntoLogScale:!0,padding:{top:ne+e+ae,bottom:e,left:0,right:0}}),ue._calculateXAxisTicks()},_calculateXAxisTicks:function(){if(0!==ue._visibleCandles.length){for(var e=new re["default"](ue._timeBounds.start,ue._timeBounds.end),t=ee["default"].calculateTimeTicks([Z.TIME_TICK_OPTIONS["30_MINUTE"],Z.TIME_TICK_OPTIONS["1_HOUR"],Z.TIME_TICK_OPTIONS["6_HOUR"],Z.TIME_TICK_OPTIONS["1_DAY"],Z.TIME_TICK_OPTIONS["1_WEEK"],Z.TIME_TICK_OPTIONS["1_MONTH"],Z.TIME_TICK_OPTIONS["3_MONTH"],Z.TIME_TICK_OPTIONS["6_MONTH"],Z.TIME_TICK_OPTIONS["1_YEAR"]],e,ue.canvas.layers.chart.width/100),r=0,n=t[r];ue._visibleCandles[0].Time-n.unix>cryptowatch.periodInt;)r++,n=t[r];for(var a=ue._visibleCandles[0].Time;a<=t[t.length-1].unix;a+=cryptowatch.periodInt){var i=t[r],o=a-i.unix;o>=0&&o<=cryptowatch.periodInt&&(i.x=ue.canvas.fields.price.x(a)+ue._halfCandleWidth(),r++)}ue._xAxisTicks=t}},_registerIndicatorHeightAdjustment:function(e,t){ue.canvas.layers.chart.registerHoverarea(new y.Hoverarea("heightAdjustment:"+e,{type:"rect",left:0,right:ue.canvas.layers.chart.width,top:ue.canvas.layers.chart.height-t,bottom:ue.canvas.layers.chart.height-t+ie},{cursor:"resize-y",disableCrosshair:!0,callbacks:{drag:function(t,r,n){var a=ue._priceChartHeight();(n.y>0||a+n.y>100)&&(f["default"].config.indicators[e].height-=n.y,f["default"].config.indicators[e].height=Math.max(f["default"].config.indicators[e].height,50),f["default"].cache()),ue._viewportChange(),ue.refresh.all()}}}))},_clearIndicatorMargin:function(e){f["default"].shouldDraw[e]()&&ue.canvas.layers.axes.context.clearRect(ue._yAxisLeftBoundary()-1,ue.canvas.fields[e].range.top-ie,ue.canvas.layers.chart.width,ie+1)},_timeIsVisible:function(e){return e>=ue._timeBounds.start&&e<=ue._visibleCandles[ue._visibleCandles.length-1].Time},decreaseCandleWidth:function(){f["default"].config.candleWidth<=1||ue._modifyCandleWidth(-2)},increaseCandleWidth:function(){f["default"].config.candleWidth>=31||ue._modifyCandleWidth(2)},defaultCandleWidth:function(){ue._modifyCandleWidth(5-f["default"].config.candleWidth)},_modifyCandleWidth:function(e){f["default"].config.candleWidth+=e,f["default"].cache(),ue._viewportChange(),X["default"].nextFrame(function(){ue.refresh.all()}),ue.canvas.cursor.setDragSnapping({x:ue._fullCandleWidth()})},refresh:{chart:function(){ue.initialized&&f["default"].initialized&&(ue.canvas.layers.chart.clear(),ue.canvas.layers.axes.context.font="11px 'Droid Sans Mono', monospace",ue.canvas.layers.chart.context.font="11px 'Droid Sans Mono', monospace",ue.canvas.fields.price.withClipMask(ue.canvas.layers.chart,function(){f["default"].shouldDraw.grid()&&ue._drawGrid({y:ue.canvas.fields.priceConverted,spacing:50}),ue._drawCandles(),f["default"].shouldDraw.bollingerBands()&&ue._drawBollingerBands(),f["default"].shouldDraw.keltnerChannel()&&ue._drawKeltnerChannel(),f["default"].shouldDraw.ichimoku()&&ue._drawIchimokuCloud(),f["default"].shouldDraw.zigzag()&&ue._drawZigZag(),f["default"].shouldDraw.chandelierExit()&&ue._drawChandelierExit(),f["default"].shouldDraw.sar()&&ue._drawSAR(),ue._labelViewportHighLow(),f["default"].shouldDraw.ema()&&ue._drawEMAs(),f["default"].shouldDraw.sma()&&ue._drawSMAs(),f["default"].shouldDraw.trades()&&ue._drawOwnTrades()}),f["default"].shouldDraw.macd()&&(f["default"].shouldDraw.grid()&&ue.canvas.fields.macd.withClipMask(ue.canvas.layers.chart,function(){ue._drawGrid({y:ue.canvas.fields.macd,spacing:25})}),ue._drawMACD()),f["default"].shouldDraw.dpo()&&(f["default"].shouldDraw.grid()&&ue.canvas.fields.dpo.withClipMask(ue.canvas.layers.chart,function(){ue._drawGrid({y:ue.canvas.fields.dpo,spacing:25})}),ue._drawDPO()),f["default"].shouldDraw.rsi()&&(ue.canvas.fields.rsi.withClipMask(ue.canvas.layers.chart,function(){ue._drawGrid({y:ue.canvas.fields.rsi,ticks:[f["default"].config.indicators.rsi.threshold,100-f["default"].config.indicators.rsi.threshold]})}),ue._drawRSI()),f["default"].shouldDraw.stochRSI()&&(ue.canvas.fields.stochRSI.withClipMask(ue.canvas.layers.chart,function(){ue._drawGrid({y:ue.canvas.fields.stochRSI,ticks:[25,50,75]})}),ue._drawStochRSI()),f["default"].shouldDraw.obv()&&(f["default"].shouldDraw.grid()&&ue.canvas.fields.obv.withClipMask(ue.canvas.layers.chart,ue._drawGrid.bind(ue)),ue._drawOBV()),f["default"].shouldDraw.aroon()&&(f["default"].shouldDraw.grid()&&ue.canvas.fields.aroon.withClipMask(ue.canvas.layers.chart,function(){ue._drawGrid({y:ue.canvas.fields.aroon,ticks:[30,50,70]})}),ue._drawAroon()),f["default"].shouldDraw.volume()&&(f["default"].shouldDraw.grid()&&ue.canvas.fields.volume.withClipMask(ue.canvas.layers.chart,function(){ue._drawGrid({y:ue.canvas.fields.volume,spacing:25})}),ue._drawVolume()),ue.drawDepthMirror(),ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.price.range.bottom+ue._priceVerticalPadding(),P["default"].theme.guide.toString()))},axes:function(){ue.canvas.layers.crosshair.clear(),ue.canvas.layers.axes.clear(),ue.canvas.layers.axes.resetHoverareas(),ue._setupYAxisHoverarea(),ue._drawXAxis(),ue._drawCrosshair(),ue._drawYAxis()},all:function(){ue.refresh.chart(),L["default"].refresh(ue),ue.refresh.axes()}},_candleCapacity:function(){return Math.floor(ue._widthForIntervals()/ue._fullCandleWidth())},_calculateTimeBounds:function(){if(0===ue.queue.intervals.length)return null;var e=(ue._candleCapacity(),ue.POSITION*cryptowatch.periodInt),t=ue.queue.last.Time-e;t=J["default"].roundDownTo(t,cryptowatch.periodInt);var r=t-ue._widthForIntervals()/ue._fullCandleWidth()*cryptowatch.periodInt;return r=J["default"].roundDownTo(r,cryptowatch.periodInt),{start:r,end:t}},_currentCandle:function(){return ue.queue.last},_currentCandleVisible:function(){return ue._currentCandle().i===ue._visibleCandles[ue._visibleCandles.length-1].i},_fullCandleWidth:function(){return f["default"].config.candleWidth+f["default"].config.candles.spacing},_halfCandleWidth:function(){return f["default"].config.candleWidth/2},_defaultPosition:function(){var e=sessionStorage.getItem("chart:position");return e?(sessionStorage.removeItem("chart:position"),parseInt(e,10)):f["default"].shouldDraw.ichimoku()?le-f["default"].config.indicators.ichimoku.kijunPeriod:le},_yAxisLeftBoundary:function(){return ue._width()-se},_width:function(){return ue.canvas.layers.chart.width},_widthForIntervals:function(){return ue._width()-se},_height:function(){return ue.canvas.layers.chart.height},_drawGrid:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=.4,r=.2,n=[];if(e.y){if(e.ticks)n=e.ticks.map(function(t){return e.y.ySharp(t)});else for(var a=e.y.tickSize(e.spacing),i=J["default"].roundDownTo(e.y.domain.bottom,a),o=J["default"].roundUpTo(e.y.domain.top,a),s=i;o>=s;s+=a){var c=e.y.ySharp(s);n.push(c)}switch(f["default"].config.gridStyle){case"dashed":for(var l=n,u=Array.isArray(l),d=0,l=u?l:l[Symbol.iterator]();;){var h;if(u){if(d>=l.length)break;h=l[d++]}else{if(d=l.next(),d.done)break;h=d.value}var p=h;ue.canvas.layers.chart.drawDashedHorizontalLineSegment(0,ue.canvas.layers.chart.width,p,P["default"].theme.text.toString(),{alpha:t,length:1,spacing:4})}break;case"solid":for(var g=n,v=Array.isArray(g),m=0,g=v?g:g[Symbol.iterator]();;){var y;if(v){if(m>=g.length)break;y=g[m++]}else{if(m=g.next(),m.done)break;y=m.value}var w=y;ue.canvas.layers.chart.drawLineSegment({x:0,y:w},{x:ue.canvas.layers.chart.width,y:w},{color:P["default"].theme.text.toString(),alpha:r})}}}switch(f["default"].config.gridStyle){case"dashed":for(var x=ue._xAxisTicks,b=Array.isArray(x),_=0,x=b?x:x[Symbol.iterator]();;){var S;if(b){if(_>=x.length)break;S=x[_++]}else{if(_=x.next(),_.done)break;S=_.value}var a=S,k=J["default"].sharpen(a.x);ue.canvas.layers.chart.drawDashedVerticalLineSegment(0,ue.canvas.layers.chart.height,k,P["default"].theme.text.toString(),{alpha:t,length:1,spacing:4})}break;case"solid":for(var C=ue._xAxisTicks,T=Array.isArray(C),E=0,C=T?C:C[Symbol.iterator]();;){var A;if(T){if(E>=C.length)break;A=C[E++]}else{if(E=C.next(),E.done)break;A=E.value}var a=A,k=J["default"].sharpen(a.x);ue.canvas.layers.chart.drawLineSegment({x:k,y:0},{x:k,y:ue.canvas.layers.chart.height},{color:P["default"].theme.text.toString(),alpha:r})}}},_drawCandles:function(){var e=f["default"].config.chartStyle;"OHLC"===e||"heikenAshi"===e||"bar"===e?!function(){var t=!0;ue._visibleCandles.forEach(function(r){var n=void 0;if("OHLC"===e||"bar"===e?n=r.Candle:"heikenAshi"===e&&(n=r.calculations.heikenAshi),r.Volume>0&&(n.Close>n.Open?t=!0:n.Close<n.Open&&(t=!1)),"OHLC"===e||"heikenAshi"===e){ue.canvas.layers.chart.context.fillStyle=t?P["default"].theme.longFill.toString():P["default"].theme.shortFill.toString(),ue.canvas.layers.chart.context.strokeStyle=t?P["default"].theme["long"].toString():P["default"].theme["short"].toString().toString(),ue.canvas.layers.chart.context.globalAlpha=.7;var a=ue._halfCandleWidth(),i=ue.canvas.fields.price.x(r.Time)+a;ue.canvas.layers.chart.context.beginPath(),ue.canvas.layers.chart.context.moveTo(i,ue.canvas.fields.price.ySharp(n.Low)),ue.canvas.layers.chart.context.lineTo(i,ue.canvas.fields.price.ySharp(n.High)),ue.canvas.layers.chart.context.stroke(),ue.canvas.layers.chart.context.closePath(),ue.canvas.layers.chart.context.globalAlpha=1;var o=[ue.canvas.fields.price.xSharp(r.Time),ue.canvas.fields.price.ySharp(Math.min(n.Open,n.Close)),f["default"].config.candleWidth-1,Math.round(ue.canvas.fields.price.ySharp(Math.max(n.Open,n.Close))-ue.canvas.fields.price.ySharp(Math.min(n.Open,n.Close)))];ue.canvas.layers.chart.context.fillRect.apply(ue.canvas.layers.chart.context,o),ue.canvas.layers.chart.context.strokeRect.apply(ue.canvas.layers.chart.context,o)}else if("bar"===e){ue.canvas.layers.chart.context.strokeStyle=t?P["default"].theme["long"].toString():P["default"].theme["short"].toString().toString();var s=ue.canvas.fields.price.x(r.Time),c=s+ue._halfCandleWidth(),l=s+f["default"].config.candleWidth;ue.canvas.layers.chart.context.beginPath(),ue.canvas.layers.chart.context.moveTo(c,ue.canvas.fields.price.ySharp(r.Candle.Low)),ue.canvas.layers.chart.context.lineTo(c,ue.canvas.fields.price.ySharp(r.Candle.High)),ue.canvas.layers.chart.context.closePath(),ue.canvas.layers.chart.context.stroke(),ue.canvas.layers.chart.context.beginPath(),ue.canvas.layers.chart.context.moveTo(s,ue.canvas.fields.price.ySharp(r.Candle.Open)),ue.canvas.layers.chart.context.lineTo(c,ue.canvas.fields.price.ySharp(r.Candle.Open)),ue.canvas.layers.chart.context.closePath(),ue.canvas.layers.chart.context.stroke(),ue.canvas.layers.chart.context.beginPath(),ue.canvas.layers.chart.context.moveTo(c,ue.canvas.fields.price.ySharp(r.Candle.Close)),ue.canvas.layers.chart.context.lineTo(l,ue.canvas.fields.price.ySharp(r.Candle.Close)),ue.canvas.layers.chart.context.closePath(),ue.canvas.layers.chart.context.stroke()}})}():"mountain"===e?(ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.price.x(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(e.Candle.Close)}},P["default"].theme.textStrong.toString()),ue.canvas.layers.chart.doWithClipMask(function(){this.drawArea(ue._visibleCandles,function(e){return{x:ue.canvas.fields.price.x(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(e.Candle.Close)}},[{x:0,y:this.height},{x:this.width,y:this.height}],function(e){return e},{fill:null})},function(){var e=ue.canvas.fields.price.x(ue._currentCandle().Time)+ue._halfCandleWidth();this.drawRectangularGradient({x:0,y:ue.canvas.fields.price.range.top},{x:0,y:ue.canvas.fields.price.unpaddedRange.bottom},{x:0,y:ue.canvas.fields.price.range.top},{x:e,y:ue.canvas.fields.price.unpaddedRange.bottom},P["default"].theme.ta.channel.opacify(.4),P["default"].theme.ta.channel.opacify(.05))})):"line"===e&&(ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.price.x(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(e.Candle.Close)}},P["default"].theme.textStrong.toString()),ue.canvas.layers.chart.drawArea(ue._visibleCandles,function(e){return{x:ue.canvas.fields.price.x(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(e.Candle.Low)}},ue._visibleCandles,function(e){return{x:ue.canvas.fields.price.x(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(e.Candle.Close)}},{fill:P["default"].theme["short"].toString().toString(),fillAlpha:.3}),ue.canvas.layers.chart.drawArea(ue._visibleCandles,function(e){return{x:ue.canvas.fields.price.x(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(e.Candle.High)}},ue._visibleCandles,function(e){return{x:ue.canvas.fields.price.x(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(e.Candle.Close)}},{fill:P["default"].theme["long"].toString(),fillAlpha:.3}))},_labelViewportHighLow:function(){if("mountain"!==f["default"].config.chartStyle){var e={val:-(1/0)},t={val:1/0};ue._visibleCandles.forEach(function(r){r.Candle.High>e.val&&(e.val=r.Candle.High,e.time=r.Time),r.Candle.Low<t.val&&(t.val=r.Candle.Low,t.time=r.Time)}),ue._labelPricePoint(e.time,e.val),ue._labelPricePoint(t.time,t.val)}},_labelPricePoint:function(e,t){var r=ue._timeBounds.start+(ue._timeBounds.end-ue._timeBounds.start)/2,n=e>=r?"right":"left";ue.canvas.layers.chart.context.fillStyle=P["default"].theme.text.toString(),ue.canvas.layers.chart.context.textAlign="right"==n?"end":"start";var a=ue.canvas.fields.price.xSharp(e);ue.canvas.fields.price.ySharp(t);ue.canvas.layers.chart.context.fillText(g["default"].fmt(t,cryptowatch.currencyPair.quote,{label:!1,currentExchangePrecision:!0}),"left"===n?a+ue._fullCandleWidth()-1:a-1,ue.canvas.fields.price.ySharp(t)+3),ue.canvas.layers.chart.context.textAlign="start",ue.canvas.layers.chart.context.strokeStyle=P["default"].theme.text.toString()},_tradesDrawn:[],_tradeClusters:[],_posnForTrade:function(e){var t=ue._fullCandleWidth(),r=Math.round(t/2),n=J["default"].roundUpTo(e.timestamp,cryptowatch.periodInt);return{x:ue.canvas.fields.price.xSharp(n)-f["default"].config.candles.spacing+r-ue._fullCandleWidth(),y:ue.canvas.fields.price.ySharp(e.price)}},_tradeIndexHighlighted:void 0,_drawFakeTrades:!1,_pulsateTrades:!1,_drawOwnTrades:function(){if(cryptowatch.account&&cryptowatch.account.hasAccess.annotations&&(cryptowatch.apiAccess||ue._drawFakeTrades)&&void 0!==d["default"].trades&&0!==ue._visibleCandles.length){for(var e=[],t=(ue._timeBounds.start,ue._visibleCandles[ue._visibleCandles.length-1].Time,10),r=0;r<d["default"].trades.length;r++){var n=d["default"].trades[r];if(!(n.timestamp<ue._timeBounds.start||n.timestamp>ue._timeBounds.end)){for(var a=ue._posnForTrade(n),i=!1,o=0;o<e.length;o++){var c=e[o];if(a.x===c.origin.x&&Math.abs(a.y-c.origin.y)<t){e[o].trades.push(n),i=!0;break}}i||e.push({origin:a,trades:[n]})}}for(var o=0;o<e.length;o++){var l=e[o].trades;1===l.length?ue._drawTrade(ue._posnForTrade(l[0]),l[0].side,l[0]._idx):ue._drawTrade(ue._posnForTrade(l[0]),l[0].side,l[0]._idx)}var u=s["default"].active();u instanceof q["default"]&&ue._drawTrade(ue._posnForTrade(u),u.side,u._idx)}},_drawTrade:function(e,t,r){var n=void 0;s["default"].active()&&s["default"].active()instanceof q["default"]&&(n=s["default"].active());var a=n&&r===n._idx?10:8;ue._pulsateTrades&&(a+=4),ue.canvas.layers.chart.context.lineWidth=.8,ue.canvas.layers.chart.drawCircle(e,a+2,void 0,P["default"].theme.bg.toString()),ue.canvas.layers.chart.drawCircle(e,4,void 0,0==t?P["default"].theme["short"].toString().toString():P["default"].theme["long"].toString()),ue.canvas.layers.chart.drawCircle(e,a,P["default"].theme.text.toString()),ue.canvas.layers.chart.registerHoverarea(new y.Hoverarea("trade:"+r,{type:"circle",center:new m["default"](e.x,e.y),radius:8},{cursor:"pointer",compatibleTools:["crosshair"],callbacks:{hover:function(){s["default"].hover(d["default"].trades[r])},leave:function(){s["default"].blur(d["default"].trades[r])}}})),ue.canvas.layers.chart.context.lineWidth=1},_drawSAR:function(){ue.canvas.layers.chart.context.fillStyle=P["default"].theme.text.toString(),ue._visibleCandles.forEach(function(e){ue.canvas.layers.chart.context.fillRect(Math.round(ue.canvas.fields.price.x(e.Time)+ue._halfCandleWidth()-1),Math.round(ue.canvas.fields.price.y(e.calculations.SAR.value)),1,1)})},_drawVolume:function(){ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.volume.y.range()[0],P["default"].theme.guide.toString()),ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.volume.y.range()[1],P["default"].theme.guide.toString()),ue._visibleCandles.forEach(function(e){if(0!==e.Volume){var t=e.Candle.Open<e.Candle.Close;ue.canvas.layers.chart.context.fillStyle=t?P["default"].theme.longFill.toString():P["default"].theme.shortFill.toString(),ue.canvas.layers.chart.context.strokeStyle=t?P["default"].theme["long"].toString():P["default"].theme["short"].toString().toString();var r=[ue.canvas.fields.volume.xSharp(e.Time),ue.canvas.fields.volume.ySharp(0),f["default"].config.candleWidth-1,ue.canvas.fields.volume.ySharp(e.Volume)-ue.canvas.fields.volume.ySharp(0)];ue.canvas.layers.chart.context.fillRect.apply(ue.canvas.layers.chart.context,r),ue.canvas.layers.chart.context.strokeRect.apply(ue.canvas.layers.chart.context,r)}})},_drawRSI:function(){var e=f["default"].config.indicators.rsi.threshold,t=100-f["default"].config.indicators.rsi.threshold;ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.rsi.ySharp(100),P["default"].theme.guide.toString()),ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.rsi.ySharp(0),P["default"].theme.guide.toString()),ue.canvas.layers.chart.doWithClipMask(function(){this.context.beginPath(),this.drawRectangularPath(new m["default"](0,ue.canvas.fields.rsi.ySharp(e)),new m["default"](ue.canvas.layers.chart.context.canvas.width,ue.canvas.fields.rsi.ySharp(t))),this.context.closePath()},function(){this.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.rsi.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.rsi.ySharp(e.calculations.rsi)}},P["default"].theme.ta.channel.toString())}),ue.canvas.layers.chart.doWithClipMask(function(){this.context.beginPath(),this.drawRectangularPath(new m["default"](0,ue.canvas.fields.rsi.ySharp(0)),new m["default"](ue.canvas.layers.chart.context.canvas.width,ue.canvas.fields.rsi.ySharp(e))),this.drawRectangularPath(new m["default"](0,ue.canvas.fields.rsi.ySharp(t)),new m["default"](ue.canvas.layers.chart.context.canvas.width,ue.canvas.fields.rsi.ySharp(100))),this.context.closePath()},function(){this.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.rsi.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.rsi.ySharp(e.calculations.rsi)}},P["default"].theme.text.toString())}),ue.canvas.layers.chart.context.fillStyle=P["default"].theme.text.toString(),ue.canvas.layers.chart.context.fillText("RSI("+f["default"].config.indicators.rsi.periods+")",10,ue.canvas.fields.rsi.range.top+20)},_drawStochRSI:function(){ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.stochRSI.ySharp(100),P["default"].theme.guide.toString()),ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.stochRSI.ySharp(0),P["default"].theme.guide.toString()),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.stochRSI.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.stochRSI.y(100*e.calculations.stochRSI)}},P["default"].theme.text.toString()),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.stochRSI.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.stochRSI.y(100*e.calculations.stochRSIMA)}},P["default"].theme.ta.lines[2].toString()),ue.canvas.layers.chart.drawRectangle({x:8,y:ue.canvas.fields.stochRSI.range.top+8},{x:90,y:ue.canvas.fields.stochRSI.range.top+24},void 0,P["default"].theme.bg.opacify(.95).toString()),ue.canvas.layers.chart.drawText({x:10,y:ue.canvas.fields.stochRSI.range.top+16},"StochRSI("+f["default"].config.indicators.stochRSI.periods+")",P["default"].theme.text.toString())},_drawOBV:function(){ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.obv.y.range()[0],P["default"].theme.guide.toString()),ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.obv.y.range()[1],P["default"].theme.guide.toString()),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.obv.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.obv.ySharp(e.calculations.OBV)}},P["default"].theme.text.toString()),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.obv.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.obv.ySharp(e.calculations.OBVMA[f["default"].config.indicators.obv.maPeriods])}},P["default"].theme.ta.lines[2].toString()),ue.canvas.layers.chart.drawText({x:10,y:ue.canvas.fields.obv.range.top+16},"OBV("+f["default"].config.indicators.obv.maPeriods+")",P["default"].theme.text.toString())},_drawAroon:function(){ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.aroon.ySharp(0),P["default"].theme.guide.toString()),ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.aroon.ySharp(100),P["default"].theme.guide.toString()),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.aroon.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.aroon.ySharp(e.calculations.aroon.down)}},P["default"].theme["short"].toString().toString()),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.aroon.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.aroon.ySharp(e.calculations.aroon.up)}},P["default"].theme["long"].toString()),ue.canvas.layers.chart.context.globalAlpha=1,ue.canvas.layers.chart.context.fillStyle=P["default"].theme.text.toString(),ue.canvas.layers.chart.context.fillText("Aroon("+f["default"].config.indicators.aroon.periods+")",10,ue.canvas.fields.aroon.range.top+20)},_drawMACD:function(){ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.macd.range.top,P["default"].theme.guide.toString()),ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.macd.range.bottom,P["default"].theme.guide.toString());var e=0;ue._visibleCandles.forEach(function(t){var r=t.calculations.MACD.mainLine-t.calculations.MACD.signalLine,n=[ue.canvas.fields.macdHistogram.xSharp(t.Time),ue.canvas.fields.macdHistogram.range.top-.5+Math.round(f["default"].config.indicators.macd.height/2),f["default"].config.candleWidth-1,ue.canvas.fields.macdHistogram.ySharp(r)-ue.canvas.fields.macdHistogram.ySharp(0)],a=r>=0;a?r>e?ue.canvas.layers.chart.context.fillStyle=P["default"].theme["long"].toString():ue.canvas.layers.chart.context.fillStyle=P["default"].theme.bg.toString():e>r?ue.canvas.layers.chart.context.fillStyle=P["default"].theme["short"].toString().toString():ue.canvas.layers.chart.context.fillStyle=P["default"].theme.bg.toString(),ue.canvas.layers.chart.context.strokeStyle=0>r?P["default"].theme["short"].toString().toString():P["default"].theme["long"].toString(),ue.canvas.layers.chart.context.fillRect.apply(ue.canvas.layers.chart.context,n),ue.canvas.layers.chart.context.strokeRect.apply(ue.canvas.layers.chart.context,n),e=r});var t=f["default"].config.indicators.macd;ue.canvas.layers.chart.context.fillStyle=P["default"].theme.text.toString(),ue.canvas.layers.chart.context.fillText("MACD("+t.periods[0]+","+t.periods[1]+","+t.lag+")",10,ue.canvas.fields.macd.range.top+20),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.macd.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.macd.ySharp(e.calculations.MACD.mainLine)}},P["default"].theme.ta.lines[1].toString()),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(e){return{x:ue.canvas.fields.macd.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.macd.ySharp(e.calculations.MACD.signalLine)}},P["default"].theme.text.toString())},_drawDPO:function(){var e=ue.canvas.fields.dpo.ySharp(0);ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.dpo.range.top,P["default"].theme.guide.toString()),ue._drawHorizontalLine(ue.canvas.layers.chart.context,ue.canvas.fields.dpo.range.bottom,P["default"].theme.guide.toString());var t=ue._visibleCandles.filter(function(e){return null!==e.calculations.DPO});t.length>0&&(ue.canvas.layers.chart.doWithClipMask(function(){this.context.beginPath(),this.drawRectangularPath(new m["default"](0,e),new m["default"](ue.canvas.layers.chart.context.canvas.width,ue.canvas.fields.dpo.range.top)),this.context.closePath()},function(){this.drawLine(t,function(e){return{x:ue.canvas.fields.dpo.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.dpo.ySharp(e.calculations.DPO)}},P["default"].theme["long"].toString())}),ue.canvas.layers.chart.doWithClipMask(function(){this.context.beginPath(),this.drawRectangularPath(new m["default"](0,e),new m["default"](ue.canvas.layers.chart.context.canvas.width,ue.canvas.fields.dpo.range.bottom)),this.context.closePath()},function(){this.drawLine(t,function(e){return{x:ue.canvas.fields.dpo.xSharp(e.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.dpo.ySharp(e.calculations.DPO)}},P["default"].theme["short"].toString())}),ue.canvas.layers.chart.drawText({x:10,y:ue.canvas.fields.dpo.range.top+16},"DPO("+f["default"].config.indicators.dpo.period+")",P["default"].theme.text.toString()))},_drawEMAs:function(){[f["default"].config.indicators.ema.periods[0],f["default"].config.indicators.ema.periods[1],f["default"].config.indicators.ema.periods[2],f["default"].config.indicators.ema.periods[3],f["default"].config.indicators.ema.periods[4]].forEach(function(e,t){e&&ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(t){return{x:ue.canvas.fields.price.xSharp(t.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(t.calculations.EMA[e])}},P["default"].theme.ta.lines[t].toString())})},_drawSMAs:function(){[f["default"].config.indicators.sma.periods[0],f["default"].config.indicators.sma.periods[1],f["default"].config.indicators.sma.periods[2],f["default"].config.indicators.sma.periods[3],f["default"].config.indicators.sma.periods[4]].forEach(function(e,t){e&&ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(t){return{x:ue.canvas.fields.price.xSharp(t.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(t.calculations.SMA[e])}},P["default"].theme.ta.lines[t].toString())})},_drawIchimokuCloud:function(){for(var e=cryptowatch.periodInt*f["default"].config.indicators.ichimoku.kijunPeriod,t=ue.queue.getTimeRange(ue._timeBounds.start-10*e,ue._timeBounds.end),r=4,n={},a=[],i=t,o=Array.isArray(i),s=0,i=o?i:i[Symbol.iterator]();;){var c;if(o){if(s>=i.length)break;c=i[s++]}else{if(s=i.next(),s.done)break;c=s.value}var l=c,u=Math.min(l.calculations.ichimoku.senkouSpanA,l.calculations.ichimoku.senkouSpanB),d=Math.max(l.calculations.ichimoku.senkouSpanA,l.calculations.ichimoku.senkouSpanB),h=ue.canvas.fields.price.x(l.Time)+ue._halfCandleWidth()+ue._fullCandleWidth()*f["default"].config.indicators.ichimoku.kijunPeriod;if(!(0>h)){u=ue.canvas.fields.price.ySharp(u),d=ue.canvas.fields.price.ySharp(d);var p=l.calculations.ichimoku.senkouSpanA>l.calculations.ichimoku.senkouSpanB,g=p?P["default"].theme.ta.senkouSpanA.toString():P["default"].theme.ta.senkouSpanB.toString();if(l.Time-n.time>cryptowatch.periodInt)for(var v=n.top-u,m=n.bottom-d,y=(l.Time-n.time-cryptowatch.periodInt)/cryptowatch.periodInt,w=0,x=n.time+cryptowatch.periodInt;x<l.Time;x+=cryptowatch.periodInt){var b,_=n.top-v*w,S=n.bottom-m*w;b=_>S&&p||S>_&&!p?P["default"].theme.ta.senkouSpanA.toString():P["default"].theme.ta.senkouSpanB.toString(),a.push({time:x,top:_,bottom:S,color:b}),w+=1/y}ue.canvas.layers.chart.drawLineSegment({x:h,y:d},{x:h,y:u},{color:g,alpha:.5}),n.x=h,n.time=l.Time,n.top=u,n.bottom=d}}a.forEach(function(e){var t=ue.canvas.fields.price.x(e.time)+ue._halfCandleWidth()+ue._fullCandleWidth()*f["default"].config.indicators.ichimoku.kijunPeriod;Math.floor(t)%r===0&&ue.canvas.layers.chart.drawLineSegment({x:t,y:e.bottom},{x:t,y:e.top},{color:e.color,alpha:.5})}),ue.canvas.layers.chart.drawLine(t,function(e){return{x:ue.canvas.fields.price.xSharp(e.Time)+ue._halfCandleWidth()+ue._fullCandleWidth()*f["default"].config.indicators.ichimoku.kijunPeriod,y:ue.canvas.fields.price.ySharp(e.calculations.ichimoku.senkouSpanA)}},P["default"].theme.ta.senkouSpanA.toString()),ue.canvas.layers.chart.drawLine(t,function(e){return{x:ue.canvas.fields.price.xSharp(e.Time)+ue._halfCandleWidth()+ue._fullCandleWidth()*f["default"].config.indicators.ichimoku.kijunPeriod,y:ue.canvas.fields.price.ySharp(e.calculations.ichimoku.senkouSpanB)}},P["default"].theme.ta.senkouSpanB.toString()),["tenkanSen","kijunSen","chikouSpan"].forEach(function(e){ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(t){return{x:ue.canvas.fields.price.xSharp(t.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(t.calculations.ichimoku[e])}},P["default"].theme.ta[e].toString())})},_drawZigZag:function(){var e=this,t=this.queue.crossQueueCalculations.zigzag[f["default"].config.indicators.zigzag.threshold];t[t.length-1],this.queue.last;this.canvas.layers.chart.drawLine(t,function(t){return{x:e.canvas.fields.price.x(t.time)+e._halfCandleWidth(),y:e.canvas.fields.price.y(t.price)}},P["default"].theme.text.toString())},_drawChandelierExit:function(){var e=ue._visibleCandles[ue._visibleCandles.length-1],t=e.calculations.chandelierExit["long"]>e.Candle.High,r=f["default"].config.indicators.chandelierExit.periods,n=f["default"].config.indicators.chandelierExit.atrs;ue.canvas.layers.chart.context.beginPath();for(var a=0;a<ue._visibleCandles.length;a++){var i=ue._visibleCandles[a],o=i.calculations.chandelierExit[r],s=i.calculations.ATR[r];if(void 0!==o&&(o["long"]=o.hi-n*s,o["short"]=o.lo+n*s,void 0!==o)){ue.canvas.layers.chart.context.strokeStyle=P["default"].theme.ta.channel.toString();var c={x:ue.canvas.fields.price.x(i.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(o["short"])},l={x:ue.canvas.fields.price.x(i.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(o["long"])};t?o["long"]>i.Candle.Close?ue.canvas.layers.chart.context.lineTo(l.x,l.y):(ue.canvas.layers.chart.context.stroke(),ue.canvas.layers.chart.context.closePath(),ue.canvas.layers.chart.context.beginPath(),ue.canvas.layers.chart.context.moveTo(c.x,c.y),t=!1):o["short"]<i.Candle.Close?ue.canvas.layers.chart.context.lineTo(c.x,c.y):(ue.canvas.layers.chart.context.stroke(),ue.canvas.layers.chart.context.closePath(),ue.canvas.layers.chart.context.beginPath(),ue.canvas.layers.chart.context.moveTo(l.x,l.y),t=!0)}}ue.canvas.layers.chart.context.stroke(),ue.canvas.layers.chart.context.closePath()},_drawKeltnerChannel:function(){var e=f["default"].config.indicators.ema.periods[0],t=function(t){return{x:ue.canvas.fields.price.xSharp(t.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(t.calculations.EMA[e]+t.calculations.ATR[f["default"].config.indicators.keltnerChannel.atrPeriod]*f["default"].config.indicators.keltnerChannel.atrs)}},r=function(t){return{x:ue.canvas.fields.price.xSharp(t.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(t.calculations.EMA[e])}},n=function(t){return{x:ue.canvas.fields.price.xSharp(t.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(t.calculations.EMA[e]-t.calculations.ATR[f["default"].config.indicators.keltnerChannel.atrPeriod]*f["default"].config.indicators.keltnerChannel.atrs)}};ue.canvas.layers.chart.drawDashedLine(ue._visibleCandles,r,P["default"].theme.ta.channel.toString(),{evenOddOffset:ue._visibleCandles[0].i}),ue.canvas.layers.chart.drawLine(ue._visibleCandles,t,P["default"].theme.ta.channel.toString()),ue.canvas.layers.chart.drawLine(ue._visibleCandles,n,P["default"].theme.ta.channel.toString())},_drawBollingerBands:function(){var e=f["default"].config.indicators.bollingerBands.period,t=f["default"].config.indicators.bollingerBands.stddevs;ue.canvas.layers.chart.drawDashedLine(ue._visibleCandles,function(t){
return{x:ue.canvas.fields.price.xSharp(t.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(t.calculations.SMA[e])}},P["default"].theme.ta.channel.toString(),{evenOddOffset:ue._visibleCandles[0].i}),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(r){return{x:ue.canvas.fields.price.xSharp(r.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(r.calculations.SMA[e]+r.calculations.stdDeviation[e]*t)}},P["default"].theme.ta.channel.toString()),ue.canvas.layers.chart.drawLine(ue._visibleCandles,function(r){return{x:ue.canvas.fields.price.xSharp(r.Time)+ue._halfCandleWidth(),y:ue.canvas.fields.price.ySharp(r.calculations.SMA[e]+r.calculations.stdDeviation[e]*-t)}},P["default"].theme.ta.channel.toString())},_crosshairInfoDOMElements:{},hideCrosshairInfo:function(){M["default"].statusBar.setProps({mode:null})},updateCursor:function(){if(ue.initialized){if("crosshair"===ue.tool){var e=s["default"].active();if(e instanceof q["default"])M["default"].statusBar.setProps({mode:"privateTrade",presenter:{trade:e,time:1e3*e.timestamp}});else if(e instanceof z.Order)M["default"].statusBar.setProps({mode:"privateOrder",presenter:{order:e,time:1e3*e.timestamp}});else if(e instanceof C["default"])M["default"].statusBar.setProps({mode:"removeAlert",presenter:{alert:e}});else if(_["default"].pending)M["default"].statusBar.setProps({mode:"setAlert",presenter:{alert:_["default"].pending}});else if(ue._focused){var t=J["default"].roundDownTo(ue.canvas.fields.price.x.invert(ue.canvas.cursor.state.posn.x),cryptowatch.periodInt);if(ue.selectedCandle=this.queue.closeTimeIndex[t],void 0===ue.selectedCandle)M["default"].statusBar.setProps({mode:null});else{ue.selectedCandle.Candle,g["default"].fmt;M["default"].statusBar.setProps({mode:"ohlc",presenter:{time:new Date(1e3*parseInt(t,10)),candle:{open:ue.selectedCandle.Candle.Open,high:ue.selectedCandle.Candle.High,low:ue.selectedCandle.Candle.Low,close:ue.selectedCandle.Candle.Close},volume:ue.selectedCandle.Volume}})}}}else this.updateToolTip();ue.refresh.axes()}},updateToolTip:function(){if("crosshair"!==this.tool){var e={line:"Click",extrapolator:"Click on line point",freeline:"Click",circle:"Click",horizontalLine:"Click",verticalLine:"Click",fibonnaciRetracement:"Click",fibonnaciFan:"Click",fibonnaciArc:"Click",arrow:"Click"}[ue.tool],t={line:"draw line",extrapolator:"extrapolate line",freeline:"draw free line",circle:"draw circle",horizontalLine:"draw horizontal line",verticalLine:"draw vertical line",fibonnaciRetracement:"draw fibonacci retracement",fibonnaciFan:"draw fibonacci fan",fibonnaciArc:"draw fibonacci arc",arrow:"draw arrow"}[ue.tool];M["default"].statusBar.setProps({mode:"tool",presenter:{prompt:e,action:t,canRightClick:L["default"].elements.length>0,shouldSnap:L["default"].shouldSnap(),altDown:B["default"].modifiers.alt}})}},_drawCrosshairX:function(){return ue._crosshairVisible.x||s["default"].hoveredItem instanceof q["default"]},_drawCrosshair:function(){if(ue.canvas.layers.crosshair.fill(P["default"].theme.bg.toString()),!ue.canvas.hoverHoverarea()||!ue.canvas.hoverHoverarea().opts.disableCrosshair)if("crosshair"===ue.tool){var e,t,r=s["default"].hoveredItem instanceof z.Order,n=s["default"].hoveredItem instanceof q["default"];s["default"].hoveredItem instanceof C["default"];r?e=ue.canvas.fields.price.x(J["default"].roundUpTo(s["default"].hoveredItem.timestamp,cryptowatch.periodInt)-cryptowatch.periodInt):n?e=ue._posnForTrade(s["default"].hoveredItem).x-ue._halfCandleWidth():(e=ue.canvas.fields.price.snapScreenX(ue.canvas.cursor.state.posn.x),t=Math.floor(ue.canvas.cursor.state.posn.y)+.5),ue._crosshairVisible.y&&t&&t<ue.canvas.layers.crosshair.height-oe&&ue.canvas.layers.crosshair.drawLineSegment({x:0,y:t},{x:ue.canvas.fields.price.range.right,y:t},{color:P["default"].theme.crosshair.toString()}),ue._drawCrosshairX()&&e&&e<ue._yAxisLeftBoundary()&&(f["default"].config.candleWidth>1&&(ue.canvas.layers.crosshair.context.globalAlpha=.5),ue.canvas.layers.crosshair.drawRectangle({x:e,y:0},{x:e+f["default"].config.candleWidth,y:ue._height()-oe},void 0,P["default"].theme.crosshair.toString()),ue.canvas.layers.crosshair.context.globalAlpha=1)}else"extrapolator"!==ue.tool&&void 0===L["default"].elemHovered&&(ue.canvas.cursor.state.snappedPosn&&L["default"].shouldSnap()?(this.canvas.layers.axes.drawCircle(this.canvas.cursor.state.snappedPosn,3,cryptowatch.colors.theme.text.toString(),void 0,{strokeAlpha:1}),ue.canvas.setCursorType("crosshair")):ue.canvas.setCursorType("dot"))},_drawYAxisLabel:function(e,t,r){var n=14,a=new m["default"](ue._yAxisLeftBoundary()+ce,t-n/2),i=new m["default"](a.x+this.canvas.layers.axes.context.measureText(e).width,a.y+n);ue.canvas.layers.axes.drawRectangle(a,i,void 0,P["default"].theme.bg.toString()),ue.canvas.layers.axes.context.fillStyle=r||P["default"].theme.text.toString(),ue.canvas.layers.axes.context.fillText(e,ue._yAxisLeftBoundary()+ce,t+4)},_drawYAxisTick:function(e,t){var r=ue._yAxisLeftBoundary();ue.canvas.layers.axes.context.strokeStyle=t||P["default"].theme.text.toString(),ue.canvas.layers.axes.context.beginPath(),ue.canvas.layers.axes.context.moveTo(r,e),ue.canvas.layers.axes.context.lineTo(r+6,e),ue.canvas.layers.axes.context.stroke(),ue.canvas.layers.axes.context.closePath()},_drawYAxisDashedLine:function(e,t){ue._drawDashedLine(ue.canvas.layers.axes.context,ue.canvas.fields.price.x(ue._currentCandle().Time)+ue._halfCandleWidth(),ue._yAxisLeftBoundary(),e,t||P["default"].theme.text.toString())},_drawOrdersOnYAxis:function(e){if(cryptowatch.account&&cryptowatch.account.hasAccess.annotations)for(var t=e,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if(n=t.next(),n.done)break;a=n.value}var i=a;this._drawOrderOnYAxis(i)}},_drawOrderOnYAxis:function(e){ue.canvas.layers.chart.context.lineWidth=.8;var t=s["default"].isActive(e),r={x:ue.canvas.fields.yaxis.xSharp(3),y:ue.canvas.fields.price.ySharp(e.price)},n="ask"==e.side?P["default"].theme["short"]:P["default"].theme["long"],a=P["default"].theme.text;if(e.doomed&&(n=n.desaturate(),a=a.opacify(.5)),!(r.y>ue.canvas.fields.price.unpaddedRange.bottom||r.y<ue.canvas.fields.price.unpaddedRange.top)){var i=8;if(t)if(i+=2,e.timestamp<=ue._timeBounds.end){var o=ue.canvas.fields.price.x(J["default"].roundUpTo(e.timestamp,cryptowatch.periodInt))+ue._halfCandleWidth()-ue._fullCandleWidth();ue._drawDashedLine(ue.canvas.layers.axes.context,o,ue.canvas.fields.yaxis.x(0),r.y,n),ue.canvas.layers.axes.drawLineSegment({x:o,y:r.y-3},{x:o,y:r.y+3},{color:n.toString()}),ue._crosshairVisible.x=!0}else ue._crosshairVisible.x=!1;if(ue.canvas.layers.axes.drawCircle(r,i,a.toString(),null),ue.canvas.layers.axes.drawCircle(r,4,n.toString(),P["default"].theme.bg.toString()),ue._roomForYAxisTick(r.y)||t||"crosshair"!==ue.tool){ue._yAxisTicksDrawn.push(r.y);t?P["default"].theme.textStrong.toString():P["default"].theme.text.toString();ue._drawYAxisLabel(g["default"].fmt(e.price,void 0,{label:!1}),r.y)}ue.canvas.layers.axes.registerHoverarea(new y.Hoverarea("order:"+e.Id,{type:"rect",left:ue.canvas.fields.yaxis.x(0),top:r.y-10,right:r.x+se,bottom:r.y+10,radius:9},{cursor:"pointer",compatibleTools:["crosshair"],callbacks:{hover:function(){s["default"].hover(e)},leave:function(){s["default"].blur(e)},click:function(){s["default"].select(e)}}})),ue.canvas.layers.chart.context.lineWidth=1}},_drawPotentialOrder:function(e){var t={x:ue.canvas.fields.yaxis.xSharp(3),y:ue.canvas.fields.price.ySharp(e.price)},r="ask"==e.side?P["default"].theme["short"].toString():P["default"].theme["long"].toString();if(t.y>ue.canvas.fields.price.unpaddedRange.bottom||t.y<ue.canvas.fields.price.unpaddedRange.top)return void ue.canvas.layers.animation.removeAnimation("pendingOrderDottedCircle");if(ue.canvas.layers.axes.drawCircle(t,6,void 0,P["default"].theme.bg.toString()),this.canvas.layers.animation.upsertAnimation("pendingOrderDottedCircle",this.canvas.layers.animation.animatedDashedCircle(t,{stroke:P["default"].theme.text.toString(),radius:8.5})),ue.canvas.layers.axes.drawCircle(t,4,r,P["default"].theme.bg.toString()),ue._roomForYAxisTick(t.y)){ue._yAxisTicksDrawn.push(t.y);P["default"].theme.textStrong.toString();ue._drawYAxisLabel(g["default"].fmt(e.price,void 0,{label:!1}),t.y)}},_drawAlertDash:function(e,t){ue.canvas.layers.axes.drawDashedHorizontalLineSegment(0,ue.canvas.fields.yaxis.x(0),e,P["default"].theme.alert.toString(),{alpha:t})},_drawAlerts:function(){_["default"].getItems().forEach(function(e){var t=ue.canvas.fields[e.subject],r=e.y(),n=r<=t.unpaddedRange.bottom&&r>=t.unpaddedRange.top;if(n){var a=s["default"].active()===e,i=e.triggered&&H.store.flashState;if(ue.canvas.layers.axes.drawTriangle({x:J["default"].sharpen(ue.canvas.fields.yaxis.range.left),y:J["default"].sharpen(r)},P["default"].theme.alert.toString(),"left"),(a||ue._roomForYAxisTick(r))&&(ue.canvas.layers.axes.drawText({x:ue._yAxisLeftBoundary()+ce,y:r},e.formattedY(),a?P["default"].theme.textStrong.toString():P["default"].theme.text.toString()),ue._yAxisTicksDrawn.push(r)),(a||i)&&ue._drawAlertDash(r,.5),i){var o=ue.canvas.fields.price.x(J["default"].roundUpTo(e.triggeredTime,cryptowatch.periodInt))-ue._halfCandleWidth()-f["default"].config.candles.spacing;ue.canvas.layers.axes.drawCircle({x:o,y:r},Math.round(ue._halfCandleWidth()+4),P["default"].theme.alert.toString())}ue.canvas.layers.axes.registerHoverarea(new y.Hoverarea("alert:"+e.field+":"+e.threshold,{type:"rect",left:ue.canvas.fields.yaxis.range.left,top:r-14,bottom:r+14,right:ue.canvas.fields.yaxis.range.right},{cursor:"pointer",disableCrosshair:!0,callbacks:{hover:function(){s["default"].hover(e)},leave:function(){s["default"].blur(e)},click:function(){e.cancel(),s["default"].blur(e),ue.canvas.scanHoverareas()}}}))}})},_tzoffset:void 0,_getTimeSpan:function(){return cryptowatch.periodInt*ue._candleCapacity()},_formatXAxisTime:function(e,t){var r=new Date(1e3*e),n=r.getHours(),a=r.getMinutes();switch(t){case 300:case 900:case 1800:case 3600:case 21600:case 43200:return 0===n&&0===a?Y["default"].printMonthAndDate(r):Y["default"].printTime(r);default:return Y["default"].printMonthAndDate(r)}},_setupYAxisHoverarea:function(){var e=ue.canvas.fields.yaxis.hoverarea;e.opts.callbacks.click=function(e){if("crosshair"===ue.tool){var t=_["default"].savePending();s["default"].hover(t),ue.refresh.axes(),ue.updateCursor(),ue.canvas.scanHoverareas(),"main"===cryptowatch.integration&&"true"!==localStorage.getItem("triggered-sms-promo")&&(localStorage.setItem("triggered-sms-promo","true"),S.triggerSMSPromoBaby(),H.store.callAttentionNTimes(3,!1)),ue.updateCursor()}},e.opts.callbacks.leave=function(){delete _["default"].pending},ue.canvas.layers.axes.registerHoverarea(e)},_drawXAxis:function(){var e=ue._xAxisStep;ue._getTimeSpan();if(ue.canvas.layers.axes.context.fillStyle=P["default"].theme.text.toString(),ue.canvas.layers.axes.context.strokeStyle=P["default"].theme.guide.toString(),ue.canvas.layers.axes.context.textAlign="center",ue._drawCrosshairX()&&"crosshair"===ue.tool){var t,r,n=0,a=-10,i=s["default"].active();if(i instanceof q["default"]||i instanceof z.Order?(t=J["default"].roundUpTo(i.timestamp,cryptowatch.periodInt),r=i.timestamp):(t=J["default"].roundDownTo(ue.canvas.fields.price.x.invert(ue.canvas.cursor.state.posn.x),cryptowatch.periodInt),r=t),t){var o,c=new Date(1e3*r);new Date(1e3*t);a=ue.canvas.fields.price.x(t)+ue._halfCandleWidth(),n=40,e>=86400?cryptowatch.periodInt>=86400?o=Y["default"].printMonthAndDate(c):(o=Y["default"].printMonthDateAndTime(c),n=70):o=Y["default"].printTime(c),ue.canvas.layers.chart.hoverareaState.hover&&ue.canvas.layers.chart.hoverareaState.hover.opts.disableCrosshair||(ue.canvas.layers.axes.context.fillText(o,a,ue._height()-10),ue.canvas.layers.axes.context.beginPath(),ue.canvas.layers.axes.context.moveTo(a,ue.canvas.layers.axes.height),ue.canvas.layers.axes.context.lineTo(a,ue.canvas.layers.axes.height-3),ue.canvas.layers.axes.context.closePath(),ue.canvas.layers.axes.context.stroke())}}if(ue._visibleCandles.length>0)for(var l=ue._xAxisTicks,u=Array.isArray(l),d=0,l=u?l:l[Symbol.iterator]();;){var h;if(u){if(d>=l.length)break;h=l[d++]}else{if(d=l.next(),d.done)break;h=d.value}var f=h;(!ue._crosshairEnabled()||"crosshair"!==ue.tool||!ue._drawCrosshairX()||Math.abs(f.x-a)>n)&&ue.canvas.layers.axes.context.fillText(f.print,f.x,ue._height()-10),ue.canvas.layers.axes.drawLineSegment(new m["default"](f.x,ue._height()),new m["default"](f.x,ue._height()-3),{color:P["default"].theme.text.toString()})}ue.canvas.layers.axes.context.textAlign="start"},highlightingPrice:void 0,tradeHovered:void 0,_drawYAxisForFieldManually:function(e,t,r){r=r||{};var n=ue._yAxisTicksDrawn;e:for(var a=0;a<t.length;a++){var i=t[a],o=i.field||e,s=o.ySharp(i.y);if(!(s<o.unpaddedRange.top||s>o.unpaddedRange.bottom)){ue._drawYAxisTick(s,i.color),i.dashedLine&&ue._currentCandleVisible()&&ue._drawYAxisDashedLine(s,i.color);for(var c=0;c<n.length;c++)if(Math.abs(s-n[c])<14)continue e;var l=i.y;r.formatter&&(l=r.formatter(l)),ue._drawYAxisLabel(l,s),n.push(s)}}},_drawYAxisForFieldAutomatically:function(e,t){t=t||{};for(var r=e.domain.bottom,n=e.domain.top,a=e.tickSize(t.spacing||50),i=J["default"].roundTo(r,a),o=J["default"].roundUpTo(n,a),s=(ue._yAxisLeftBoundary(),t.extraTicks||[]),c=i;o>=c;c+=a)s.push({y:c});ue._drawYAxisForFieldManually(e,s,t)},_roomForYAxisTick:function(e){for(var t=0;t<ue._yAxisTicksDrawn.length;t++){var r=ue._yAxisTicksDrawn[t];if(Math.abs(r-e)<14)return!1}return!0},_drawYAxis:function(){var e=ue._yAxisLeftBoundary();ue._yAxisTicksDrawn=[],ue.canvas.layers.axes.context.fillStyle=P["default"].theme.bg.toString(),ue.canvas.layers.axes.context.fillRect(e,ue._height()-oe+1,se,oe),ue._drawVerticalLine(ue.canvas.layers.axes.context,e-.5,P["default"].theme.guide.toString()),ue.canvas.layers.axes.context.fillStyle=P["default"].theme.text.toString(),f["default"].bottomIndicators.forEach(function(e){ue._clearIndicatorMargin(e)});var t=ue._currentCandle(),r=g["default"].convert(t.Candle.Close,cryptowatch.currencyPair.quote,g["default"].fiatPreference),n=t.Candle.Close<t.Candle.Open;if(ue.currentPriceOnAxis=ue.canvas.fields.priceConverted.ySharp(r),ue._visibleCandles.length>0&&!s["default"].active()&&"crosshair"===ue.tool&&ue._crosshairEnabled()&&ue.canvas.cursor.state.activeField&&ue.canvas.cursor.state.posn.y<ue.canvas.layers.chart.height-oe){var a,i,o=ue.canvas.cursor.state.posn.y,c=ue.canvas.cursor.state.activeFieldY;if(c){"price"===c.name?(i=ue.canvas.fields.priceConverted,a=i.y.invert(ue.canvas.cursor.state.posn.y),a=g["default"].fmt(a,ue._priceAxisCurrency,{label:!1})):(i=c,a=i.y.invert(ue.canvas.cursor.state.posn.y));var l=void 0,u=void 0;if("price"===c.name?(l=g["default"].fmt(ue.canvas.fields.price.y.invert(o),void 0,{label:!1,currentExchangePrecision:!0}),u=parseFloat(l)):(l=c.y.invert(o),"volume"===c.name&&(u=J["default"].amountToRoundedNumber(l),l=J["default"].amountToString(l))),"yaxis"===ue.canvas.cursor.state.activeFieldX.name){if(C["default"].fieldSupported(c.name)&&!(s["default"].active()instanceof C["default"]))if("price"===c.name||"volume"===c.name&&u>t.Volume){var h=J["default"].sharpen(ue.canvas.fields.yaxis.x(0)),p=J["default"].sharpen(ue.canvas.cursor.state.posn.y);ue.canvas.layers.axes.drawTriangle({x:h,y:p},P["default"].theme.alert.toString(),"left"),ue._drawAlertDash(ue.canvas.cursor.state.posn.y,.3),_["default"].pending=new C["default"](c.name,u),ue._drawYAxisLabel(l,ue.canvas.cursor.state.posn.y,P["default"].theme.textStrong.toString()),ue._yAxisTicksDrawn.push(ue.canvas.cursor.state.posn.y)}else delete _["default"].pending}else ue._crosshairVisible.y&&(ue._drawYAxisTick(ue.canvas.cursor.state.posn.y+.5),ue._drawYAxisLabel(l,ue.canvas.cursor.state.posn.y,P["default"].theme.textStrong.toString()),ue._yAxisTicksDrawn.push(ue.canvas.cursor.state.posn.y))}}var v=d["default"].potentialOrder();if(v?this._drawPotentialOrder(v):this.canvas.layers.animation.removeAnimation("pendingOrderDottedCircle"),ue._drawAlerts(),d["default"].orders&&f["default"].config.showOrders&&ue._drawOrdersOnYAxis(d["default"].orders),f["default"].shouldDraw.volume()&&(ue._drawYAxisForFieldAutomatically(ue.canvas.fields.volume,{spacing:25,extraTicks:[{y:t.Volume,dashedLine:!0,color:n?P["default"].theme["short"].toString().toString():P["default"].theme["long"].toString()}]}),ue.canvas.layers.axes.context.fillStyle=P["default"].theme.text.toString(),ue.canvas.layers.axes.context.fillText(window.i18n.volume,10,ue.canvas.fields.volume.range.top+20),ue.selectedCandle)){ue.canvas.layers.axes.context.fillStyle=P["default"].theme.textStrong.toString();var y=10+ue.canvas.layers.axes.context.measureText(window.i18n.volume).width+8,w=J["default"].amountToString(ue.selectedCandle.Volume);ue.canvas.layers.axes.context.fillText(w,y,ue.canvas.fields.volume.range.top+20)}if(f["default"].shouldDraw.rsi()&&f["default"].shouldDraw.rsi()&&ue._drawYAxisForFieldManually(ue.canvas.fields.rsi,[{y:t.calculations.rsi,dashedLine:!0,color:P["default"].theme.text.toString()},{y:f["default"].config.indicators.rsi.threshold},{y:100-f["default"].config.indicators.rsi.threshold}]),f["default"].shouldDraw.stochRSI()&&f["default"].shouldDraw.stochRSI()&&ue._drawYAxisForFieldManually(ue.canvas.fields.stochRSI,[{y:100*t.calculations.stochRSI,dashedLine:!0,color:P["default"].theme.text.toString()},{y:100*t.calculations.stochRSIMA,dashedLine:!0,color:P["default"].theme.ta.lines[2].toString()},{y:25},{y:50},{y:75}]),f["default"].shouldDraw.obv()){var x=t.calculations.OBVMA[f["default"].config.indicators.obv.maPeriods];ue._drawYAxisForFieldAutomatically(ue.canvas.fields.obv,{spacing:25,extraTicks:[{y:t.calculations.OBV,dashedLine:!0},{y:x,dashedLine:!0,color:P["default"].theme.ta.lines[2].toString()}]})}if(f["default"].shouldDraw.macd()){var b=t.calculations.MACD.mainLine-t.calculations.MACD.signalLine;ue.canvas.fields.macdHistogram.ySharp(0)-ue.canvas.fields.macdHistogram.ySharp(b);ue._drawYAxisForFieldAutomatically(ue.canvas.fields.macd,{spacing:25,extraTicks:[{y:t.calculations.MACD.mainLine,dashedLine:!0,color:P["default"].theme.ta.lines[1].toString().toString()},{y:t.calculations.MACD.signalLine,dashedLine:!0,color:P["default"].theme.text.toString()},{y:b,field:ue.canvas.fields.macdHistogram,dashedLine:!0,color:b>0?P["default"].theme["long"].toString():P["default"].theme["short"].toString()}]})}if(f["default"].shouldDraw.aroon()&&ue._drawYAxisForFieldManually(ue.canvas.fields.aroon,[{y:t.calculations.aroon.up,dashedLine:!0,color:P["default"].theme["long"].toString()},{y:t.calculations.aroon.down,dashedLine:!0,color:P["default"].theme["short"].toString().toString()},{y:30},{y:50},{y:70}]),f["default"].shouldDraw.dpo()){var S=this.queue.intervals[this.queue.intervals.length-1-Math.floor(f["default"].config.indicators.dpo.period/2)-1],k=S.calculations.DPO;ue._drawYAxisForFieldManually(ue.canvas.fields.dpo,[{y:k,dashedLine:!1,color:k>0?P["default"].theme["long"].toString():P["default"].theme["short"].toString()},{y:0,dashedLine:!1,color:P["default"].theme.text.toString().toString()}])}var T=s["default"].active();if(T instanceof q["default"]&&T.timestamp>=ue._timeBounds.start){var E=ue.canvas.fields.price.ySharp(T.price);ue.canvas.layers.axes.context.fillStyle=P["default"].theme.text.toString(),ue.canvas.layers.axes.context.fillText(g["default"].fmt(T.price,void 0,{label:!1}),ue._yAxisLeftBoundary()+ce,E+4),ue.canvas.layers.axes.context.fillStyle=[P["default"].theme["short"].toString().toString(),P["default"].theme["long"].toString()][T.side];var A=[P["default"].theme["short"].toString().toString(),P["default"].theme["long"].toString()][T.side];ue.canvas.layers.axes.drawLineSegment({x:ue.canvas.fields.yaxis.x(0),y:E},{x:ue.canvas.fields.yaxis.x(6),y:E},{color:A}),ue._yAxisTicksDrawn.push(E),ue._drawDashedLine(ue.canvas.layers.axes.context,ue.canvas.fields.price.x(T.timestamp)+ue._fullCandleWidth(),e,ue.canvas.fields.price.ySharp(T.price),1==T.side?P["default"].theme["long"].toString():P["default"].theme["short"].toString().toString())}if(ue.canvas.fields.price.includes.domain.y(t.Candle.Close)){if(ue.canvas.layers.axes.context.fillStyle=P["default"].theme.text.toString(),"crosshair"!==ue.tool||ue._roomForYAxisTick(ue.currentPriceOnAxis)){var M=g["default"].fmt(r,ue._priceAxisCurrency,{label:!1,currentExchangePrecision:!0}),R=14,O=new m["default"](ue._yAxisLeftBoundary()+ce,ue.currentPriceOnAxis-R/2),I=new m["default"](O.x+this.canvas.layers.axes.context.measureText(M).width,O.y+R);ue.canvas.layers.axes.drawRectangle(O,I,void 0,P["default"].theme.bg.toString()),ue.canvas.layers.axes.drawText({x:ue._yAxisLeftBoundary()+ce,y:ue.currentPriceOnAxis},M,P["default"].theme.textStrong)}var D=void 0,N=void 0;switch(f["default"].config.chartStyle){case"mountain":case"line":D=P["default"].theme.textStrong.toString(),N=ue._halfCandleWidth();break;default:D=n?P["default"].theme["short"].toString().toString():P["default"].theme["long"].toString(),N=ue._fullCandleWidth()}ue._currentCandleVisible()&&"heikenAshi"!==f["default"].config.chartStyle&&ue._drawDashedLine(ue.canvas.layers.axes.context,ue.canvas.fields.price.x(t.Time)+N,e,ue.currentPriceOnAxis,D),ue._yAxisTicksDrawn.push(ue.currentPriceOnAxis),ue.canvas.layers.axes.drawLineSegment({x:ue.canvas.fields.yaxis.x(0),y:ue.currentPriceOnAxis},{x:ue.canvas.fields.yaxis.x(6),y:ue.currentPriceOnAxis},{currentPriceLineColor:D})}ue._drawYAxisForFieldAutomatically(ue.canvas.fields.priceConverted,{spacing:50,ticksDrawn:ue._yAxisTicksDrawn,formatter:function(e){return g["default"].fmt(e,g["default"].fiatPreference,{label:!1,stripTrailingZeros:!0,roundUp:!0})}})},_drawHorizontalLine:function(e,t,r){t=Math.floor(t)+.5,e.strokeStyle=r,e.beginPath(),e.moveTo(0,t),e.lineTo(ue.canvas.layers.chart.width,t),e.stroke(),e.closePath()},_drawHorizontalLineUnderYAxis:function(e,t,r){t=Math.floor(t)+.5,e.strokeStyle=r,e.beginPath(),e.moveTo(0,t),e.lineTo(ue.canvas.layers.chart.width-se,t),e.stroke(),e.closePath()},_drawVerticalLine:function(e,t,r){e.strokeStyle=r,e.beginPath(),e.moveTo(t,0),e.lineTo(t,ue._height()),e.stroke(),e.closePath()},_drawDashedLine:function(e,t,r,n,a){var i=Math.min(J["default"].roundTo(t,4),J["default"].roundTo(r,4)),o=Math.max(J["default"].roundTo(t,4),J["default"].roundTo(r,4));if(e.globalAlpha=.5,e.strokeStyle=a,(o-i)/4>1e3)return void console.warn("Attempted to draw insanely long dashed line - refusing");e.beginPath();for(var s=i;o>=s;s+=4)e.moveTo(s,n),e.lineTo(s+2,n);e.closePath(),e.stroke(),e.globalAlpha=1},calculateDepthScales:function(e){ue.canvas.fields.yaxis?ue._yAxisDepthScaleY=d3.scale.linear().domain([0,e]).range([ue.canvas.fields.yaxis.range.left,ue.canvas.fields.yaxis.range.right]):delete ue._yAxisDepthScaleY},depthStairstepLine:function(e,t){var r=[],n=0;return t.forEach(function(t){var a=l["default"].orderbook.depthAtPrice(e,t.price);r.push({x:Math.floor(ue._yAxisDepthScaleY(n))+.5,y:Math.floor(ue.canvas.fields.price.y(t.price))+.5}),r.push({x:Math.floor(ue._yAxisDepthScaleY(a))+.5,y:Math.floor(ue.canvas.fields.price.y(t.price))+.5}),n=a}),r},drawDepthMirror:function(){if(ue.canvas.layers.depthMirror.clear(),l["default"].orderbook.valid()&&!(cryptowatch.periodInt>3600)&&O["default"].ordersToDraw){var e=Math.max(l["default"].orderbook.depthAtPrice("bid",O["default"].ordersToDraw.bids[O["default"].ordersToDraw.bids.length-1].price),l["default"].orderbook.depthAtPrice("ask",O["default"].ordersToDraw.asks[O["default"].ordersToDraw.asks.length-1].price));ue.calculateDepthScales(e),ue._yAxisDepthScaleY&&(f["default"].shouldDraw.yAxisDepth()&&ue.canvas.fields.yaxis.withClipMask(ue.canvas.layers.depthMirror,function(){ue.drawYAxisDepthLine(ue.depthStairstepLine("ask",l["default"].orderbook.accumSlice("ask",e)),P["default"].theme["short"].toString()),ue.drawYAxisDepthLine(ue.depthStairstepLine("bid",l["default"].orderbook.accumSlice("bid",e)),P["default"].theme["long"].toString())}),ue.canvas.layers.depthMirror.context.clearRect(0,ue.canvas.fields.price.unpaddedRange.bottom,ue.canvas.layers.chart.width,ue.canvas.layers.chart.height))}},drawYAxisDepthLine:function(e,t){ue.canvas.layers.depthMirror.drawLine(e,function(e){return e},t,{alpha:.7})},handleIntervalUpdate:function(e,t){t===cryptowatch.periodInt&&(ue._viewportChange(),ue.refresh.chart(),ue.updateCursor(),L["default"].refresh(ue))},_crosshairVisible:{x:!1,y:!1},_crosshairEnabled:function(){return!(ue.canvas.layers.chart.hoverareaState.hover&&ue.canvas.layers.chart.hoverareaState.hover.opts.disableCrosshair)},hideCrosshair:function(){ue._crosshairVisible.x=!1,ue._crosshairVisible.y=!1,ue.refresh.axes()},showCrosshair:function(){ue._crosshairVisible.x=!0,ue._crosshairVisible.y=!0},_minPosition:function(){return Math.round(-(ue._widthForIntervals()-100)/ue._fullCandleWidth())},_maxPosition:function(){return Math.round(ue.queue.intervals.length-ue._candleCapacity())},jumpToTrade:function(e){var t=J["default"].roundUpTo(e.timestamp,cryptowatch.periodInt);if(t<ue.queue.intervals[0].Time||t>ue.queue.last.Time)console.warn("out of range");else{var r=(ue._currentCandle().Time-t)/cryptowatch.periodInt;ue.setPosition(r-ue._candleCapacity()/2)}},setPosition:function(e){e=Math.round(e),ue.POSITION=e,ue._clipPosition(),ue._viewportChange(),X["default"].nextFrame(ue.refresh.all)},cachePosition:function(){sessionStorage.setItem("chart:position",ue.POSITION)},nudge:function(e){ue.setPosition(ue.POSITION+e)},setPositionByTime:function(e){var t=ue.queue.last.Time-e,r=t/cryptowatch.periodInt;ue.setPosition(r)},goToDefaultPosition:function(){ue.POSITION=ue._defaultPosition(),ue.nudge(0),ue.refresh.all()},_clipPosition:function(){ue.POSITION=Math.max(ue._minPosition(),ue.POSITION),ue.POSITION=Math.min(ue._maxPosition(),ue.POSITION)},tool:null,selectTool:function(e){ue.tool!==e&&(ue.tool=e,$("[data-tool]").removeClass("selected"),$('[data-tool="'+e+'"]').addClass("selected"),delete L["default"].pending,L["default"].refresh(),sessionStorage.setItem("tool",e),"crosshair"===e?ue.canvas.setDefaultCursorType("crosshair"):ue.canvas.setDefaultCursorType("dot"),ue.updateCursor(),L["default"].pending&&L["default"].refresh(),ue.refresh.axes())}};window.cryptowatch.chart=ue,ue=$.extend(ue,i["default"]),t["default"]=ue,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(51),i=n(a),o=r(20),s=n(o),c=r(12),l=n(c),u=r(5),d=n(u),h=r(101),f=n(h),p=r(50),g=r(8),v=n(g),m=r(17),y=n(m),w=r(79),x=r(16),b=n(x),_=r(111),S=n(_),k=r(54),C=n(k),T=30,E={initialize:function(){E.canvas=new w.MultiLayerCanvas("#history-scroller-container",{cursor:{pinchStep:10,disableContextMenu:!0}}).registerLayer("line","#price-history-line").registerLayer("window","#price-history-window").registerLayer("shadow","#price-history-shadow"),E.canvas.layers.line.resize=function(){E.enabled&&(E.calculateSeries(),E.refresh.all())},C["default"].on("viewport:resize",function(){E.enabled&&E.canvas.refreshSize()}),b["default"].on("change",function(){b["default"].config.showHistoryScroller?E.show():E.hide()}),E.calculateSeries(),E.refresh.all()},show:function(){document.querySelector("body").setAttribute("data-history-scroller",!0),E.canvas.refreshSize(),E.enabled=!0,C["default"].trigger("viewport:resize")},hide:function(){document.querySelector("body").setAttribute("data-history-scroller",!1),E.enabled=!1,C["default"].trigger("viewport:resize")},calculateSeries:function(){E.intervalQueue=v["default"].intervalQueues[cryptowatch.periodInt],E.intervals=E.intervalQueue.intervals;var e=E.intervals[0],t=E.intervals[E.intervals.length-1],r=E.intervals.map(function(e){return e.Candle.Close}),n=Math.max.apply(Math,r),a=Math.min.apply(Math,r);new f["default"](E.canvas,"line",{left:e.Time,right:t.Time,top:n,bottom:a},{top:0,bottom:E.canvas.layers.line.height-T,left:0,right:E.canvas.layers.line.width-80},{padding:{top:5,bottom:5}});var i=Math.round(E.canvas.layers.line.width/75);E.xAxisTicks=S["default"].calculateTimeTicks([_.TIME_TICK_OPTIONS["1_HOUR"],_.TIME_TICK_OPTIONS["12_HOUR"],_.TIME_TICK_OPTIONS["1_DAY"],_.TIME_TICK_OPTIONS["1_WEEK"],_.TIME_TICK_OPTIONS["1_MONTH"],_.TIME_TICK_OPTIONS["3_MONTH"],_.TIME_TICK_OPTIONS["6_MONTH"]],E.intervalQueue.timeRange,i)},setWindow:function(e,t){E.window=new i["default"](e,t),E.canvas&&E.enabled&&E.refresh.window()},nudgeWindow:function(e){var t=E.window.min,r=E.canvas.fields.line.x(E.window.min);r+=e;var n=E.canvas.fields.line.x.invert(r);n=d["default"].roundTo(n,cryptowatch.periodInt);var a=t-n;E.window.min-=a,E.window.max-=a,E.trigger("window:change",E.window.max)},centerWindowOn:function(e){var t=E.canvas.fields.line.x.invert(e),r=E.window.length;E.window.min=t-Math.round(r/2),E.window.max=E.window.min+r,E.trigger("window:change",E.window.max)},refresh:{all:function(){E.refresh.line(),E.refresh.window()},line:function(){E.canvas.layers.line.clear(),E.canvas.layers.line.drawLine(E.intervals,function(e){var t=new s["default"](E.canvas.fields.line.xSharp(e.Time),E.canvas.fields.line.ySharp(e.Candle.Close));return t},y["default"].theme.text.toString())},window:function(){var e=E.canvas.fields.line.xSharp(E.window.min),t=E.canvas.fields.line.xSharp(E.window.max);E.canvas.layers.window.clear(),E.canvas.layers.shadow.clear(),E.drawXAxis(),E.canvas.layers.shadow.drawRectangle(new s["default"](0,0),new s["default"](e,E.canvas.layers.window.height-T-1),null,y["default"].theme.bg.toString(),.7),E.canvas.layers.shadow.drawRectangle(new s["default"](t,0),new s["default"](E.canvas.layers.window.width,E.canvas.layers.window.height-T-1),null,y["default"].theme.bg.toString(),.7),E.canvas.layers.window.drawRectangle(new s["default"](e,0),new s["default"](t,E.canvas.layers.window.height-T),null,y["default"].theme.cta.toString(),.3),E.hoveringOverWindow?E.canvas.layers.shadow.drawLineSegment(new s["default"](e,E.canvas.layers.window.height-T+1),new s["default"](t,E.canvas.layers.window.height-T+1),{color:y["default"].theme.cta.toString(),width:4}):E.canvas.layers.shadow.drawLineSegment(new s["default"](e,E.canvas.layers.window.height-T-.5),new s["default"](t,E.canvas.layers.window.height-T-.5),{color:y["default"].theme.cta.toString(),width:1}),E.canvas.layers.window.resetHoverareas(),E.canvas.layers.window.registerHoverarea(new p.Hoverarea("window:bg",{type:"rect",left:0,right:E.canvas.layers.window.width,top:0,bottom:E.canvas.layers.window.height-T},{cursor:function(){return E.hoveringOverWindow?"grab":null},cursorActive:"grabbing",callbacks:{mousedown:function(e,t){E.hoveringOverWindow=!0,E.centerWindowOn(t.x)},drag:function(e,t,r){E.nudgeWindow(r.x)}}})),E.canvas.layers.window.registerHoverarea(new p.Hoverarea("window:middle",{type:"rect",left:e,right:t,top:0,bottom:E.canvas.layers.window.height-T},{cursor:"grab",cursorActive:"grabbing",callbacks:{drag:function(e,t,r){E.nudgeWindow(r.x)},hover:function(){E.hoveringOverWindow=!0,E.refresh.window()},leave:function(){E.hoveringOverWindow=!1,E.refresh.window()}}}))}},drawXAxis:function(){E.canvas.layers.window.drawHorizontalLine(E.canvas.layers.line.height-T-.5,{color:y["default"].theme.guide.toString()});for(var e=0;e<E.xAxisTicks.length;e++){var t=E.xAxisTicks[e],r=E.canvas.fields.line.xSharp(t.unix);E.canvas.layers.window.drawLineSegment(new s["default"](r,E.canvas.layers.line.height),new s["default"](r,E.canvas.layers.line.height-4),{color:y["default"].theme.text.toString()}),E.canvas.layers.window.drawText(new s["default"](r,E.canvas.layers.line.height-T/2),t.print,y["default"].theme.text.toString(),{align:"center"})}}};E=$.extend(E,l["default"]),t["default"]=E,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(5),i=(n(a),r(103)),o=n(i);t["default"]=React.createClass({displayName:"CurrentTime",getInitialState:function(){return{date:this.props.date}},componentDidMount:function(){var e=this;setInterval(function(){e.setState({date:new Date})},1e3)},render:function(){return React.createElement(o["default"],{
date:this.state.date,diffAgainst:this.props.lastTradeTime})}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(36),i=n(a),o=r(10);n(o);t["default"]=React.createClass({displayName:"NotificationsList",getInitialState:function(){return{}},renderNotificationItems:function(e){var t=this;return e.map(function(e,r){return React.createElement("div",{className:React.addons.classSet({"notification-item":!0,"notification--promo":e.promo}),"data-severity":e.severity,key:"notification:"+r},e.render(t.props.availableAPIs))})},renderActiveItemPlaceholder:function(){return React.createElement("div",{className:"notifications-placeholder"},i["default"]("no-triggered-notifications"))},renderUntriggeredItems:function(){return this.props.untriggeredItems.length>0?React.createElement("div",{id:"untriggered-notifications"},React.createElement("strong",{className:"notifications-header"},i["default"]("untriggered-alerts")),this.renderNotificationItems(this.props.untriggeredItems.slice(0).reverse())):React.createElement("div",{className:"notifications-placeholder"},i["default"]("alert-prompt"))},render:function(){return React.createElement("div",{className:"notification-list"},React.createElement("div",{id:"triggered-notifications"},this.props.triggeredItems.length>0?this.renderNotificationItems(this.props.triggeredItems.slice(0).reverse()):this.renderActiveItemPlaceholder()),this.renderUntriggeredItems())}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(10),i=n(a),o=r(65),s=r(41),c=n(s);t["default"]=React.createClass({displayName:"SnapshotDialog",getDefaultProps:function(){return{dataUrl:null,progressNumerator:0,progressDenominator:0}},render:function(){var e=new Date,t=[cryptowatch.market.slug.replace(":","-"),c["default"].printMonthAndDate(e).replace(/[,\ ]/,"-"),e.getYear()+1900,e.getHours()+1,e.getMinutes(),e.getSeconds()].join("-")+".png",r=void 0,n=void 0;return 0!==this.props.progressDenominator&&(n=React.createElement("div",{className:"snapshot--loading__prog"},React.createElement("div",{className:"snapshot--loading__prog__juice",style:{width:this.props.progressNumerator/this.props.progressDenominator*100+"%"}}))),r=this.props.dataUrl?React.createElement("a",{href:this.props.dataUrl,target:"_blank",onClick:function(){i["default"].increment("nav.snapshot.open"),o.trackEvent("snapshot","open",cryptowatch.market.slug)}},React.createElement("img",{src:this.props.dataUrl,width:"400",height:this.props.imageHeight})):React.createElement("div",{style:{width:400,height:this.props.imageHeight},className:"snapshot--loading"},n),React.createElement("div",{style:{height:this.props.imageHeight+100}},r,null!==this.props.dataUrl?React.createElement("div",null,React.createElement("div",{className:"snapshot__details"},"Snapshot taken at ",e.toString()),React.createElement("a",{className:"button",href:this.props.dataUrl,download:t,onClick:function(){i["default"].increment("nav.snapshot.download"),o.trackEvent("snapshot","download",cryptowatch.market.slug)}},"Download")):null)}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(41),i=n(a),o=r(5),s=n(o),c=r(11),l=n(c),u=r(63),d=(n(u),r(16)),h=n(d),f=r(36),p=n(f);t["default"]=React.createClass({displayName:"StatusBar",render:function(){var e=[];if(null===this.props.mode)return React.createElement("div",null);switch(this.props.mode){case"privateTrade":case"privateOrder":e.push(React.createElement("div",{className:"inline extra-space-right"},i["default"].printYearMonthDateAndTimeWithSeconds(this.props.presenter.time)));break;case"ohlc":}switch(this.props.mode){case"ohlc":var t=this.props.presenter.candle.close,r=this.props.presenter.candle.open,n=((t-r)/r*100).toFixed(3),a=void 0;n>0?a="+":0>n&&(a="-"),0===this.props.presenter.volume?e.push(React.createElement("div",{className:"inline"},React.createElement("strong",{className:"extra-space-right"},i["default"].printYearMonthDateAndTime(this.props.presenter.time)),React.createElement("strong",null,p["default"]("no-activity")))):e.push(React.createElement("div",{className:"inline"},React.createElement("strong",{className:"extra-space-right"},i["default"].printYearMonthDateAndTime(this.props.presenter.time)),React.createElement("div",{className:"inline"},p["default"]("crosshair-open")),React.createElement("strong",{className:"space-right"},l["default"].fmtPrice(this.props.presenter.candle.open,{label:!1,currentExchangePrecision:!0})),React.createElement("div",{className:"inline"},p["default"]("crosshair-high")),React.createElement("strong",{className:"space-right"},l["default"].fmtPrice(this.props.presenter.candle.high,{label:!1,currentExchangePrecision:!0})),React.createElement("div",{className:"inline"},p["default"]("crosshair-low")),React.createElement("strong",{className:"space-right"},l["default"].fmtPrice(this.props.presenter.candle.low,{label:!1,currentExchangePrecision:!0})),React.createElement("div",{className:"inline"},p["default"]("crosshair-close")),React.createElement("strong",{className:"space-right"},l["default"].fmtPrice(this.props.presenter.candle.close,{label:!1,currentExchangePrecision:!0})),React.createElement("div",{className:"inline"},a,React.createElement("strong",null,Math.abs(n)+"%"))));break;case"setAlert":e.push(React.createElement("div",{className:"inline"},React.createElement("strong",null,p["default"]("click-for",React.createElement("span",null,React.createElement("span",{"data-modifier":"alert"},p["default"]("alert")," "),React.createElement("strong",null,this.props.presenter.alert.description())))))),"main"===cryptowatch.integration&&(cryptowatch.session?cryptowatch.subscription.exists?cryptowatch.subscription.active?cryptowatch.account.hasPhone?e.push(React.createElement("div",{style:{marginTop:5}},"Alert will also be ",React.createElement("strong",null,"sent to your phone"))):e.push(React.createElement("div",{style:{marginTop:5}},React.createElement("strong",null,"Set up your phone number")," to also receive ",React.createElement("strong",null,"text message alerts"))):e.push(React.createElement("div",{style:{marginTop:5}},React.createElement("strong",null,"Renew your subscription")," to also receive ",React.createElement("strong",null,"text message alerts"))):e.push(React.createElement("div",{style:{marginTop:5}},React.createElement("strong",null,"Activate your account")," to also receive ",React.createElement("strong",null,"text message alerts"))):e.push(React.createElement("div",{style:{marginTop:5}},React.createElement("strong",null,"Create account")," to also receive ",React.createElement("strong",null,"text message alerts"))));break;case"removeAlert":e.push(React.createElement("div",null,React.createElement("span",{"data-modifier":"alert"},p["default"]("alert")," "),React.createElement("strong",null,this.props.presenter.alert.description()),React.createElement("span",null,". "),React.createElement("span",null,p["default"]("click-to-remove"))));break;case"privateTrade":var o=this.props.presenter.trade;e.push(React.createElement("div",{className:"inline"},React.createElement("div",{className:"inline","data-modifier":0===o.side?"short":"long"},React.createElement("span",null,0===o.side?p["default"]("sell"):p["default"]("buy")," ")),React.createElement("strong",null,l["default"].fmtAmount(o.amount)),React.createElement("span",null," @ "),React.createElement("strong",null,l["default"].fmtPrice(o.price)),React.createElement("span",null," for "),React.createElement("strong",null,l["default"].fmtPrice(o.amount*o.price))));break;case"privateOrder":var c=this.props.presenter.order;e.push(React.createElement("div",{className:"inline"},React.createElement("div",{className:"inline","data-modifier":"ask"===c.side?"short":"long"},React.createElement("span",null,"ask"===c.side?p["default"]("ask"):p["default"]("bid")," ")),React.createElement("strong",null,l["default"].fmtAmount(c.amount,{label:!0})),React.createElement("span",null," @ "),React.createElement("strong",null,l["default"].fmtPrice(c.price,{label:!0})),React.createElement("span",null," for "),React.createElement("strong",null,l["default"].fmtPrice(c.amount*c.price,{label:!0}))));break;case"depth":e.push(React.createElement("div",null,React.createElement("span",{"data-modifier":"long"},p["default"]("buy")," "),React.createElement("strong",null,l["default"].fmtAmount(this.props.presenter.buy.amount,{label:!0})),React.createElement("span",null," to raise price by "),React.createElement("strong",null,s["default"].percentageAsString(this.props.presenter.buy.change)),React.createElement("span",null," to "),React.createElement("strong",null,l["default"].fmtPrice(this.props.presenter.buy["final"],{label:!0})),React.createElement("span",null," for a cost of "),React.createElement("strong",null,l["default"].fmtPrice(this.props.presenter.buy.cost,{label:!0})))),e.push(React.createElement("div",null,React.createElement("span",{"data-modifier":"short"},p["default"]("sell")," "),React.createElement("strong",null,l["default"].fmtAmount(this.props.presenter.sell.amount,{label:!0})),React.createElement("span",null," to lower price by "),React.createElement("strong",null,s["default"].percentageAsString(this.props.presenter.sell.change)),React.createElement("span",null," to "),React.createElement("strong",null,l["default"].fmtPrice(this.props.presenter.sell["final"],{label:!0})),React.createElement("span",null," for a cost of "),React.createElement("strong",null,l["default"].fmtPrice(this.props.presenter.sell.cost,{label:!0}))));break;case"tool-hover":e.push(React.createElement("div",{className:"inline"},p["default"]("click-to-use",React.createElement("strong",null,p["default"](this.props.presenter.tool)))," "));break;case"tool-selected":e.push(React.createElement("div",{className:"inline"},p["default"]("using",React.createElement("strong",null,p["default"](this.props.presenter.tool)))));break;case"tool":e.push(React.createElement("div",{className:"inline"},React.createElement("strong",null,this.props.presenter.prompt)," to ",React.createElement("strong",null,this.props.presenter.action),"."));var u=[];this.props.presenter.canRightClick&&u.push(React.createElement("div",{className:"inline"},React.createElement("strong",null,"Right-click")," to remove last shape.")),this.props.presenter.altDown||(this.props.presenter.shouldSnap?u.push(React.createElement("div",{className:"inline"},React.createElement("strong",null,"Hold alt")," to disable snapping.")):u.push(React.createElement("div",{className:"inline"},React.createElement("strong",null,"Hold alt")," to enable snapping."))),e.push(React.createElement("div",null,u));break;case"fullscreenEnter":e.push(React.createElement("div",{className:"inline"},"Click",React.createElement("span",null," to "),React.createElement("strong",null,"enter fullscreen mode")));break;case"fullscreenExit":e.push(React.createElement("div",{className:"inline"},"Click",React.createElement("span",null," to "),React.createElement("strong",null,"exit fullscreen mode")));break;case"takeSnapshot":e.push(React.createElement("div",{className:"inline"},"Click",React.createElement("span",null," to "),React.createElement("strong",null,"take snapshot")));break;case"settings":e.push(React.createElement("div",{className:"inline"},"Click",React.createElement("span",null," to ",React.createElement("strong",null,"configure chart"))));break;default:e.push(React.createElement("div",null))}return React.createElement("div",null,e)},buildOverlayInfo:function(){for(var e=[],t=h["default"].overlays,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if(n=t.next(),n.done)break;a=n.value}var i=a;if(h["default"].shouldDraw[i]())switch(i){case"ema":var o=React.createElement("div",null,"ema");e.push(o)}}return e}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(80),i=n(a),o=r(103),s=n(o),c=r(62),l=n(c),u=r(16),d=n(u);t["default"]=React.createClass({displayName:"TradeFeed",getInitialState:function(){return{}},componentWillReceiveProps:function(e){if(this.props.trades){var t=this.props.trades[this.props.trades.length-1]._index,r=e.trades[e.trades.length-1]._index,n=-15*(r-t);this.setState({topOffset:n})}},componentDidUpdate:function(){var e=this;d["default"].shouldAnimateFeeds()&&this.state.topOffset&&this.state.topOffset<0&&setTimeout(function(){e.setState({topOffset:0})},10)},_tradeItems:function(){var e=this;if(this.props.trades){var t=0,r="long",n=void 0,a=this.props.trades.map(function(a,o){var c,u=void 0,d=e.props.trades[o+1],h=d?d.Price:0;a.Price===t?u=r:a.Price>t?u="long":a.Price<t&&(u="short");var f=new Date(1e3*a.Timestamp),p=React.createElement("li",{className:React.addons.classSet((c={trade:!0},c[u]=!0,c)),key:"publicTrade:"+o},React.createElement(l["default"],{price:a.Price,side:u,emphasis:{left:Math.floor(a.Price)!==Math.floor(h),right:a.Price!==h},fiatPreference:void 0,currentExchangePrecision:!0}),React.createElement(i["default"],{amount:a.Amount,currentExchangePrecision:!0}),React.createElement(s["default"],{date:f,diffAgainst:n}));return r=u,n=f,t=a.Price,p});return a.reverse()}},render:function(){var e=this._tradeItems(),t={};d["default"].config.performance.animateFeeds&&(t={top:this.state.topOffset||0});var r=React.addons.classSet({"top-offset-animate":0===this.state.topOffset,feed:!0});return React.createElement("div",{id:"trade-feed","data-touch-allow-scroll":"true"},React.createElement("div",{className:"scroller-screen"},React.createElement("div",{className:"scroller"},React.createElement("ul",{className:r,style:t},e))))}}),e.exports=t["default"]},,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(81),i=n(a);t["default"]=React.createClass({displayName:"APIAccessorAddFormSimple",getInitialState:function(){return{}},render:function(){var e=this;return React.createElement("div",null,this.state.error?React.createElement("error",null,this.state.error):null,React.createElement(i["default"],{xch:this.props.xch,onSuccess:function(){e.setState({error:null}),window.location=window.location},onError:function(t){e.setState({error:t})},onNetworkCallStart:function(){e.setState({error:null,posting:!0})},onNetworkCallEnd:function(){e.setState({posting:!1})}}),this.state.posting?React.createElement("center",null,"Connecting..."):null)}}),e.exports=t["default"]},,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(31),i=n(a),o=r(5),s=(n(o),r(158)),c=n(s),l=r(16),u=n(l),d=r(175),h=n(d),f=r(80),p=n(f),g=r(62),v=n(g),m=r(40),y=n(m),w=r(85),x=n(w),b=15;t["default"]=React.createClass({displayName:"orderbook",getInitialState:function(){var e=this.sliceBids(this.props.bids),t=this.sliceAsks(this.props.asks),r=this.sum(e),n=this.sum(t);return{initialized:!1,slicedBids:e,slicedAsks:t,bidSum:r,askSum:n}},squishBasedOnFmt:function(e){for(var t=[],r=e,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if(a=r.next(),a.done)break;i=a.value}var o=i,s=parseFloat(o.price.toFixed(cryptowatch.currencyPrecision[cryptowatch.currencyPair.quote]));if(0===t.length)t.push(new x["default"](s,o.amount));else if(t[t.length-1].price===s)t[t.length-1].amount+=o.amount;else{if(t.length===b)return t;t.push(new x["default"](s,o.amount))}}return t},sliceBids:function(e){return null===e?[]:this.squishBasedOnFmt(e)},sliceAsks:function(e){return null===e?[]:this.squishBasedOnFmt(e).reverse()},bestAsk:function(){return this.state.slicedAsks[b-1]},bestBid:function(){return this.state.slicedBids[0]},sum:function _(e){for(var _=0,t=e,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if(n=t.next(),n.done)break;a=n.value}var i=a;_+=i.amount}return _},componentWillReceiveProps:function(e){var t=this.sliceBids(e.bids),r=this.sliceAsks(e.asks),n=this.sum(t),a=this.sum(r);this.setState({slicedBids:t,slicedAsks:r,bidSum:n,askSum:a})},shouldComponentUpdate:function(e,t){return t.bidSum!==this.state.bidSum||t.askSum!==this.state.askSum||t.hoveredAsk!==this.state.hoveredAsk||t.hoveredBid!==this.state.hoveredBid},setHoveredOrders:function(e,t){this.setState({hoveredAsk:e,hoveredBid:t})},unsetHoveredOrders:function(){this.setState({hoveredAsk:null,hoveredBid:null})},generateOrderList:function(e,t){for(var r=this,n=[],a={asks:"short",bids:"long"}[t],o=function(){var o=e[s],c="asks"===t?e[s+1]:e[s-1],l=!1;if(c){var u=cryptowatch.currency.convert(c.price,cryptowatch.currencyPair.quote,r.props.fiatPreference),d=cryptowatch.currency.convert(o.price,cryptowatch.currencyPair.quote,r.props.fiatPreference);l=Math.floor(u)!==Math.floor(d)}else l=!0;var f=y["default"].orderAmountAtPrice(o.price);n.push(React.createElement("div",{key:t+":"+o.price,onMouseOver:function(){r.props.setCrosshair(o.price)},onMouseOut:function(){r.props.unsetCrosshair()},className:React.addons.classSet({"order-list-entry":!0,"order-list-entry--significant":r.props.isSignificantOrder(o.amount),"order-list-entry--with-controls":h["default"].trading,"in-shadow":!l})},React.createElement("li",{className:React.addons.classSet({highlight:o.price===r.state.hoveredAsk||o.price===r.state.hoveredBid})},React.createElement(v["default"],{price:o.price,emphasis:{left:l,right:!0},side:a,fiatPreference:void 0,currentExchangePrecision:!0}),React.createElement(p["default"],{amount:o.amount,currentExchangePrecision:!0}),h["default"].trading?0!==f?React.createElement("div",{className:"order-own-amount",onClick:function(){i["default"].select(y["default"].ordersByPrice[o.price][0])}},React.createElement(p["default"],{amount:f,currentExchangePrecision:!0})):React.createElement("div",{className:"order-add",onClick:function(e){var t={"short":"ask","long":"bid"}[a];i["default"].setOrderPlacerPrice(t,o.price)}},"+"):React.createElement("div",{className:"order-placeholder"},"-"))))},s=0;s<e.length;s++)o();return this.shouldAnimate()?React.createElement(c["default"],{component:"div",transitionName:"order-list-entry",enterTimeout:500,leaveTimeout:1500},n):React.createElement("div",null,n)},shouldAnimate:function(){return this.state.initialized&&u["default"].shouldAnimateFeeds()},render:function(){var e=this.generateOrderList(this.state.slicedBids,"bids"),t=this.generateOrderList(this.state.slicedAsks,"asks");return React.createElement("div",null,React.createElement("div",{className:"orders-list",id:"asks-list"},React.createElement("ul",{className:"feed"},t)),React.createElement("data",{id:"price-ticker"},cryptowatch.currency.fmt(cryptowatch.currency.convert(this.props.lastPrice,cryptowatch.currencyPair.quote,this.props.fiatPreference),this.props.fiatPreference,{currentExchangePrecision:!0})),React.createElement("div",{className:"orders-list",id:"bids-list"},React.createElement("ul",{className:"feed"},e)))}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(8),i=n(a),o=r(25),s=n(o),c=r(26),l=r(45),u=n(l);t["default"]=React.createClass({displayName:"periods_menu",getInitialState:function(){return{currentPeriod:cryptowatch.period}},render:function(){return React.createElement("div",null,this.props.periods.map(function(e){var t=React.addons.classSet({option:!0,current:this.state.currentPeriod===e}),r=cryptowatch.exchange.slug;return"bitbank"===cryptowatch.integration&&(r="bitbank"),React.createElement("a",{href:"/"+r+"/"+cryptowatch.currencyPair.slug+"/"+e,className:t,"data-period":e,"data-period-int":cryptowatch.intervalPeriods[e],rel:"nofollow",onClick:this._onclick,key:"periods:"+e},window.i18n[e])}.bind(this)))},_onclick:function(e){if(i["default"].readyForHotLoad){var t=e.target.getAttribute("data-period"),r=parseInt(e.target.getAttribute("data-period-int"));e.preventDefault(),cryptowatch.periodInt=r,cryptowatch.period=t,cryptowatch.periodTranslated=window.i18n[t],cryptowatch.chart.setPeriod(r,t),s["default"].savePreferenceInCookie("timePeriod",t),$("#current-period-name").text(window.i18n[t]),this.setState({currentPeriod:t}),u["default"].filterInvalid(),c.store.refresh();var n="/"+[cryptowatch.exchange.slug,cryptowatch.currencyPair.slug,t].join("/");s["default"].setPath(n)}}}),e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=React.createClass({displayName:"select",getInitialState:function(){return{value:this.props.defaultValue}},_onChange:function(e){var t=e.nativeEvent.target.value,r=this.props.options.filter(function(e){return e.value===t})[0];this.props.onChange(r),this.setState({value:t})},render:function(){return React.createElement("label",{className:"select-wrapper",htmlFor:"order-type"},React.createElement("select",{id:"order-type",value:this.state.value,onChange:this._onChange},this.props.options.map(function(e,t){return React.createElement("option",{value:e.value,key:t},e.label)})))}}),e.exports=t["default"]},function(e,t){"use strict";function r(){return 0!==u.length}function n(e,t){return e.classList?e.classList.add(t):i(e,t)||(e.className=e.className+" "+t),e}function a(e,t){return i(t)&&(e.classList?e.classList.remove(t):e.className=(" "+e.className+" ").replace(" "+t+" "," ").trim()),e}function i(e,t){return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=React.addons.TransitionGroup,c=17,l={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},u=[];!function(){if("undefined"!=typeof window){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete l.animationend.animation,"TransitionEvent"in window||delete l.transitionend.transition;for(var r in l)if(l.hasOwnProperty(r)){var n=l[r];for(var a in n)if(a in t){u.push(n[a]);break}}}}();var d=React.createClass({displayName:"TimeoutTransitionGroupChild",transition:function(e,t){var i=this.getDOMNode(),o=this.props.name+"-"+e,s=o+"-active",c=function(){a(i,o),a(i,s),t&&t()};r()?"enter"===e?this.animationTimeout=setTimeout(c,this.props.enterTimeout):"leave"===e&&(this.animationTimeout=setTimeout(c,this.props.leaveTimeout)):c(),n(i,o),this.queueClass(s)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,c))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(function(e){n(this.getDOMNode(),e)}.bind(this)),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.animationTimeout&&clearTimeout(this.animationTimeout)},componentWillEnter:function(e){this.props.enter?this.transition("enter",e):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e):e()},render:function(){return React.Children.only(this.props.children)}}),h=React.createClass({displayName:"TimeoutTransitionGroup",propTypes:{enterTimeout:React.PropTypes.number.isRequired,leaveTimeout:React.PropTypes.number.isRequired,transitionName:React.PropTypes.string.isRequired,transitionEnter:React.PropTypes.bool,transitionLeave:React.PropTypes.bool},getDefaultProps:function(){return{transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return React.createElement(d,{enterTimeout:this.props.enterTimeout,leaveTimeout:this.props.leaveTimeout,name:this.props.transitionName,enter:this.props.transitionEnter,leave:this.props.transitionLeave},e)},render:function(){return React.createElement(s,o({},this.props,{childFactory:this._wrapChild}))}});t["default"]=h,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(31),i=n(a),o=r(36),s=n(o),c=r(11),l=n(c),u=r(165),d=n(u),h=r(41),f=n(h);t["default"]=React.createClass({displayName:"ActiveOrdersTable",onMouseOver:function(e){i["default"].hover(e)},onMouseOut:function(e){i["default"].blur(e)},onClick:function(e){i["default"].select(e)},renderSpotOrder:function(e){var t=this,r=React.addons.classSet({"active-order-table__entry":!0,"active-order-table__entry--doomed":e.doomed});return React.createElement("div",{onMouseOver:function(){t.onMouseOver(e)},onMouseOut:function(){t.onMouseOut(e)},onClick:function(){t.onClick(e)},className:r},React.createElement("div",{className:"active-order-table__entry__row"},React.createElement("weak",null,f["default"].printYearMonthDateAndTimeWithSeconds(new Date(1e3*e.timestamp)))),React.createElement("div",{className:"active-order-table__entry__row"},React.createElement("span",{"data-modifier":"ask"===e.side?"short":"long"},"ask"===e.side?s["default"]("ask"):s["default"]("bid")," "),React.createElement("strong",null,l["default"].fmtAmount(e.amount,{label:!0})),React.createElement("span",null," @ "),React.createElement("strong",null,l["default"].fmtPrice(e.price,{label:!0}))),React.createElement("div",{className:"active-order-table__entry__close-button",onClick:function(r){r.stopPropagation(),t.props.cancelOrder(e)}},React.createElement("span",{className:"icon icon-cross"})))},ordersContent:function(){if(null===this.props.orders)return null;if("object"==typeof this.props.orders){if(0===this.props.orders.length)return React.createElement("div",{className:"active-order-table__empty-msg"},"You have no open orders");var e=this.props.orders.sort(function(e,t){return t.price-e.price});return e.map(this.renderSpotOrder)}},render:function(){return React.createElement("div",null,React.createElement("div",{className:"sidebar__col__header"},"My Orders"),React.createElement("div",null,this.ordersContent()),React.createElement(d["default"],{trades:this.props.trades}))}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(11),i=n(a),o=r(8);n(o);t["default"]=React.createClass({displayName:"BalancesDiagram",totalBalanceDisplay:function(){return i["default"].fmt(this.props.balance.quote+this.props.balance.base*this.props.currentPrice,cryptowatch.currencyPair.quote,{label:!1,currentExchangePrecision:!0})},render:function(){var e=i["default"].fmt(this.props.balance.base,cryptowatch.currencyPair.base,{label:!1,currentExchangePrecision:!0}),t=i["default"].fmt(this.props.balance.quote,cryptowatch.currencyPair.quote,{label:!1,currentExchangePrecision:!0}),r=this.props.balance.base*this.props.currentPrice,n=Math.max(r,this.props.balance.quote),a=r/n,o=this.props.balance.quote/n;return React.createElement("div",{className:"balances-diagram"},React.createElement("div",{className:"sidebar__col__header"},"My Funds",React.createElement("span",{style:{"float":"right"}},React.createElement("strong",null,this.totalBalanceDisplay()),React.createElement("span",null," ",cryptowatch.currencyPair.quote))),React.createElement("div",{className:"balances-diagram__container"},React.createElement("div",{className:"balances-diagram__col balances-diagram__col--base"},React.createElement("div",{className:"balances-diagram__balance-header"},React.createElement("strong",null,e),React.createElement("span",{style:{"float":"right"}},cryptowatch.currencyPair.base)),React.createElement("div",{className:"balances-diagram__gauge"},React.createElement("div",{className:"balances-diagram__juice",style:{height:100*a+"%"}}))),React.createElement("div",{className:"balances-diagram__col balances-diagram__col--quote"},React.createElement("div",{className:"balances-diagram__balance-header"},React.createElement("strong",null,t),React.createElement("span",{style:{"float":"right"}},cryptowatch.currencyPair.quote)),React.createElement("div",{className:"balances-diagram__gauge"},React.createElement("div",{className:"balances-diagram__juice",style:{height:100*o+"%"}})))))}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(31),i=n(a),o=r(8),s=n(o),c=r(5),l=(n(c),r(83)),u=n(l),d=r(11),h=(n(d),r(160)),f=n(h),p=r(164),g=n(p),v=r(163),m=n(v),y=r(162),w=n(y),x=r(52),b={spot:"Spot",margin:"Margin"};t["default"]=React.createClass({displayName:"Interface",getInitialState:function(){return{orderType:this.props.orderTypesSupported[0],stagedOrder:null,modifyingOrder:null,currentPrice:0}},componentDidMount:function(){var e=this;i["default"].on("orderPlacerPrice:set",function(t,r){"ask"===t?e.refs.askModule&&e.refs.askModule.setPrice(r).focusPrice():"bid"===t&&e.refs.bidModule&&e.refs.bidModule.setPrice(r).focusPrice()}),s["default"].on("trades:update",function(){e.setState({currentPrice:s["default"].currentPrice()})});var t=u["default"](function(){e.refs.askModule&&e.refs.askModule.updateDefaultPrice(),e.refs.bidModule&&e.refs.bidModule.updateDefaultPrice()},1e3);s["default"].on("orders:change",t)},componentDidUpdate:function(e,t){null!==t.stagedOrder&&null===this.state.stagedOrder?(this.props.stopStagingOrder(),this.recalculate()):null===t.stagedOrder&&null!==this.state.stagedOrder&&this.props.stageOrder(this.state.stagedOrder)},_onChangeOrderType:function(e){this.setState({orderType:e})},_getBalances:function(){return this.props.balances?this.props.balances[this.props.tradingType]:{base:0,quote:0}},_tradingTypeOptions:function(){return this.props.tradingTypesSupported.map(function(e){return{value:e,label:b[e]}})},_orderTypeOptions:function(){return this.props.orderTypesSupported.map(function(e){return{value:e,label:x.orderTypeNames[e]}})},recalculate:function(){this.refs.bidModule&&this.refs.bidModule.recalculateIfIdle(),this.refs.askModule&&this.refs.askModule.recalculateIfIdle()},_confirmStagedOrder:function(){this.props.placeOrder(this.state.stagedOrder)},_focusedModule:function(){return this.state.stagedOrder?this.state.stagedOrder.side:this.state.modifyingOrder?this.state.modifyingOrder.side:null},reset:function(){i["default"].deselect(this.state.modifyingOrder),this.setState({stagedOrder:null,modifyingOrder:null})},cancelOrder:function(e){i["default"].deselect(this.state.modifyingOrder),this.props.cancelOrder(e)},unstageOrder:function(){this.setState({stagedOrder:null,focusedModule:null})},stopModifyingOrder:function(){this.setState({modifyingOrder:null,focusedModule:null})},activeModule:function(e){return this.state.modifyingOrder&&this.state.modifyingOrder.side===e?"modification":this.state.stagedOrder&&this.state.stagedOrder.side===e?"confirmation":"placement"},renderModules:function(e){var t=this,r="ask"===e?this._getBalances().base:this._getBalances().quote;return React.createElement("div",{"data-module-side":e},this.state.modifyingOrder?React.createElement(m["default"],{order:this.state.modifyingOrder,reset:this.reset,progress:this.props.cancellationProgress,error:this.props.cancellationError,cancel:function(){t.cancelOrder(t.state.modifyingOrder)}}):null,this.state.stagedOrder?React.createElement(w["default"],{order:this.state.stagedOrder,progress:this.props.placementProgress,error:this.props.placementError,reset:this.reset,confirm:function(){t.props.placeOrder(t.state.stagedOrder)}}):null,React.createElement(g["default"],{ref:e+"Module",side:e,balance:r,balanceInitialized:!!this.props.balances,defaultPrice:this.props.defaultPrice,priceIncrement:this.props.priceIncrement,tradingType:this.props.tradingType,orderTypesSupported:this._orderTypeOptions(),tradingTypesSupported:this._tradingTypeOptions(),stageOrder:function(e){t.setState({stagedOrder:e})},disabled:this._focusedModule()&&this._focusedModule()!==e,
reset:this.reset,previewOrder:this.props.previewOrder,stopPreviewingOrder:this.props.stopPreviewingOrder,change:this.props.previewOrder}))},tradeComplete:function(){this.unstageOrder()},render:function(){return React.createElement("div",null,React.createElement("div",{id:"order-placement","data-ask-module":this.activeModule("ask"),"data-bid-module":this.activeModule("bid")},this.renderModules("ask"),this.renderModules("bid")),React.createElement(f["default"],{balance:this._getBalances(),currentPrice:this.state.currentPrice}))}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(52),i=r(5),o=(n(i),r(106)),s=n(o);t["default"]=React.createClass({displayName:"OrderConfirmer",render:function(){var e=this,t=void 0;return t=this.props.error?React.createElement("center",{className:"place-error"},this.props.error):this.props.progress?React.createElement("center",{className:"place-progress"},this.props.progress):React.createElement("div",{className:"place-buttons"},React.createElement("div",{className:React.addons.classSet({"place-button":!0,"place-button--neutral":!0,"place-button--right-half":!0}),onClick:this.props.reset},"Cancel"),React.createElement("div",{className:React.addons.classSet({"place-button":!0,"place-button--left-half":!0,"place-button--short":"ask"===this.props.order.side,"place-button--long":"bid"===this.props.order.side}),onClick:function(){e.props.confirm()}},a.sideActions[this.props.order.side])),React.createElement("div",{className:"order-confirmation-module"},React.createElement("h4",null,"Confirm order"),React.createElement(s["default"],{order:this.props.order}),t)}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(104),i=(n(a),r(105)),o=(n(i),r(166)),s=n(o),c=r(11),l=(n(c),r(52),r(37),r(5)),u=(n(l),r(106)),d=n(u);t["default"]=React.createClass({displayName:"OrderModifier",render:function(){var e=void 0;return e=this.props.error?React.createElement("center",{className:"place-error"},this.props.error):this.props.progress?React.createElement("center",{className:"place-progress"},this.props.progress):React.createElement("div",{className:"place-buttons"},React.createElement(s["default"],{text:"OK",onClick:this.props.reset,classModifiers:["small","left","neutral"]}),React.createElement(s["default"],{text:"Cancel Order",onClick:this.props.cancel,classModifiers:["short","small","right"]})),React.createElement("div",{className:"order-modification-module"},React.createElement("h4",null,"View order"),React.createElement(d["default"],{order:this.props.order}),e)}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(157),i=n(a),o=r(104),s=n(o),c=r(105),l=n(c),u=r(51),d=n(u),h=r(11),f=n(h),p=r(52),g=r(61),v=n(g),m=r(37),y=r(167),w=n(y),x=r(64),b=n(x),_=r(8),S=n(_),k=window.cryptowatch.minimumOrderSize;t["default"]=React.createClass({displayName:"OrderPlacer",mixins:[w["default"]],getInitialState:function(){return{amount:0,amountEntryTechnique:"slider",price:this.props.defaultPrice,defaultPrice:this.props.defaultPrice,tradingType:this.props.tradingTypesSupported[0],amountSliderRatio:.5,defaultAmountSliderRatio:.5,amountInputFocused:!1,customAmountEntered:!1,customPriceEntered:!1,orderType:this.props.orderTypesSupported[0],isHovered:!1,isFocused:!1}},componentDidMount:function(){var e=this;this._change=b["default"](function(){e.hasTheFloor()&&e.props.previewOrder(e.order())},100)},componentDidUpdate:function(e,t){var r=t.isFocused||t.isHovered,n=this.hasTheFloor();e.balance!==this.props.balance&&(this.state.amountEntryTechnique="slider",this.setState({amountEntryTechnique:"slider"}),this.recalculate(this.props.balance),this._change()),t.price===this.state.price&&t.amount===this.state.amount||(this.recalculate(),this._change(),this.state.price!==this.state.defaultPrice&&this.setState({customPriceEntered:!0})),this.props.disabled||(!r&&n?this.props.previewOrder(this.order()):r&&!n&&this.props.stopPreviewingOrder())},hasTheFloor:function(){return this.state.isFocused||this.state.isHovered},hasBeenManuallyModified:function(){return this.state.customAmountEntered||this.state.customPriceEntered},_maxAmount:function(){var e=arguments.length<=0||void 0===arguments[0]?this.props.balance:arguments[0],t=void 0;return t="ask"===this.props.side?e:S["default"].orderbook.depthForTotalCost("ask",e),0>t&&(t=0),t},_generateBalanceScale:function(e){this.state.balanceScale=d3.scale.linear().domain([0,1]).range([k,this._maxAmount(e)-k]),this.setState({balanceScale:this.state.balanceScale})},_balanceCurrency:function(){return{bid:cryptowatch.currencyPair.quote,ask:cryptowatch.currencyPair.base}[this.props.side]},_balanceValue:function(){return f["default"].fmt(this.props.balance,this._balanceCurrency(),{label:!1,currentExchangePrecision:!0})},_determineAmountIncrement:function(){try{var e=this._maxAmount();return e>100?10:e>10?1:e>1?.1:e>.1?.01:.001}catch(t){return 1}},_onAmountInputChange:function(e){var t=e!==this.state.amount;this.state.amount=e,this.setState({amount:e}),t&&this._updateSliderRatio()},_onAmountInputFocus:function(e){},_onAmountInputBlur:function(e){var t=this._maxAmount();this.state.amount>t&&(this.state.amount=Math.min(this.state.amount,this._maxAmount()),this.setState({customAmountEntered:!1})),this.state.amountInputFocused=!1,this.setState({amount:this.state.amount,amountFormatted:this.state.amount,amountInputFocused:!1}),this._updateSliderRatio(),this.recalculate()},_onPriceInputChange:function(e){this.setState({price:e})},setPrice:function(e){return this.state.price=e,this.setState({price:e}),this.refs.priceInput&&this.refs.priceInput.set(e),this},focusPrice:function(){var e=this;return this.refs.priceInput.focus(),setTimeout(function(){e.refs.priceInput.selectAll()},1),this},_updateSliderRatio:function(){var e=this._clipAmountSliderRatio(this.state.balanceScale.invert(this.state.amount));e=Math.max(Math.min(1,e),0),this.setState({amountSliderRatio:e}),this.refs.amountSlider.setState({value:e})},_onAmountSliderChange:function(e){this.state.amountSliderRatio=this._clipAmountSliderRatio(e),this.state.customAmountEntered=!1,this.setState({customAmountEntered:!1,amountSliderRatio:e,amountEntryTechnique:"slider"}),this.recalculate()},_clipAmountSliderRatio:function(e){return parseFloat(e.toFixed(2))},_calculateAmount:function(e,t){if("ask"===this.props.side)return Math.min(t,Math.max(0,this.state.balanceScale(e)));if("market"===this.state.orderType){var r=v["default"].orders.Asks[0].Price,n=k*r;return S["default"].orderbook.depthForTotalCost("ask",n+e*(t-n))}return k+e*((t-.01)/this.state.price-k)},recalculateIfIdle:function(){this.hasTheFloor()||this.recalculate(),this.updateMarketPrices()},updateMarketPrices:function(){var e=v["default"].pricesForAmount(this.state.amount,this.props.side);this.setState({marketPrices:e}),this._change()},recalculate:function(){var e=this.props.balance;this._generateBalanceScale(e);var t=this.state.amount;"slider"===this.state.amountEntryTechnique?(t=this._calculateAmount(this.state.amountSliderRatio,e),this.state.amount=t,this.setState({amount:t}),this.refs.amountInput.set(t)):this._updateSliderRatio(),this._change(),this.reformat()},updateDefaultPrice:function(){if(!this.hasBeenManuallyModified()){var e=v["default"].fairMarketPrice();this.setState({defaultPrice:e}),this.hasTheFloor()||this.setPrice(e)}},reformat:function(){this.state.amount&&!this.state.amountInputFocused&&this.setState({amountFormatted:cryptowatch.currency.fmt(this.state.amount,cryptowatch.currencyPair.base,{label:!1})})},stageOrder:function(){this.props.stageOrder(this.order())},_onChangeOrderType:function(e){this.setState({orderType:e})},order:function(){var e=void 0;return e="market"===this.state.orderType.value?this.state.marketPrices.finalp:this.state.price,new m.Order({price:e,amount:this.state.amount,side:this.props.side,type:this.state.orderType.value})},hasEnoughBalanceToTrade:function(){return this._maxAmount()>=2*k},shouldBeDisabled:function(){return this.props.disabled||!this.hasEnoughBalanceToTrade()},shouldBeSubmittable:function(){return this.state.price*this.state.amount>0},render:function(){var e=this,t=void 0;if("market"===this.state.orderType.value){if(this.state.marketPrices){var r=f["default"].fmtPrice(this.state.marketPrices.vwap),n=f["default"].fmtPrice(this.state.marketPrices.finalp);t=r!==n?React.createElement("div",null,React.createElement("div",null,r," ",React.createElement("weak",null,"(VWA)")),React.createElement("div",null,n," ",React.createElement("weak",null,"(Final)"))):React.createElement("div",null,r)}}else t=React.createElement(s["default"],{ref:"priceInput",className:"place-input--"+this.props.side,defaultValue:this.state.defaultPrice,formatter:function(e){return f["default"].fmtPrice(e,{label:!1,currentExchangePrecision:!0})},onChange:this._onPriceInputChange,onFocus:function(){e.setState({isFocused:!0})},onBlur:function(){e.setState({isFocused:!1})},getRange:function(){return new d["default"](0,1e5)},increment:this.props.priceIncrement});return React.createElement("div",{onMouseEnter:function(){e.setState({isHovered:!0})},onMouseLeave:function(){e.setState({isHovered:!1})},className:"order-placement-module"},React.createElement("div",{className:"order-placement__form"},React.createElement("table",{width:"100%"},React.createElement("tr",null,React.createElement("td",{width:"40%"},"Type"),React.createElement("td",null,React.createElement(i["default"],{options:this.props.orderTypesSupported,defaultValue:this.state.orderType,onChange:this._onChangeOrderType}))),React.createElement("tr",null,React.createElement("td",{width:"40%"},"Funds:"),React.createElement("td",null,React.createElement("span",null,this._balanceValue()," ",this._balanceCurrency()))),React.createElement("tr",null,React.createElement("td",{width:"40%"},"Amount:"),React.createElement("td",null,React.createElement(s["default"],{ref:"amountInput",className:"place-input--"+this.props.side,defaultValue:this.state.amount,formatter:function(e){return f["default"].fmtAmount(e,{label:!1,currentExchangePrecision:!0})},onChange:this._onAmountInputChange,onFocus:function(){e.setState({isFocused:!0})},onBlur:function(){e.setState({isFocused:!1})},increment:this._determineAmountIncrement(),onManualChange:function(){e.setState({amountEntryTechnique:"text"})},getRange:function(){return new d["default"](Math.min(k,e._maxAmount()),e._maxAmount())}}),React.createElement("span",null," ",cryptowatch.currencyPair.base),React.createElement(l["default"],{ref:"amountSlider",defaultValue:this.state.amountSliderRatio,onChange:this._onAmountSliderChange}))),React.createElement("tr",null,React.createElement("td",{width:"40%"},"Price:"),React.createElement("td",null,t)),React.createElement("tr",{className:"place-total"},React.createElement("td",{width:"40%"},"Total:"),React.createElement("td",null,f["default"].fmtPrice(this.state.amount*this.state.price,{currentExchangePrecision:!0})))),React.createElement("div",{className:"place-buttons"},this.hasEnoughBalanceToTrade()||!this.props.balanceInitialized?React.createElement("div",{className:React.addons.classSet({"place-button":!0,"place-button--fill-width":!0,"place-button--short":"ask"===this.props.side,"place-button--long":"bid"===this.props.side}),id:"place-"+this.props.side+"-button",disabled:!this.shouldBeSubmittable(),onClick:function(){e.shouldBeSubmittable()&&e.stageOrder()}},p.sideActions[this.props.side]):React.createElement("center",{style:{marginTop:5}},"Not enough balance"))),this.renderShadowIfDisabled())}}),e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(31),i=n(a),o=r(11),s=(n(o),r(41)),c=n(s),l=r(80),u=n(l),d=r(62),h=n(d);t["default"]=React.createClass({displayName:"TradeHistory",getInitialState:function(){return{}},_tradeItems:function(){var e=this;if(null===this.props.trades)return null;if(0===this.props.trades.length)return null;var t=function(){var t=e.props.trades.slice(0);return{v:t.map(function(e,r){var n=t[r+1],a=n?n.price:0;return React.createElement("li",{className:"my-trade",key:"privateTrade:"+r,onMouseEnter:function(){i["default"].hover(e)},onMouseLeave:function(){i["default"].blur(e)},onClick:function(){i["default"].jumpToTrade(e)}},React.createElement(h["default"],{price:e.price,side:["short","long"][e.side],emphasis:{left:Math.floor(e.price)!==Math.floor(a),right:e.price!==a},currentExchangePrecision:!0}),React.createElement(u["default"],{amount:e.amount,currentExchangePrecision:!0}),React.createElement("div",{className:"my-trade-time-ago live-timestamp",value:e.timestamp,title:new Date(1e3*e.timestamp).toString()},c["default"].ago(e.timestamp)))}).reverse()}}();return"object"==typeof t?t.v:void 0},render:function(){return React.createElement("div",{id:"my-trade-history","data-touch-allow-scroll":"true"},React.createElement("div",{className:"my-trade-history__title"},React.createElement("span",{style:{"float":"left"}},"My Trades"),this.props.trades&&this.props.trades.length>0?React.createElement("a",{href:"/account/data/trades/"+cryptowatch.exchange.slug+"/"+cryptowatch.currencyPair.slug,className:"my-trade-history-download",style:{"float":"right"},onClick:function(){}},"CSV ",React.createElement("span",{className:"icon icon-download"})):null),React.createElement("div",{className:"my-trade-history__list scroller-screen"},React.createElement("div",{className:"scroller"},React.createElement("ul",{className:"feed"},this._tradeItems()))))}}),e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=React.createClass({displayName:"OrderButton",render:function(){var e=["place-button"].concat(this.props.classModifiers.map(function(e){return"place-button--"+e}));return React.createElement("div",{className:e.join(" "),onClick:this.props.onClick},this.props.text)}}),e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]={renderShadowIfDisabled:function(){return this.shouldBeDisabled()?React.createElement("div",{onClick:this.props.reset,className:"order-placement-shadow"}):null}},e.exports=t["default"]},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(){r(this,e)}return e.prototype.getField=function(){return cryptowatch.chart.canvas.fields[this.field]},e.prototype.toJSON=function(){var e={};for(var t in this)e[t]=this[t];return e},e}();t["default"]=n,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var o=r(168),s=n(o),c=r(20),l=n(c),u=function(e){function t(r){a(this,t),e.call(this),this._posns=r,this.type="freeline"}return i(t,e),t.prototype.advance=function(e){e.equals(this._posns[this._posns.length-1])||this._posns.push(e)},t.prototype.draw=function(e){var t=this;e.canvas.layers.drawing.drawLine(this._posns,function(e){return cryptowatch.drawing.domainPosnToScreenPosn(e,{field:t.getField()})},cryptowatch.colors.theme.text.toString())},t.prototype.posns=function(){return[]},t.fromJSON=function(e){return new t(e._posns.map(function(e){return l["default"].fromJSON(e)}))},t}(s["default"]);t["default"]=u,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(20),o=n(i),s=r(108),c=n(s),l=r(5),u=n(l),d=function(){function e(t){a(this,e),this.posn=t,this.done=!0}return e.prototype.advance=function(){},e.prototype.posns=function(){return[this.posn]},e.prototype.draw=function(e){var t=c["default"].domainPosnToScreenPosn(new o["default"](0,this.posn.y),{field:this.getField()}),r=c["default"].domainPosnToScreenPosn(new o["default"](0,this.posn.y),{field:this.getField()});t.x=0,t.y=u["default"].sharpen(t.y),r.x=e.canvas.layers.drawing.width,r.y=u["default"].sharpen(r.y),e.canvas.layers.drawing.drawLineSegment(t,r)},e.fromJSON=function(t){var r=new e(o["default"].fromJSON(t.posn));return r.done=!0,r.stage=1,r.field=t.field,r},e}();t["default"]=d,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(20),o=n(i),s=r(108),c=n(s),l=r(5),u=n(l),d=function(){function e(t){a(this,e),this.posn=t,this.done=!0,this.alwaysSnap=!0}return e.prototype.advance=function(){},e.prototype.posns=function(){return[this.posn]},e.prototype.draw=function(e){var t=c["default"].domainPosnToScreenPosn(new o["default"](this.posn.x,0),{field:this.getField()}),r=c["default"].domainPosnToScreenPosn(new o["default"](this.posn.x,0),{field:this.getField()});t.x=u["default"].sharpen(t.x),t.y=0,r.x=u["default"].sharpen(r.x),r.y=e.canvas.layers.drawing.height,e.canvas.layers.drawing.drawLineSegment(t,r)},e.fromJSON=function(t){var r=new e(o["default"].fromJSON(t.posn));return r.done=!0,r.stage=1,r.field=t.field,r},e}();t["default"]=d,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(145),i=n(a),o=r(149),s=n(o),c=r(8),l=n(c),u=r(11),d=n(u);t["default"]={initialize:function(){var e=this;cryptowatch.disable.feeds||(this.currentTime=React.render(i["default"]({date:new Date}),document.getElementById("current-time")),this.tradeFeedInterface=React.render(s["default"]({fiatPreference:d["default"].fiatPreference}),document.getElementById("public-trades-feed-container")),l["default"].on("trades:update",function(t){e.tradeFeedInterface.setProps({trades:t}),e.currentTime.setProps({lastTradeTime:new Date(1e3*t[t.length-1].Timestamp)})}),d["default"].on("fiatPreference:change",function(t){e.tradeFeedInterface.forceUpdate()}),this.tradeFeedInterface.setProps({trades:l["default"].trades}))}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(10),o=n(i),s=function(){function e(t,r){var n=this;a(this,e),this.name=t,this.elem=document.querySelector(r),this.closeButton=document.createElement("div"),this.closeButton.className="alert-window__close-button",this.closeButton.onclick=function(){n.close()};for(var i=this.elem.querySelectorAll("[data-close]"),o=i,s=Array.isArray(o),c=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(c>=o.length)break;l=o[c++]}else{if(c=o.next(),c.done)break;l=c.value}var u=l;u.onclick=function(){n.close()}}this.elem.appendChild(this.closeButton)}return e.prototype.localStorageKey=function(){return"nav:alert-window:"+this.name+":seen"},e.prototype.open=function(){document.querySelector("#alert-window-container").setAttribute("data-open",this.name),this.elem.setAttribute("data-open",!0),o["default"].increment("nav.alert-window."+this.name+".open")},e.prototype.openOnce=function(){null===localStorage.getItem(this.localStorageKey())&&this.open()},e.prototype.close=function(){document.querySelector("#alert-window-container").removeAttribute("data-open"),this.elem.removeAttribute("data-open"),o["default"].increment("nav.alert-window."+this.name+".close"),localStorage.setItem(this.localStorageKey(),!0)},e}();t["default"]=s,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0;var r=800;t.NoResponse=r;var n=801;t.NetworkProblem=n;var a=802;t.UnauthenticatedRequest=a;var i=803;t.RateLimited=i;var o=804;t.UnprivilegedKey=o;var s=805;t.InvalidKey=s;var c=820;t.Internal=c;var l=821;t.Unknown=l;var u=900;t.NotEnoughBalance=u;var d=901;t.InvalidOrderId=d},function(e,t){"use strict";t.__esModule=!0;document.querySelector("body");t["default"]={trading:cryptowatch.account.hasAccess.trading},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(85),o=n(i),s=r(49),c=n(s),l=r(51),u=n(l),d=(new c["default"]("accumSlice"),function f(e){a(this,f),this.set=e.set||[],this.remove=e.remove||[],this.delta=e.delta||[]});t.OrderbookDiff=d;var h=function(){function e(t,r){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];a(this,e),this.sorted={bids:!1,asks:!1},this.bids=[],this.asks=[],this._priceToAmountIndex={},this._accumulatedValuesIndex={},n.depth=n.depth||.2,this.opts=n,this.set("bid",t),this.set("ask",r),this.sort(),this.trim(),this.calculateAccumulatedValues("bid"),this.calculateAccumulatedValues("ask")}return e.prototype.get=function(e){switch(e.toLowerCase()){case"bid":case"bids":case"buy":return this.bids;case"ask":case"asks":case"sell":return this.asks}},e.prototype.getByPrice=function(e){return this._priceToAmountIndex[e]},e.prototype.apply=function(e,t){this.set(e,t.set),this.remove(e,t.remove),this.delta(e,t.delta),this.sort(e),this.trim(e)},e.prototype.set=function t(e,r){for(var n=r,a=Array.isArray(n),i=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(i>=n.length)break;s=n[i++]}else{if(i=n.next(),i.done)break;s=i.value}var t=s,c=this.getByPrice(t.price);if(c)c.amount=t.amount;else{var l=new o["default"](t.price,t.amount);switch(this._priceToAmountIndex[l.price]=l,e){case"bid":this.bids.push(l),this.sorted.bids=!1;break;case"ask":this.asks.push(l),this.sorted.asks=!1}}}},e.prototype.remove=function r(e,t){for(var n=t,a=Array.isArray(n),i=0,n=a?n:n[Symbol.iterator]();;){var o;if(a){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var r=o,s=this.getByPrice(r.price),c=void 0;if(s){switch(e){case"bid":if(c=this.bids.indexOf(s),-1===c)return;this.bids.splice(c,1);break;case"ask":if(c=this.asks.indexOf(s),-1===c)return;this.asks.splice(c,1)}delete this._priceToAmountIndex[r.price]}}},e.prototype.delta=function n(e,t){for(var r=t,a=Array.isArray(r),i=0,r=a?r:r[Symbol.iterator]();;){var o;if(a){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var n=o,s=this.getByPrice(n.price);s&&(s.amount+=n.amount)}},e.prototype.sort=function(e){void 0!==e&&"bid"!=e||this.sorted.bids||(this.bids=this.bids.sort(function(e,t){return t.price-e.price}),this.sorted.bids=!0),void 0!==e&&"ask"!=e||this.sorted.asks||(this.asks=this.asks.sort(function(e,t){return e.price-t.price}),this.sorted.asks=!0)},e.prototype.trim=function(e){var t=this;if(this.sort(e),void 0===e||"bid"==e){if(0===this.bids.length)return;var r=this.bids[0],n=this.bids[this.bids.length-1],a=r.price*(1-this.opts.depth);if(!(n.price<a))return;for(var i=-1,o=0;o<this.bids.length;o++)if(this.bids[o].price<a){i=o;break}if(-1!==i)for(var s=this.bids.splice(i),c=s,l=Array.isArray(c),u=0,c=l?c:c[Symbol.iterator]();;){var d;if(l){if(u>=c.length)break;d=c[u++]}else{if(u=c.next(),u.done)break;d=u.value}var h=d;delete this._priceToAmountIndex[h.price]}}if(void 0===e||"ask"==e){var f,p,g,v,m=function(){if(0===t.asks.length)return{v:void 0};var e=t.asks[0],r=t.asks[t.asks.length-1],n=e.price*(1+t.opts.depth);if(!(r.price>n))return{v:void 0};for(var a=-1,i=0;i<t.asks.length;i++)if(t.asks[i].price>n){a=i;break}if(-1!==a){var o=t.asks.splice(a);for(f=o,p=Array.isArray(f),g=0,f=p?f:f[Symbol.iterator]();;){if(p){if(g>=f.length)break;v=f[g++]}else{if(g=f.next(),g.done)break;v=g.value}var s=v;delete t._priceToAmountIndex[s.price]}}t.asks=t.asks.filter(function(e){return e.price<=n})}();if("object"==typeof m)return m.v}},e.prototype.calculateAccumulatedValues=function(e){this._accumulatedValuesIndex[e]={};var t=0,r=this.get(e);if(r)for(var n=0;n<r.length;n++){var a=r[n];t+=a.amount,this._accumulatedValuesIndex[e][a.price]=t}},e.prototype.squish=function(e){},e.prototype.accumSlice=function(e,t){var r=void 0,n=0,a=this.get(e);for(r=0;r<a.length;r++){var i=a[r];if(n+=i.amount,n>t)break}return a.slice(0,r)},e.prototype.depthForTotalCost=function(e,t){var r=0,n=0,a=this.get(e);if(!a)return 0;for(var i=0;i<a.length;i++){var o=a[i],s=o.price*o.amount;if(n==t)return r;if(s>t-n)return r+=o.amount*((t-n)/s);n+=s,r+=o.amount}return r},e.prototype.farthestOrderAtPrice=function(e){if(e<=this.bids[0].price){for(var t=0;t<this.bids.length-1;t++){var r=this.bids[t+1];if(r.price<e)return this.bids[t]}return this.bids[this.bids.length-1]}for(var t=0;t<this.asks.length-1;t++){var r=this.asks[t+1];if(r.price>e)return this.asks[t]}return this.asks[this.asks.length-1]},e.prototype.priceAtDepth=function(e,t){for(var r=0,n=0,a=this.get(e),i=0;i<a.length;i++){var o=a[i];if(n==t)return r;if(o.amount>t-n)return r+=(t-n)*o.price;r+=o.amount*o.price,n+=o.amount}return r},e.prototype.depthAtPrice=function(e,t){return this._accumulatedValuesIndex[e][t]},e.prototype.valid=function(){return this.asks&&this.asks.length>0&&this.bids&&this.bids.length>0&&this.asks[0].price>this.bids[0].price},e.prototype.bestBid=function(){return this.bids[0]},e.prototype.bestAsk=function(){return this.asks[0]},e.prototype.range=function(){return new u["default"](this.bids[this.bids.length-1].price,this.asks[this.asks.length-1].price)},e}();t["default"]=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(3),i=n(a);t["default"]={add:function(e){i["default"].post("/account/flags/"+e+"/add").type("form").end()},remove:function(e){i["default"].post("/account/flags/"+e+"/remove").type("form").end()}},e.exports=t["default"]},function(e,t){"use strict";function r(e,t){for(var r=!0;r;){var n=e,a=t;if(r=!1,n===a)return!0;if(n.parentNode===a)return!0;if(!n.parentNode)return!1;e=n.parentNode,t=a,r=!0}}t.__esModule=!0,t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(16),s=n(o),c=r(8),l=(n(c),r(182)),u=n(l),d=r(30),h=n(d),f=r(5),p=(n(f),r(49)),g=(n(p),r(51)),v=n(g),m=2e3,y=function(){function e(t,r){var n=this;a(this,e),this.intervals=t,this.period=r,this.closeTimeIndex={},this.last=this.intervals[this.intervals.length-1],this.filterOutInsanePrices(),this.cfg=s["default"].config.indicators,this.crossQueueCalculations={zigzag:{}},s["default"].on("indicator:ema:change",function(e){n.calculateAll("ema",{periods:e})}),s["default"].on("indicator:sma:change",function(e){n.calculateAll("sma",{periods:e})}),s["default"].on("indicator:atr:change",function(e){n.calculateAll("atr",{periods:e})}),s["default"].on("indicator:stdDeviation:change",function(e){n.calculateAll("stdDeviation",{periods:e})}),s["default"].on("indicator:chandelierExit:change",function(e){n.calculateAll("chandelierExit",{periods:e})}),s["default"].on("indicator:sar:change",function(){n.calculateAll("sar")}),s["default"].on("indicator:ichimoku:change",function(){n.calculateAll("ichimoku")}),s["default"].on("indicator:zigzag:change",function(e){u["default"].calculateZigZagPoints.call(n,e)}),s["default"].on("indicator:rsi:change",function(){n.calculateAll("rsi"),n.calculateAll("stochRSI",{periods:n.cfg.stochRSI.periods}),n.calculateAll("stochRSIMA",{periods:n.cfg.stochRSI.maPeriods})}),s["default"].on("indicator:stochRSI:change",function(e){n.calculateAll("stochRSI",{periods:e}),n.calculateAll("stochRSIMA",{periods:n.cfg.stochRSI.maPeriods})}),s["default"].on("indicator:stochRSIMA:change",function(e){n.calculateAll("stochRSIMA",{periods:e})}),s["default"].on("indicator:obvma:change",function(e){n.calculateAll("obvma",{periods:e})}),s["default"].on("indicator:dpo:change",function(e){n.calculateAll("dpo")}),s["default"].on("indicator:aroon:change",function(){n.calculateAll("aroon")}),s["default"].on("indicator:macd:change",function(){n.calculateAll("macd")});for(var i=this.intervals,o=Array.isArray(i),c=0,i=o?i:i[Symbol.iterator]();;){var l;if(o){if(c>=i.length)break;l=i[c++]}else{if(c=i.next(),c.done)break;l=c.value}var d=l;this.setupInterval(d)}}return e.prototype.setupInterval=function(e){void 0===e.calculations&&(e.calculations={EMA:{},SMA:{},stdDeviation:{},MACD:{},DPO:null,TR:0,ATR:{},SAR:{},OBV:0,OBVMA:{},chandelierExit:{}})},e.prototype.setActive=function(){var e=this;this.active=!0,this.indexAll(),this.analyzeAll(),setTimeout(function(){e.analyzeAll(!0)},10)},e.prototype.setInactive=function(){this.active=!1},e.prototype.indexAll=function(){for(var e=0;e<this.intervals.length;e++){var t=this.intervals[e];this.closeTimeIndex[t.Time]=t,t.i=e}},e.prototype.filterOutInsanePrices=function(){for(var e=0,t=this.intervals,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if(n=t.next(),n.done)break;a=n.value}var i=a;e+=i.Candle.High-i.Candle.Low}e/=this.intervals.length;for(var o=this.intervals,s=Array.isArray(o),c=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(c>=o.length)break;l=o[c++]}else{if(c=o.next(),c.done)break;l=c.value}var i=l,u=i.Candle,d=Math.max(u.Open,u.Close);u.High-d>50*e&&(h["default"].warn("Filtering out high value: "+u.High),u.High=d);var f=Math.min(u.Open,u.Close);f-u.Low>50*e&&(h["default"].warn("Filtering out low value: "+u.Low),u.Low=f),u.High/d>10&&(h["default"].warn("Filtering out low value: "+u.Low),u.High=d),f/u.Low>20&&(h["default"].warn("Filtering out low value: "+u.Low),u.Low=f)}},e.prototype.set=function(e){if(0===e.Candle.Open&&0===e.Candle.Close)return!1;var t=this.last;if(0===e.Volume&&(e.Candle={Open:t.Open,High:t.High,Low:t.Low,Close:t.Close}),e.Time===t.Time){var r=this.intervals[this.intervals.length-1];r.Candle=e.Candle,r.Volume=e.Volume,this.active&&this.analyze(r,!0)}else{var n=this.intervals.length-1;this.intervals.push(e),this.fillGapsFromIndex(n)}this.last=this.intervals[this.intervals.length-1]},e.prototype.sliceEndingAt=function(e,t){return this.intervals.slice(e-(t-1),e+1)},e.prototype.get=function(e,t){return void 0===t?this.intervals[e]:this.intervals.slice(e,t)},e.prototype.getTimeRange=function(e,t){for(var r=[],n=this.intervals,a=Array.isArray(n),i=0,n=a?n:n[Symbol.iterator]();;){var o;if(a){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var s=o;if(s.Time>e-cryptowatch.periodInt&&s.Time<=t&&r.push(s),s.Time>t)break}return r},e.prototype.sort=function(){this.intervals.sort(function(e,t){return e.Time-t.Time})},e.prototype.analyzeAll=function(){for(var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=this.intervals,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if(n=t.next(),n.done)break;a=n.value}var i=a;this.analyze(i,e)}},e.prototype.analyze=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(this.active){if(t||s["default"].shouldDraw.ema())for(var r=0;5>r;r++)this.calculate("ema",e,{periods:this.cfg.ema.periods[r]});if(t||s["default"].shouldDraw.sma())for(var r=0;5>r;r++)this.calculate("sma",e,{periods:this.cfg.sma.periods[r]});if((t||s["default"].shouldDraw.macd())&&(this.calculate("ema",e,{periods:this.cfg.macd.periods[0]}),this.calculate("ema",e,{periods:this.cfg.macd.periods[1]}),this.calculate("macd",e,{})),(t||s["default"].shouldDraw.bollingerBands())&&(this.calculate("sma",e,{periods:this.cfg.bollingerBands.period}),
this.calculate("stdDeviation",e,{periods:this.cfg.bollingerBands.period})),this.calculate("heikenAshi",e,{}),(t||s["default"].shouldDraw.aroon())&&this.calculate("aroon",e,{}),(t||s["default"].shouldDraw.keltnerChannel())&&this.calculate("atr",e,{periods:this.cfg.keltnerChannel.atrPeriod}),(t||s["default"].shouldDraw.sar())&&this.calculate("sar",e,{}),(t||s["default"].shouldDraw.rsi()||s["default"].shouldDraw.stochRSI())&&(this.calculate("rsi",e,{}),this.calculate("stochRSI",e,{periods:this.cfg.stochRSI.periods}),this.calculate("stochRSIMA",e,{periods:this.cfg.stochRSI.maPeriods})),(t||s["default"].shouldDraw.obv())&&(this.calculate("obv",e,{}),this.calculate("obvma",e,{periods:this.cfg.obv.maPeriods})),t||s["default"].shouldDraw.dpo()){var n=this.intervals[e.i-Math.floor(this.cfg.dpo.period/2)-1];n&&(this.calculate("sma",e,{periods:this.cfg.dpo.period}),this.calculate("dpo",n,{}))}(t||s["default"].shouldDraw.ichimoku())&&this.calculate("ichimoku",e,{}),(t||s["default"].shouldDraw.chandelierExit())&&(this.calculate("atr",e,{periods:this.cfg.chandelierExit.periods}),this.calculate("chandelierExit",e,{periods:this.cfg.chandelierExit.periods})),(t||s["default"].shouldDraw.zigzag())&&u["default"].calculateZigZagPoints.call(this,this.cfg.zigzag.threshold)}},e.prototype.calculate=function(e,t,r){u["default"][e].call(this,t,t.i,r)},e.prototype.calculateAll=function(e,t){for(var r=this.intervals,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if(a=r.next(),a.done)break;i=a.value}var o=i;this.calculate(e,o,t)}},e.prototype.fillGapsFromIndex=function(e){for(var t=this.intervals[e],r=e;r<this.intervals.length-1;r++){var n=this.intervals[r];this.closeTimeIndex[n.Time]=n;for(var a=this.intervals[r+1],i=(a.Time-n.Time-this.period)/this.period,o=1;i>=o;o++){var s={Time:n.Time+this.period*o,Candle:{Open:n.Candle.Close,High:n.Candle.Close,Low:n.Candle.Close,Close:n.Candle.Close},Volume:0};this.intervals.splice(r+o,0,s),this.closeTimeIndex[s.Time]=s}}this.intervals=this.intervals.slice(-m);for(var r=0;r<this.intervals.length;r++)this.intervals[r].i=r,this.setupInterval(this.intervals[r]);if(this.active)for(var r=t.i+1;r<this.intervals.length;r++)this.analyze(this.intervals[r],!0)},e.prototype._calculateHighLowProfile=function(){},i(e,[{key:"timeRange",get:function(){return new v["default"](this.intervals[0].Time,this.last.Time)}}]),e}();t["default"]=y,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var o=r(181),s=n(o),c=function(e){function t(r){a(this,t),e.call(this,r),this.host=cryptowatch.services.alert}return i(t,e),t.prototype.list=function(){return this.call("alerts/list",{market:cryptowatch.market.slug})},t.prototype.create=function(e){return this.call("alerts/create",e)},t.prototype.update=function(e){return this.call("alerts/update",e)},t.prototype["delete"]=function(e){return this.call("alerts/delete",e)},t}(s["default"]);t["default"]=c,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(3),o=n(i),s=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];a(this,e),this.version=t.version||1}return e.prototype.call=function(e,t){var r="";return r+="production"===cryptowatch.env?"https://":"http://",r+=this.host,r+="/v"+this.version+"/",r+=e,new Promise(function(e,n){o["default"].post(r).type("json").set("X-Cryptowatch-User-Id",cryptowatch.session.userId).set("X-Cryptowatch-Session-Token",cryptowatch.session.token).set("X-Cryptowatch-Session-MFAToken",cryptowatch.session.mfaToken).set("X-Cryptowatch-Session-Expires",cryptowatch.session.expires).send(t).end(function(t,r){r&&r.ok?e(r):n(t)})})},e}();t["default"]=s,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(16),i=n(a),o=r(30),s=n(o),c=!1,l={ema:function(e,t,r){if(null!==r.periods&&!(r.periods<=0))if(t<r.periods)this.intervals[t].calculations.EMA[r.periods]=e.Candle.Close;else{var n=void 0,a=this.get(t-1).calculations;if(a){var i=2/(r.periods+1);n=a?a.EMA[r.periods]:0}else n=e.Candle.Close,c||(s["default"].warn("Previous interval not found in EMA calculation for i="+t+" periods="+r.periods+" pi="+cryptowatch.periodInt,{persist:!0}),c=!0);this.intervals[t].calculations.EMA[r.periods]=(e.Candle.Close-n)*i+n}},sma:function(e,t,r){var n=r.periods;if(t<r.periods)return void(this.intervals[t].calculations.SMA[r.periods]=e.Candle.Close);for(var a=this.sliceEndingAt(t,r.periods),i=0,o=0;o<a.length;o++)i+=a[o].Candle.Close;i/=n,this.intervals[t].calculations.SMA[r.periods]=i},stdDeviation:function(e,t,r){if(void 0===this.intervals[t].calculations.SMA[r.periods])throw new Error("Ordering error: SMA not calculated yet");if(!(t<r.periods)){for(var n=this.sliceEndingAt(t,r.periods),a=d3.mean(n.map(function(e){return e.Candle.Close})),i=0,o=0;o<n.length;o++)i+=Math.pow(n[o].Candle.Close-a,2);i/=r.periods,e.calculations.stdDeviation[r.periods]=Math.sqrt(i)}},macd:function(e,t){var r=this.get(t-1),n=this.intervals[t].calculations.EMA[i["default"].config.indicators.macd.periods[0]]-this.intervals[t].calculations.EMA[i["default"].config.indicators.macd.periods[1]],a=2/(i["default"].config.indicators.macd.lag+1),o=void 0===r?n:(n-r.calculations.MACD.signalLine)*a+r.calculations.MACD.signalLine;this.intervals[t].calculations.MACD={mainLine:n,signalLine:o}},dpo:function(e,t,r){var n=i["default"].config.indicators.dpo.period,a=this.get(t),o=this.get(t+Math.floor(n/2)+1);o&&o.calculations?a.calculations.DPO=a.Candle.Close-o.calculations.SMA[i["default"].config.indicators.dpo.period]:a.calculations.DPO=null},atr:function(e,t,r){if(0==t)return 0;var n=r.periods,a=this.get(t-1),i=e.Candle.High-e.Candle.Low,o=Math.abs(e.Candle.High-a.Candle.Close),s=Math.abs(e.Candle.Low-a.Candle.Close);e.calculations.TR=Math.max(i,o,s),t===n?this.intervals[t].calculations.ATR[n]=this.get(0,n).reduce(function(e,t){return e+t.calculations.TR},0)/n:t>n&&(this.intervals[t].calculations.ATR[n]=(this.intervals[t-1].calculations.ATR[n]*(n-1)+this.intervals[t].calculations.TR)/n)},chandelierExit:function(e,t,r){var n=r.periods,a=this.get(t-n,t),i=Math.max.apply(Math,a.map(function(e){return e.Candle.High})),o=Math.min.apply(Math,a.map(function(e){return e.Candle.Low})),s=this.intervals[t].calculations.ATR[n];if(!(n>t)){if(void 0===s)throw new Error("ATR not calculated yet for chandelier exit");this.intervals[t].calculations.chandelierExit[n]={hi:i,lo:o}}},sar:function(e,t){var r=i["default"].config.indicators.sar.step,n=i["default"].config.indicators.sar.maxStep;if(2>t)return void(this.intervals[t].calculations.SAR={position:"long",value:0,acc:r,accd:0});var a,o,s={},c=this.get(t-1),l=this.get(t-2),u=this.get(t-1).calculations;s.acc=u.SAR.acc,s.position=u.SAR.position,"long"==s.position?(a=Math.max(e.Candle.High,c.Candle.High),o=Math.max(c.Candle.High,l.Candle.High),a>o&&(s.acc+=r,s.acc=Math.min(s.acc,n))):(a=Math.min(e.Candle.Low,c.Candle.Low),o=Math.min(c.Candle.Low,l.Candle.Low),o>a&&(s.acc+=r,s.acc=Math.min(s.acc,n))),s.accd=s.acc*Math.abs(a-u.SAR.value),"long"==u.SAR.position?u.SAR.value+u.SAR.accd>e.Candle.Low?(s.position="short",s.value=o,s.acc=r):(s.position="long",s.value=Math.min(u.SAR.value+u.SAR.accd,c.Candle.Low,l.Candle.Low)):u.SAR.value-u.SAR.accd<e.Candle.High?(s.position="long",s.value=o,s.acc=r):(s.position="short",s.value=Math.max(u.SAR.value-u.SAR.accd,c.Candle.High,l.Candle.High)),this.intervals[t].calculations.SAR=s},rsi:function(e,t){if(0==t)return this.intervals[t].calculations.change=this.intervals[t].calculations.rs=this.intervals[t].calculations.rsi=0;var r=i["default"].config.indicators.rsi.periods;if(this.intervals[t].calculations.change=e.Candle.Close-e.Candle.Open,t==r){var n=[],a=[];this.get(0,r).forEach(function(e){e.calculations.change>=0?n.push(e.calculations.change):a.push(-e.calculations.change)}),this.intervals[t].calculations.rsAvgGain=n.reduce(function(e,t){return e+t},0)/r,this.intervals[t].calculations.rsAvgLoss=a.reduce(function(e,t){return e+t},0)/r}else if(t>r){var o=this.get(t-1).calculations;this.intervals[t].calculations.change>0?(this.intervals[t].calculations.rsAvgLoss=(o.rsAvgLoss*(r-1)+0)/r,this.intervals[t].calculations.rsAvgGain=(o.rsAvgGain*(r-1)+this.intervals[t].calculations.change)/r):(this.intervals[t].calculations.rsAvgLoss=(o.rsAvgLoss*(r-1)+-this.intervals[t].calculations.change)/r,this.intervals[t].calculations.rsAvgGain=(o.rsAvgGain*(r-1)+0)/r)}this.intervals[t].calculations.rs=this.intervals[t].calculations.rsAvgGain/this.intervals[t].calculations.rsAvgLoss,this.intervals[t].calculations.rsi=100-100/(1+this.intervals[t].calculations.rs)},stochRSI:function(e,t,r){var n=this.sliceEndingAt(t,r.periods),a=n.map(function(e,t){return e.calculations.rsi}),i=Math.max.apply(Math,a),o=Math.min.apply(Math,a);e.calculations.stochRSI=(e.calculations.rsi-o)/(i-o)},stochRSIMA:function(e,t,r){for(var n=this.sliceEndingAt(t,r.periods),a=0,i=0;i<n.length;i++)a+=this.intervals[n[i].i].calculations.stochRSI;a/=r.periods,this.intervals[t].calculations.stochRSIMA=a},obv:function(e,t){if(0===t)this.intervals[t].calculations.OBV=0;else{var r=this.get(t-1);e.Candle.Close===r.Candle.Close?e.calculations.OBV=r.calculations.OBV:e.Candle.Close<r.Candle.Close?e.calculations.OBV=r.calculations.OBV-e.Volume:e.Candle.Close>r.Candle.Close&&(e.calculations.OBV=r.calculations.OBV+e.Volume)}},obvma:function(e,t,r){for(var n=this.sliceEndingAt(t,r.periods),a=0,i=0;i<n.length;i++)a+=this.intervals[n[i].i].calculations.OBV;a/=r.periods,this.intervals[t].calculations.OBVMA[r.periods]=a},ichimoku:function(e,t){var r=this.intervals[t].calculations.ichimoku={},n=i["default"].config.indicators.ichimoku.tenkanPeriod,a=i["default"].config.indicators.ichimoku.kijunPeriod;if(!(2*a>t)){var o=this.sliceEndingAt(t,n),s=this.sliceEndingAt(t,a),c=this.sliceEndingAt(t,2*a);r.tenkanSen=l.ichimokuHighLowAvg(o),r.kijunSen=l.ichimokuHighLowAvg(s),r.senkouSpanA=(r.tenkanSen+r.kijunSen)/2,r.senkouSpanB=l.ichimokuHighLowAvg(c);var u=this.get(t+26);void 0!==u?r.chikouSpan=u.Candle.Close:r.chikouSpan=void 0}},ichimokuHighLowAvg:function(e){var t=d3.max(e.map(function(e){return e.Candle.High})),r=d3.min(e.map(function(e){return e.Candle.Low}));return(t+r)/2},heikenAshi:function(e,t){if(0==t)return void(this.intervals[t].calculations.heikenAshi=e.Candle);var r=this.get(t-1).calculations,n=(e.Candle.Open+e.Candle.Close+e.Candle.High+e.Candle.Low)/4,a=(r.heikenAshi.Open+r.heikenAshi.Close)/2;this.intervals[t].calculations.heikenAshi={Close:n,Open:a,High:Math.max(e.Candle.High,a,n),Low:Math.min(e.Candle.Low,a,n)}},aroon:function(e,t){var r=i["default"].config.indicators.aroon.periods,n=this.get(t-r,t).map(function(e){return e.Candle.Close}),a=Math.min.apply(Math,n),o=Math.max.apply(Math,n),s=r-n.indexOf(a),c=r-n.indexOf(o);this.intervals[t].calculations.aroon={down:(r-s)/r*100,up:(r-c)/r*100}},calculateZigZagPoints:function(e){for(var t=!1,r={time:this.get(0).Time,price:this.get(0).Candle.Close},n=[$.extend({},r)],a=0;a<this.intervals.length;a++){var i=this.get(a);t?i.Candle.Low:i.Candle.High;t?i.Candle.High>r.price?(r.time=i.Time,r.price=i.Candle.High):(r.price-i.Candle.Low)/r.price>e/100&&(n.push(r),r=$.extend({},r),t=!t):i.Candle.Low<r.price?(r.time=i.Time,r.price=i.Candle.Low):(i.Candle.High-r.price)/r.price>e/100&&(n.push(r),r=$.extend({},r),t=!t)}this.crossQueueCalculations.zigzag[e]=n}};t["default"]=l,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(312),i=n(a);t["default"]={bind:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=e.DOMElement,n=null;r.addEventListener("touchstart",function(t){1==t.touches.length&&(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY,e.state.lastEvent=t,e.mousemove(t),e.mousedown(t)),n=setTimeout(function(){e.mouseup(t)},800)}),document.addEventListener("touchmove",function(e){var t=$(e.target),r=t.parents("[data-touch-allow-scroll]");t.attr("[data-touch-allow-scroll]")||r.length>0||e.preventDefault()}),r.addEventListener("touchmove",function(t){t.preventDefault(),1==t.touches.length&&(e.mousemove(t),clearTimeout(n))});var a=new i["default"]({threshold:15,timeout:1e3});a.start();var o=1,s=0,c=t.pinchStep||1;r.addEventListener("gesturechange",function(t){var r=t.scale-o;o=t.scale,r>0?(0>s&&(s=0),s++):(s>0&&(s=0),s--),s>=c?(e.trigger("pinch:expand",t),s=0):-c>=s&&(e.trigger("pinch:contract",t),s=0)}),r.addEventListener("gestureend",function(e){o=1,s=0})}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=r(65),i=document.getElementById("tour-step-element"),o=React.createClass({displayName:"StepContainer",render:function(){var e;return React.createElement("div",{className:React.addons.classSet((e={"tour-step":!0},e["orientation-"+this.props.orientation]=!0,e["tour-step--arrow"]=this.props.arrow,e))},React.createElement("div",{className:"tour-step-content"},this.props.children),React.createElement("div",{className:"tour-step-nav"},React.createElement("a",{onClick:this.props.proceed,className:"button"},this.props.isFinal?"Close":"Next")),React.createElement("div",{className:"tour-step-ex"},React.createElement("a",{className:"icon icon-cross",onClick:this.props.close})))}}),s=function(){function e(t,r){var a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];n(this,e),this._target=t,this.orientation=a.orientation||"s",void 0===a.arrow&&(a.arrow=!0),void 0===a.width&&(a.width="auto"),a.offset=a.offset||{},a.offset={left:a.offset.left||0,right:a.offset.right||0,top:a.offset.top||0,bottom:a.offset.bottom||0},void 0===a.setup&&(a.setup=function(){}),void 0===a.teardown&&(a.teardown=function(){}),void 0===a.flashOn&&(a.flashOn=function(){}),void 0===a.flashOff&&(a.flashOff=function(){}),this.opts=a,this.content=r}return e.prototype.target=function(){return document.querySelector(this._target)},e}(),c=function(){function e(t,r){var a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];n(this,e),this.steps=t,this.slug=r,this.index=0,void 0===a.onStart&&(a.onStart=function(){}),void 0===a.onComplete&&(a.onComplete=function(){}),void 0===a.onAdvance&&(a.onAdvance=function(){}),this.opts=a}return e.prototype.next=function(){this.index>=this.steps.length-1?(this.opts.onComplete(),this.hide(),a.trackEvent("tour","complete",this.slug)):(this.opts.onAdvance(),this.index++,this.show(),a.trackEvent("tour","advance",this.slug+":"+this.index))},e.prototype.start=function(){a.trackEvent("tour","start",this.slug),this.opts.onStart(),this.index=0,this.show()},e.prototype.show=function(){var e=this,t=this.steps[this.index],r=this.steps[this.index-1],n=t.target(),s=n.getBoundingClientRect();r&&r.opts.teardown(),t.opts.setup(),i.className="visible",i.style.left="",i.style.top="",i.style.right="",i.style.bottom="",React.render(React.createElement(o,{orientation:t.orientation,arrow:t.opts.arrow,isFinal:this.index===this.steps.length-1,proceed:function(){e.next()},close:function(){e.opts.onComplete(),e.hide(),a.trackEvent("tour","abort",e.slug)}},t.content),i),i.style.width=t.opts.width;var c=i.getBoundingClientRect();switch(t.orientation){case"os":i.style.top=s.bottom+20+"px",i.style.left=Math.max(5,s.left+s.width/2-30)+t.opts.offset.left+t.opts.offset.right+"px";break;case"on":i.style.bottom=window.innerHeight-s.top+20+"px",i.style.left=Math.min(innerWidth-5-c.width,s.right+s.width/2+30)+t.opts.offset.left+t.opts.offset.right+"px";break;case"oe":i.style.right=s.right-20-c.width-t.opts.offset.left+t.opts.offset.right+"px",i.style.top=Math.max(5,s.top+s.height/2-30)+"px";break;case"ow":i.style.left=s.left-20-c.width+t.opts.offset.left-t.opts.offset.right+"px",i.style.top=Math.max(5,s.top+s.height/2-30)+"px";break;case"itr":i.style.top=s.top+20+"px",i.style.left=s.right-20-c.width-t.opts.offset.right+"px"}var l=0,u=!1,d=setInterval(function(){u?(u=!1,t.opts.flashOff(),l++,3===l&&clearInterval(d)):(u=!0,t.opts.flashOn()),n.setAttribute("data-tour-flash",u),i.setAttribute("data-tour-flash",u)},800)},e.prototype.hide=function(){i.className=""},e}();t.Tour=c,t.TourStep=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(139),o=n(i),s=r(12),c=n(s),l=function(){function e(){a(this,e),this._items=[]}return e.prototype.initialize=function(){},e.prototype.getItems=function(){return this._items},e.prototype.push=function(e){var t=this;e.id=o["default"].v1(),e._destroy=function(){t.destroy(e.id)},this._items.push(e),this.trigger("change")},e.prototype.destroy=function(e){this._items=this._items.filter(function(t,r){return t.id!==e}),this.trigger("change")},e}();t["default"]=l,l.prototype=$.extend(l.prototype,c["default"]),e.exports=t["default"]},function(e,t){"use strict";function r(e){var t=[],r=[],n=[];return e.Remove&&(t=e.Remove.map(function(e){return{price:e[0]}})),e.Delta&&(r=e.Delta.map(function(e){return{price:e[0],amount:e[1]}})),e.Set&&(n=e.Set.map(function(e){return{price:e[0],amount:e[1]}})),{remove:t,delta:r,set:n}}function n(e){return e.Asks?{asks:r(e.Asks),bids:r(e.Bids),sequence:e.Sequence}:void 0}t.__esModule=!0,t.orderbookDiff=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(112),o=n(i),s=r(8),c=n(s),l=function(){function e(){a(this,e);var t=Math.floor((new Date).valueOf()/1e3);this.endTime=t-1440*Math.floor(10*Math.random())}return e.prototype.generateTrades=function(){for(var e=[],t=c["default"].intervalQueues[3600],r=0;r<t.intervals.length;r+=Math.round(10*Math.random())){var n=t.intervals[r];if(!n)return e;var a=n.Candle.Low+Math.random()*(n.Candle.High-n.Candle.Low);e.push(new o["default"]({price:a,amount:100*Math.random(),side:Math.random()>.5?0:1,timestamp:n.Time+30}))}return e},e}();t["default"]=l,e.exports=t["default"]},function(e,t,r){(function(e){"use strict";if(r(303),r(304),e._babelPolyfill)throw new Error("only one instance of babel/polyfill is allowed");e._babelPolyfill=!0}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=r(34),a=r(59),i=r(19);e.exports=[].copyWithin||function(e,t){var r=n(this),o=i(r.length),s=a(e,o),c=a(t,o),l=arguments,u=l.length>2?l[2]:void 0,d=Math.min((void 0===u?o:a(u,o))-c,o-s),h=1;for(s>c&&c+d>s&&(h=-1,c+=d-1,s+=d-1);d-- >0;)c in r?r[s]=r[c]:delete r[s],s+=h,c+=h;return r}},function(e,t,r){"use strict";var n=r(34),a=r(59),i=r(19);e.exports=[].fill||function(e){for(var t=n(this),r=i(t.length),o=arguments,s=o.length,c=a(s>1?o[1]:void 0,r),l=s>2?o[2]:void 0,u=void 0===l?r:a(l,r);u>c;)t[c++]=e;return t}},function(e,t,r){"use strict";var n=r(4),a=r(89),i=r(7)("species");e.exports=function(e,t){var r;return a(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)||(r=void 0),n(r)&&(r=r[i],null===r&&(r=void 0))),new(void 0===r?Array:r)(t)}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e){var t=n.getKeys(e),r=n.getSymbols;if(r)for(var a,i=r(e),o=n.isEnum,s=0;i.length>s;)o.call(e,a=i[s++])&&t.push(a);return t}},function(e,t,r){"use strict";var n=r(2),a=r(24);e.exports=function(e,t){for(var r,i=a(e),o=n.getKeys(i),s=o.length,c=0;s>c;)if(i[r=o[c++]]===t)return r}},function(e,t,r){"use strict";var n,a,i,o=r(9),s=r(136).set,c=o.MutationObserver||o.WebKitMutationObserver,l=o.process,u=o.Promise,d="process"==r(32)(l),h=function(){var e,t,r;for(d&&(e=l.domain)&&(l.domain=null,e.exit());n;)t=n.domain,r=n.fn,t&&t.enter(),r(),t&&t.exit(),n=n.next;a=void 0,e&&e.enter()};if(d)i=function(){l.nextTick(h)};else if(c){var f=1,p=document.createTextNode("");new c(h).observe(p,{characterData:!0}),i=function(){p.data=f=-f}}else i=u&&u.resolve?function(){u.resolve().then(h)}:function(){s.call(o,h)};e.exports=function(e){var t={fn:e,next:void 0,domain:d&&l.domain};a&&(a.next=t),n||(n=t,i()),a=t}},function(e,t,r){"use strict";var n=r(2),a=r(34),i=r(72);e.exports=r(13)(function(){var e=Object.assign,t={},r={},n=Symbol(),a="abcdefghijklmnopqrst";return t[n]=7,a.split("").forEach(function(e){r[e]=e}),7!=e({},t)[n]||Object.keys(e({},r)).join("")!=a})?function(e,t){for(var r=a(e),o=arguments,s=o.length,c=1,l=n.getKeys,u=n.getSymbols,d=n.isEnum;s>c;)for(var h,f=i(o[c++]),p=u?l(f).concat(u(f)):l(f),g=p.length,v=0;g>v;)d.call(f,h=p[v++])&&(r[h]=f[h]);return r}:Object.assign},function(e,t,r){"use strict";var n=r(197),a=r(71),i=r(42);e.exports=function(){for(var e=i(this),t=arguments.length,r=Array(t),o=0,s=n._,c=!1;t>o;)(r[o]=arguments[o++])===s&&(c=!0);return function(){var n,i=this,o=arguments,l=o.length,u=0,d=0;if(!c&&!l)return a(e,r,i);if(n=r.slice(),c)for(;t>u;u++)n[u]===s&&(n[u]=o[d++]);for(;l>d;)n.push(o[d++]);return a(e,n,i)}}},function(e,t,r){"use strict";e.exports=r(9)},function(e,t){"use strict";e.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}},function(e,t,r){"use strict";var n=r(6),a=r(42),i=r(7)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[i])?t:a(r)}},function(e,t,r){"use strict";var n=r(4);e.exports=function(e,t){if(!n(e))return e;var r,a;if(t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;if("function"==typeof(r=e.valueOf)&&!n(a=r.call(e)))return a;if(!t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){"use strict";var n,a=r(2),i=r(1),o=r(21),s=r(38),c=r(122),l=r(119),u=r(18),d=r(32),h=r(71),f=r(13),p=r(6),g=r(42),v=r(4),m=r(34),y=r(24),w=r(60),x=r(59),b=r(19),_=r(72),S=r(44)("__proto__"),k=r(67),C=r(115)(!1),T=Object.prototype,E=Array.prototype,P=E.slice,A=E.join,M=a.setDesc,R=a.getDesc,O=a.setDescs,I={};o||(n=!f(function(){return 7!=M(l("div"),"a",{get:function(){return 7}}).a}),a.setDesc=function(e,t,r){if(n)try{return M(e,t,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(p(e)[t]=r.value),e},a.getDesc=function(e,t){if(n)try{return R(e,t)}catch(r){}return u(e,t)?s(!T.propertyIsEnumerable.call(e,t),e[t]):void 0},a.setDescs=O=function(e,t){p(e);for(var r,n=a.getKeys(t),i=n.length,o=0;i>o;)a.setDesc(e,r=n[o++],t[r]);return e}),i(i.S+i.F*!o,"Object",{getOwnPropertyDescriptor:a.getDesc,defineProperty:a.setDesc,defineProperties:O});var D="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),N=D.concat("length","prototype"),L=D.length,F=function(){var e,t=l("iframe"),r=L,n=">";for(t.style.display="none",c.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script"+n),e.close(),F=e.F;r--;)delete F.prototype[D[r]];return F()},B=function(e,t){return function(r){var n,a=y(r),i=0,o=[];for(n in a)n!=S&&u(a,n)&&o.push(n);for(;t>i;)u(a,n=e[i++])&&(~C(o,n)||o.push(n));return o}},H=function(){};i(i.S,"Object",{getPrototypeOf:a.getProto=a.getProto||function(e){return e=m(e),u(e,S)?e[S]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?T:null},getOwnPropertyNames:a.getNames=a.getNames||B(N,N.length,!0),create:a.create=a.create||function(e,t){var r;return null!==e?(H.prototype=p(e),r=new H,H.prototype=null,r[S]=e):r=F(),void 0===t?r:O(r,t)},keys:a.getKeys=a.getKeys||B(D,L,!1)});var j=function(e,t,r){if(!(t in I)){for(var n=[],a=0;t>a;a++)n[a]="a["+a+"]";I[t]=Function("F,a","return new F("+n.join(",")+")")}return I[t](e,r)};i(i.P,"Function",{bind:function(e){var t=g(this),r=P.call(arguments,1),n=function a(){var n=r.concat(P.call(arguments));return this instanceof a?j(t,n.length,n):h(t,n,e)};return v(t.prototype)&&(n.prototype=t.prototype),n}}),i(i.P+i.F*f(function(){c&&P.call(c)}),"Array",{slice:function(e,t){var r=b(this.length),n=d(this);if(t=void 0===t?r:t,"Array"==n)return P.call(this,e,t);for(var a=x(e,r),i=x(t,r),o=b(i-a),s=Array(o),c=0;o>c;c++)s[c]="String"==n?this.charAt(a+c):this[a+c];return s}}),i(i.P+i.F*(_!=Object),"Array",{join:function(e){return A.call(_(this),void 0===e?",":e)}}),i(i.S,"Array",{isArray:r(89)});var z=function(e){return function(t,r){g(t);var n=_(this),a=b(n.length),i=e?a-1:0,o=e?-1:1;if(arguments.length<2)for(;;){if(i in n){r=n[i],i+=o;break}if(i+=o,e?0>i:i>=a)throw TypeError("Reduce of empty array with no initial value")}for(;e?i>=0:a>i;i+=o)i in n&&(r=t(r,n[i],i,this));return r}},W=function(e){return function(t){return e(this,t,arguments[1])}};i(i.P,"Array",{forEach:a.each=a.each||W(k(0)),map:W(k(1)),filter:W(k(2)),some:W(k(3)),every:W(k(4)),reduce:z(!1),reduceRight:z(!0),indexOf:W(C),lastIndexOf:function(e,t){var r=y(this),n=b(r.length),a=n-1;for(arguments.length>1&&(a=Math.min(a,w(t))),0>a&&(a=b(n+a));a>=0;a--)if(a in r&&r[a]===e)return a;return-1}}),i(i.S,"Date",{now:function(){return+new Date}});var $=function(e){return e>9?e:"0"+e};i(i.P+i.F*(f(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!f(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=0>t?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+$(e.getUTCMonth()+1)+"-"+$(e.getUTCDate())+"T"+$(e.getUTCHours())+":"+$(e.getUTCMinutes())+":"+$(e.getUTCSeconds())+"."+(r>99?r:"0"+$(r))+"Z"}})},function(e,t,r){"use strict";var n=r(1);n(n.P,"Array",{copyWithin:r(189)}),r(43)("copyWithin")},function(e,t,r){"use strict";var n=r(1);n(n.P,"Array",{fill:r(190)}),r(43)("fill")},function(e,t,r){"use strict";var n=r(1),a=r(67)(6),i="findIndex",o=!0;i in[]&&Array(1)[i](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(43)(i)},function(e,t,r){"use strict";var n=r(1),a=r(67)(5),i="find",o=!0;i in[]&&Array(1)[i](function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(43)(i)},function(e,t,r){"use strict";var n=r(27),a=r(1),i=r(34),o=r(126),s=r(123),c=r(19),l=r(137);a(a.S+a.F*!r(91)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,a,u,d=i(e),h="function"==typeof this?this:Array,f=arguments,p=f.length,g=p>1?f[1]:void 0,v=void 0!==g,m=0,y=l(d);if(v&&(g=n(g,p>2?f[2]:void 0,2)),void 0==y||h==Array&&s(y))for(t=c(d.length),r=new h(t);t>m;m++)r[m]=v?g(d[m],m):d[m];else for(u=y.call(d),r=new h;!(a=u.next()).done;m++)r[m]=v?o(u,g,[a.value,m],!0):a.value;return r.length=m,r}})},function(e,t,r){"use strict";var n=r(1);n(n.S+n.F*r(13)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments,r=t.length,n=new("function"==typeof this?this:Array)(r);r>e;)n[e]=t[e++];return n.length=r,n}})},function(e,t,r){"use strict";r(74)("Array")},function(e,t,r){"use strict";var n=r(2),a=r(4),i=r(7)("hasInstance"),o=Function.prototype;i in o||n.setDesc(o,i,{value:function(e){if("function"!=typeof this||!a(e))return!1;if(!a(this.prototype))return e instanceof this;for(;e=n.getProto(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){"use strict";var n=r(2).setDesc,a=r(38),i=r(18),o=Function.prototype,s=/^\s*function ([^ (]*)/,c="name";c in o||r(21)&&n(o,c,{configurable:!0,get:function(){var e=(""+this).match(s),t=e?e[1]:"";return i(this,c)||n(this,c,a(5,t)),t}})},function(e,t,r){"use strict";var n=r(116);r(69)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(1),a=r(129),i=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:a(e-1+i(e-1)*i(e+1))}})},function(e,t,r){"use strict";function n(e){return isFinite(e=+e)&&0!=e?0>e?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var a=r(1);a(a.S,"Math",{asinh:n})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){"use strict";var n=r(1),a=r(94);n(n.S,"Math",{cbrt:function(e){return a(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){"use strict";var n=r(1),a=Math.exp;n(n.S,"Math",{cosh:function(e){return(a(e=+e)+a(-e))/2}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Math",{expm1:r(93)})},function(e,t,r){"use strict";var n=r(1),a=r(94),i=Math.pow,o=i(2,-52),s=i(2,-23),c=i(2,127)*(2-s),l=i(2,-126),u=function(e){return e+1/o-1/o};n(n.S,"Math",{fround:function(e){var t,r,n=Math.abs(e),i=a(e);return l>n?i*u(n/l/s)*l*s:(t=(1+s/o)*n,r=t-(t-n),r>c||r!=r?i*(1/0):i*r)}})},function(e,t,r){"use strict";var n=r(1),a=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,i=0,o=0,s=arguments,c=s.length,l=0;c>o;)r=a(s[o++]),r>l?(n=l/r,i=i*n*n+1,l=r):r>0?(n=r/l,i+=n*n):i+=r;return l===1/0?1/0:l*Math.sqrt(i)}})},function(e,t,r){"use strict";var n=r(1),a=Math.imul;n(n.S+n.F*r(13)(function(){return-5!=a(4294967295,5)||2!=a.length}),"Math",{imul:function(e,t){var r=65535,n=+e,a=+t,i=r&n,o=r&a;return 0|i*o+((r&n>>>16)*o+i*(r&a>>>16)<<16>>>0)}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Math",{log1p:r(129)})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Math",{sign:r(94)})},function(e,t,r){"use strict";var n=r(1),a=r(93),i=Math.exp;n(n.S+n.F*r(13)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(a(e)-a(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,r){"use strict";var n=r(1),a=r(93),i=Math.exp;n(n.S,"Math",{tanh:function(e){var t=a(e=+e),r=a(-e);return t==1/0?1:r==1/0?-1:(t-r)/(i(e)+i(-e))}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){"use strict";var n=r(2),a=r(9),i=r(18),o=r(32),s=r(200),c=r(13),l=r(76).trim,u="Number",d=a[u],h=d,f=d.prototype,p=o(n.create(f))==u,g="trim"in String.prototype,v=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():l(t,3);var r,n,a,i=t.charCodeAt(0);if(43===i||45===i){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var o,c=t.slice(2),u=0,d=c.length;d>u;u++)if(o=c.charCodeAt(u),48>o||o>a)return NaN;return parseInt(c,n)}}return+t};d(" 0o1")&&d("0b1")&&!d("+0x1")||(d=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof d&&(p?c(function(){f.valueOf.call(r)}):o(r)!=u)?new h(v(t)):v(t)},n.each.call(r(21)?n.getNames(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),function(e){i(h,e)&&!i(d,e)&&n.setDesc(d,e,n.getDesc(h,e));
}),d.prototype=f,f.constructor=d,r(23)(a,u,d))},function(e,t,r){"use strict";var n=r(1);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){"use strict";var n=r(1),a=r(9).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&a(e)}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Number",{isInteger:r(124)})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){"use strict";var n=r(1),a=r(124),i=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return a(e)&&i(e)<=9007199254740991}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Number",{parseFloat:parseFloat})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Number",{parseInt:parseInt})},function(e,t,r){"use strict";var n=r(1);n(n.S+n.F,"Object",{assign:r(195)})},function(e,t,r){"use strict";var n=r(4);r(22)("freeze",function(e){return function(t){return e&&n(t)?e(t):t}})},function(e,t,r){"use strict";var n=r(24);r(22)("getOwnPropertyDescriptor",function(e){return function(t,r){return e(n(t),r)}})},function(e,t,r){"use strict";r(22)("getOwnPropertyNames",function(){return r(121).get})},function(e,t,r){"use strict";var n=r(34);r(22)("getPrototypeOf",function(e){return function(t){return e(n(t))}})},function(e,t,r){"use strict";var n=r(4);r(22)("isExtensible",function(e){return function(t){return n(t)?e?e(t):!0:!1}})},function(e,t,r){"use strict";var n=r(4);r(22)("isFrozen",function(e){return function(t){return n(t)?e?e(t):!1:!0}})},function(e,t,r){"use strict";var n=r(4);r(22)("isSealed",function(e){return function(t){return n(t)?e?e(t):!1:!0}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Object",{is:r(132)})},function(e,t,r){"use strict";var n=r(34);r(22)("keys",function(e){return function(t){return e(n(t))}})},function(e,t,r){"use strict";var n=r(4);r(22)("preventExtensions",function(e){return function(t){return e&&n(t)?e(t):t}})},function(e,t,r){"use strict";var n=r(4);r(22)("seal",function(e){return function(t){return e&&n(t)?e(t):t}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Object",{setPrototypeOf:r(95).set})},function(e,t,r){"use strict";var n=r(68),a={};a[r(7)("toStringTag")]="z",a+""!="[object z]"&&r(23)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(e,t,r){"use strict";var n,a=r(2),i=r(92),o=r(9),s=r(27),c=r(68),l=r(1),u=r(4),d=r(6),h=r(42),f=r(75),p=r(56),g=r(95).set,v=r(132),m=r(7)("species"),y=r(199),w=r(194),x="Promise",b=o.process,_="process"==c(b),S=o[x],k=function(e){var t=new S(function(){});return e&&(t.constructor=Object),S.resolve(t)===t},C=function(){function e(t){var r=new S(t);return g(r,e.prototype),r}var t=!1;try{if(t=S&&S.resolve&&k(),g(e,S),e.prototype=a.create(S.prototype,{constructor:{value:e}}),e.resolve(5).then(function(){})instanceof e||(t=!1),t&&r(21)){var n=!1;S.resolve(a.setDesc({},"then",{get:function(){n=!0}})),t=n}}catch(i){t=!1}return t}(),T=function(e,t){return i&&e===S&&t===n?!0:v(e,t)},E=function(e){var t=d(e)[m];return void 0!=t?t:e},P=function(e){var t;return u(e)&&"function"==typeof(t=e.then)?t:!1},A=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=h(t),this.reject=h(r)},M=function(e){try{e()}catch(t){return{error:t}}},R=function(e,t){if(!e.n){e.n=!0;var r=e.c;w(function(){for(var n=e.v,a=1==e.s,i=0,s=function(t){var r,i,o=a?t.ok:t.fail,s=t.resolve,c=t.reject;try{o?(a||(e.h=!0),r=o===!0?n:o(n),r===t.promise?c(TypeError("Promise-chain cycle")):(i=P(r))?i.call(r,s,c):s(r)):c(n)}catch(l){c(l)}};r.length>i;)s(r[i++]);r.length=0,e.n=!1,t&&setTimeout(function(){var t,r,a=e.p;O(a)&&(_?b.emit("unhandledRejection",n,a):(t=o.onunhandledrejection)?t({promise:a,reason:n}):(r=o.console)&&r.error&&r.error("Unhandled promise rejection",n)),e.a=void 0},1)})}},O=function N(e){var t,r=e._d,n=r.a||r.c,a=0;if(r.h)return!1;for(;n.length>a;)if(t=n[a++],t.fail||!N(t.promise))return!1;return!0},I=function(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),R(t,!0))},D=function L(e){var t,r=this;if(!r.d){r.d=!0,r=r.r||r;try{if(r.p===e)throw TypeError("Promise can't be resolved itself");(t=P(e))?w(function(){var n={r:r,d:!1};try{t.call(e,s(L,n,1),s(I,n,1))}catch(a){I.call(n,a)}}):(r.v=e,r.s=1,R(r,!1))}catch(n){I.call({r:r,d:!1},n)}}};C||(S=function(e){h(e);var t=this._d={p:f(this,S,x),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{e(s(D,t,1),s(I,t,1))}catch(r){I.call(t,r)}},r(73)(S.prototype,{then:function(e,t){var r=new A(y(this,S)),n=r.promise,a=this._d;return r.ok="function"==typeof e?e:!0,r.fail="function"==typeof t&&t,a.c.push(r),a.a&&a.a.push(r),a.s&&R(a,!1),n},"catch":function(e){return this.then(void 0,e)}})),l(l.G+l.W+l.F*!C,{Promise:S}),r(58)(S,x),r(74)(x),n=r(33)[x],l(l.S+l.F*!C,x,{reject:function(e){var t=new A(this),r=t.reject;return r(e),t.promise}}),l(l.S+l.F*(!C||k(!0)),x,{resolve:function(e){if(e instanceof S&&T(e.constructor,this))return e;var t=new A(this),r=t.resolve;return r(e),t.promise}}),l(l.S+l.F*!(C&&r(91)(function(e){S.all(e)["catch"](function(){})})),x,{all:function(e){var t=E(this),r=new A(t),n=r.resolve,i=r.reject,o=[],s=M(function(){p(e,!1,o.push,o);var r=o.length,s=Array(r);r?a.each.call(o,function(e,a){var o=!1;t.resolve(e).then(function(e){o||(o=!0,s[a]=e,--r||n(s))},i)}):n(s)});return s&&i(s.error),r.promise},race:function(e){var t=E(this),r=new A(t),n=r.reject,a=M(function(){p(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return a&&n(a.error),r.promise}})},function(e,t,r){"use strict";var n=r(1),a=Function.apply;n(n.S,"Reflect",{apply:function(e,t,r){return a.call(e,t,r)}})},function(e,t,r){"use strict";var n=r(2),a=r(1),i=r(42),o=r(6),s=r(4),c=Function.bind||r(33).Function.prototype.bind;a(a.S+a.F*r(13)(function(){function e(){}return!(Reflect.construct(function(){},[],e)instanceof e)}),"Reflect",{construct:function(e,t){i(e);var r=arguments.length<3?e:i(arguments[2]);if(e==r){if(void 0!=t)switch(o(t).length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var a=[null];return a.push.apply(a,t),new(c.apply(e,a))}var l=r.prototype,u=n.create(s(l)?l:Object.prototype),d=Function.apply.call(e,u,t);return s(d)?d:u}})},function(e,t,r){"use strict";var n=r(2),a=r(1),i=r(6);a(a.S+a.F*r(13)(function(){Reflect.defineProperty(n.setDesc({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){i(e);try{return n.setDesc(e,t,r),!0}catch(a){return!1}}})},function(e,t,r){"use strict";var n=r(1),a=r(2).getDesc,i=r(6);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=a(i(e),t);return r&&!r.configurable?!1:delete e[t]}})},function(e,t,r){"use strict";var n=r(1),a=r(6),i=function(e){this._t=a(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(127)(i,"Object",function(){var e,t=this,r=t._k;do if(t._i>=r.length)return{value:void 0,done:!0};while(!((e=r[t._i++])in t._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new i(e)}})},function(e,t,r){"use strict";var n=r(2),a=r(1),i=r(6);a(a.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.getDesc(i(e),t)}})},function(e,t,r){"use strict";var n=r(1),a=r(2).getProto,i=r(6);n(n.S,"Reflect",{getPrototypeOf:function(e){return a(i(e))}})},function(e,t,r){"use strict";function n(e,t){for(var r=arguments,n=!0;n;){var o=e,l=t;n=!1;var u,d,h=r.length<3?o:r[2];if(c(o)===h)return o[l];if(u=a.getDesc(o,l))return i(u,"value")?u.value:void 0!==u.get?u.get.call(h):void 0;s(d=a.getProto(o))&&(r=[e=d,t=l,h],n=!0,h=u=d=void 0)}}var a=r(2),i=r(18),o=r(1),s=r(4),c=r(6);o(o.S,"Reflect",{get:n})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){"use strict";var n=r(1),a=r(6),i=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return a(e),i?i(e):!0}})},function(e,t,r){"use strict";var n=r(1);n(n.S,"Reflect",{ownKeys:r(131)})},function(e,t,r){"use strict";var n=r(1),a=r(6),i=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){a(e);try{return i&&i(e),!0}catch(t){return!1}}})},function(e,t,r){"use strict";var n=r(1),a=r(95);a&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){a.check(e,t);try{return a.set(e,t),!0}catch(r){return!1}}})},function(e,t,r){"use strict";function n(e,t,r){var n=arguments,o=!0;e:for(;o;){var u=e,d=t,h=r;o=!1;var f,p,g=n.length<4?u:n[3],v=a.getDesc(c(u),d);if(!v){if(l(p=a.getProto(u))){n=[e=p,t=d,r=h,g],o=!0,g=v=f=p=void 0;continue e}v=s(0)}return i(v,"value")?v.writable!==!1&&l(g)?(f=a.getDesc(g,d)||s(0),f.value=h,a.setDesc(g,d,f),!0):!1:void 0===v.set?!1:(v.set.call(g,h),!0)}}var a=r(2),i=r(18),o=r(1),s=r(38),c=r(6),l=r(4);o(o.S,"Reflect",{set:n})},function(e,t,r){"use strict";var n=r(2),a=r(9),i=r(125),o=r(120),s=a.RegExp,c=s,l=s.prototype,u=/a/g,d=/a/g,h=new s(u)!==u;!r(21)||h&&!r(13)(function(){return d[r(7)("match")]=!1,s(u)!=u||s(d)==d||"/a/i"!=s(u,"i")})||(s=function(e,t){var r=i(e),n=void 0===t;return this instanceof s||!r||e.constructor!==s||!n?h?new c(r&&!n?e.source:e,t):c((r=e instanceof s)?e.source:e,r&&n?o.call(e):t):e},n.each.call(n.getNames(c),function(e){e in s||n.setDesc(s,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})}),l.constructor=s,s.prototype=l,r(23)(a,"RegExp",s)),r(74)("RegExp")},function(e,t,r){"use strict";var n=r(2);r(21)&&"g"!=/./g.flags&&n.setDesc(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(e,t,r){"use strict";r(70)("match",1,function(e,t){return function(r){var n=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,n):new RegExp(r)[t](String(n))}})},function(e,t,r){"use strict";r(70)("replace",2,function(e,t,r){return function(n,a){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,a):r.call(String(i),n,a)}})},function(e,t,r){"use strict";r(70)("search",1,function(e,t){return function(r){var n=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,n):new RegExp(r)[t](String(n))}})},function(e,t,r){"use strict";r(70)("split",2,function(e,t,r){return function(n,a){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,a):r.call(String(i),n,a)}})},function(e,t,r){"use strict";var n=r(116);r(69)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n=r(1),a=r(96)(!1);n(n.P,"String",{codePointAt:function(e){return a(this,e)}})},function(e,t,r){"use strict";var n=r(1),a=r(19),i=r(97),o="endsWith",s=""[o];n(n.P+n.F*r(88)(o),"String",{endsWith:function(e){var t=i(this,e,o),r=arguments,n=r.length>1?r[1]:void 0,c=a(t.length),l=void 0===n?c:Math.min(a(n),c),u=String(e);return s?s.call(t,u,l):t.slice(l-u.length,l)===u}})},function(e,t,r){"use strict";var n=r(1),a=r(59),i=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments,o=n.length,s=0;o>s;){if(t=+n[s++],a(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(65536>t?i(t):i(((t-=65536)>>10)+55296,t%1024+56320))}return r.join("")}})},function(e,t,r){"use strict";var n=r(1),a=r(97),i="includes";n(n.P+n.F*r(88)(i),"String",{includes:function(e){return!!~a(this,e,i).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){"use strict";var n=r(96)(!0);r(90)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";var n=r(1),a=r(24),i=r(19);n(n.S,"String",{raw:function(e){for(var t=a(e.raw),r=i(t.length),n=arguments,o=n.length,s=[],c=0;r>c;)s.push(String(t[c++])),o>c&&s.push(String(n[c]));return s.join("")}})},function(e,t,r){"use strict";var n=r(1);n(n.P,"String",{repeat:r(135)})},function(e,t,r){"use strict";var n=r(1),a=r(19),i=r(97),o="startsWith",s=""[o];n(n.P+n.F*r(88)(o),"String",{startsWith:function(e){var t=i(this,e,o),r=arguments,n=a(Math.min(r.length>1?r[1]:void 0,t.length)),c=String(e);return s?s.call(t,c,n):t.slice(n,n+c.length)===c}})},function(e,t,r){"use strict";r(76)("trim",function(e){return function(){return e(this,3)}})},function(e,t,r){"use strict";var n=r(2),a=r(9),i=r(18),o=r(21),s=r(1),c=r(23),l=r(13),u=r(133),d=r(58),h=r(44),f=r(7),p=r(193),g=r(121),v=r(192),m=r(89),y=r(6),w=r(24),x=r(38),b=n.getDesc,_=n.setDesc,S=n.create,k=g.get,C=a.Symbol,T=a.JSON,E=T&&T.stringify,P=!1,A=f("_hidden"),M=n.isEnum,R=u("symbol-registry"),O=u("symbols"),I="function"==typeof C,D=Object.prototype,N=o&&l(function(){return 7!=S(_({},"a",{get:function(){return _(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=b(D,t);n&&delete D[t],_(e,t,r),n&&e!==D&&_(D,t,n)}:_,L=function(e){var t=O[e]=S(C.prototype);return t._k=e,o&&P&&N(D,e,{configurable:!0,set:function(t){i(this,A)&&i(this[A],e)&&(this[A][e]=!1),N(this,e,x(1,t))}}),t},F=function(e){return"symbol"==typeof e},B=function(e,t,r){return r&&i(O,t)?(r.enumerable?(i(e,A)&&e[A][t]&&(e[A][t]=!1),r=S(r,{enumerable:x(0,!1)})):(i(e,A)||_(e,A,x(1,{})),e[A][t]=!0),N(e,t,r)):_(e,t,r)},H=function(e,t){y(e);for(var r,n=v(t=w(t)),a=0,i=n.length;i>a;)B(e,r=n[a++],t[r]);return e},j=function(e,t){return void 0===t?S(e):H(S(e),t)},z=function(e){var t=M.call(this,e);return t||!i(this,e)||!i(O,e)||i(this,A)&&this[A][e]?t:!0},W=function(e,t){var r=b(e=w(e),t);return!r||!i(O,t)||i(e,A)&&e[A][t]||(r.enumerable=!0),r},$=function(e){for(var t,r=k(w(e)),n=[],a=0;r.length>a;)i(O,t=r[a++])||t==A||n.push(t);return n},q=function(e){for(var t,r=k(w(e)),n=[],a=0;r.length>a;)i(O,t=r[a++])&&n.push(O[t]);return n},V=function(e){if(void 0!==e&&!F(e)){for(var t,r,n=[e],a=1,i=arguments;i.length>a;)n.push(i[a++]);return t=n[1],"function"==typeof t&&(r=t),!r&&m(t)||(t=function(e,t){return r&&(t=r.call(this,e,t)),F(t)?void 0:t}),n[1]=t,E.apply(T,n)}},U=l(function(){var e=C();return"[null]"!=E([e])||"{}"!=E({a:e})||"{}"!=E(Object(e))});I||(C=function(){if(F(this))throw TypeError("Symbol is not a constructor");return L(h(arguments.length>0?arguments[0]:void 0))},c(C.prototype,"toString",function(){return this._k}),F=function(e){return e instanceof C},n.create=j,n.isEnum=z,n.getDesc=W,n.setDesc=B,n.setDescs=H,n.getNames=g.get=$,n.getSymbols=q,o&&!r(92)&&c(D,"propertyIsEnumerable",z,!0));var Y={"for":function(e){return i(R,e+="")?R[e]:R[e]=C(e)},keyFor:function(e){return p(R,e)},useSetter:function(){P=!0},useSimple:function(){P=!1}};n.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(e){var t=f(e);Y[e]=I?t:L(t)}),P=!0,s(s.G+s.W,{Symbol:C}),s(s.S,"Symbol",Y),s(s.S+s.F*!I,"Object",{create:j,defineProperty:B,defineProperties:H,getOwnPropertyDescriptor:W,getOwnPropertyNames:$,getOwnPropertySymbols:q}),T&&s(s.S+s.F*(!I||U),"JSON",{stringify:V}),d(C,"Symbol"),d(Math,"Math",!0),d(a.JSON,"JSON",!0)},function(e,t,r){"use strict";var n=r(2),a=r(23),i=r(118),o=r(4),s=r(18),c=i.frozenStore,l=i.WEAK,u=Object.isExtensible||o,d={},h=r(69)("WeakMap",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){if(o(e)){if(!u(e))return c(this).get(e);if(s(e,l))return e[l][this._i]}},set:function(e,t){return i.def(this,e,t)}},i,!0,!0);7!=(new h).set((Object.freeze||Object)(d),7).get(d)&&n.each.call(["delete","has","get","set"],function(e){var t=h.prototype,r=t[e];a(t,e,function(t,n){if(o(t)&&!u(t)){var a=c(this)[e](t,n);return"set"==e?this:a}return r.call(this,t,n)})})},function(e,t,r){"use strict";var n=r(118);r(69)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(1),a=r(115)(!0);n(n.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(43)("includes")},function(e,t,r){"use strict";var n=r(1);n(n.P,"Map",{toJSON:r(117)("Map")})},function(e,t,r){"use strict";var n=r(1),a=r(130)(!0);n(n.S,"Object",{entries:function(e){return a(e)}})},function(e,t,r){"use strict";var n=r(2),a=r(1),i=r(131),o=r(24),s=r(38);a(a.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,a=o(e),c=n.setDesc,l=n.getDesc,u=i(a),d={},h=0;u.length>h;)r=l(a,t=u[h++]),t in d?c(d,t,s(0,r)):d[t]=r;return d}})},function(e,t,r){"use strict";var n=r(1),a=r(130)(!1);n(n.S,"Object",{values:function(e){return a(e)}})},function(e,t,r){"use strict";var n=r(1),a=r(198)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return a(e)}})},function(e,t,r){"use strict";var n=r(1);n(n.P,"Set",{toJSON:r(117)("Set")})},function(e,t,r){"use strict";var n=r(1),a=r(96)(!0);n(n.P,"String",{at:function(e){return a(this,e)}})},function(e,t,r){"use strict";var n=r(1),a=r(134);n(n.P,"String",{padLeft:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){"use strict";var n=r(1),a=r(134);n(n.P,"String",{padRight:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){"use strict";r(76)("trimLeft",function(e){return function(){return e(this,1)}})},function(e,t,r){"use strict";r(76)("trimRight",function(e){return function(){return e(this,2)}})},function(e,t,r){"use strict";var n=r(2),a=r(1),i=r(27),o=r(33).Array||Array,s={},c=function(e,t){n.each.call(e.split(","),function(e){void 0==t&&e in o?s[e]=o[e]:e in[]&&(s[e]=i(Function.call,[][e],t))})};c("pop,reverse,shift,keys,values,entries",1),c("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),c("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"),a(a.S,"Array",s)},function(e,t,r){"use strict";r(138);var n=r(9),a=r(29),i=r(57),o=r(7)("iterator"),s=n.NodeList,c=n.HTMLCollection,l=s&&s.prototype,u=c&&c.prototype,d=i.NodeList=i.HTMLCollection=i.Array;l&&!l[o]&&a(l,o,d),u&&!u[o]&&a(u,o,d)},function(e,t,r){"use strict";var n=r(1),a=r(136);n(n.G+n.B,{setImmediate:a.set,clearImmediate:a.clear})},function(e,t,r){"use strict";var n=r(9),a=r(1),i=r(71),o=r(196),s=n.navigator,c=!!s&&/MSIE .\./.test(s.userAgent),l=function(e){return c?function(t,r){return e(i(o,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),r)}:e};a(a.G+a.B+a.F*c,{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)})},function(e,t,r){"use strict";r(201),r(284),r(239),r(247),r(251),r(252),r(240),r(250),r(249),r(245),r(246),r(244),r(241),r(243),r(248),r(242),r(210),r(209),r(229),r(230),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(277),r(280),r(283),r(279),r(275),r(276),r(278),r(281),r(282),r(206),r(207),r(138),r(208),r(202),r(203),r(205),r(204),r(268),r(269),r(270),r(271),r(272),r(273),r(253),r(211),r(274),r(285),r(286),r(254),r(255),r(256),r(257),r(258),r(261),r(259),r(260),r(262),r(263),r(264),r(265),r(267),r(266),r(287),r(294),r(295),r(296),r(297),r(298),r(292),r(290),r(291),r(289),r(288),r(293),r(299),r(302),r(301),r(300),e.exports=r(33)},function(e,t,r){(function(t,r){"use strict";!function(t){function n(e,t,r,n){var a=Object.create((t||i).prototype),o=new p(n||[]);return a._invoke=d(e,r,o),a}function a(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function i(){}function o(){}function s(){}function c(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){this.arg=e}function u(e){function t(t,r){var n=e[t](r),a=n.value;return a instanceof l?Promise.resolve(a.arg).then(i,o):Promise.resolve(a).then(function(e){return n.value=e,n})}function n(e,r){function n(){return t(e,r)}return a=a?a.then(n,n):new Promise(function(e){e(n())})}"object"==typeof r&&r.domain&&(t=r.domain.bind(t));var a,i=t.bind(e,"next"),o=t.bind(e,"throw");t.bind(e,"return");this._invoke=n}function d(e,t,r){var n=_;return function(i,o){if(n===k)throw new Error("Generator is already running");if(n===C){if("throw"===i)throw o;return v()}for(;;){var s=r.delegate;if(s){if("return"===i||"throw"===i&&s.iterator[i]===m){r.delegate=null;var c=s.iterator["return"];if(c){var l=a(c,s.iterator,o);if("throw"===l.type){i="throw",o=l.arg;continue}}if("return"===i)continue}var l=a(s.iterator[i],s.iterator,o);if("throw"===l.type){r.delegate=null,i="throw",o=l.arg;continue}i="next",o=m;var u=l.arg;if(!u.done)return n=S,u;r[s.resultName]=u.value,r.next=s.nextLoc,r.delegate=null}if("next"===i)n===S?r.sent=o:r.sent=m;else if("throw"===i){if(n===_)throw n=C,o;r.dispatchException(o)&&(i="next",o=m)}else"return"===i&&r.abrupt("return",o);n=k;var l=a(e,t,r);if("normal"===l.type){n=r.done?C:S;var u={value:l.arg,done:r.done};if(l.arg!==T)return u;r.delegate&&"next"===i&&(o=m)}else"throw"===l.type&&(n=C,i="throw",o=l.arg)}}}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function g(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function a(){for(;++r<e.length;)if(y.call(e,r))return a.value=e[r],a.done=!1,a;return a.value=m,a.done=!0,a};return n.next=n}}return{next:v}}function v(){return{value:m,done:!0}}var m,y=Object.prototype.hasOwnProperty,w="function"==typeof Symbol&&Symbol.iterator||"@@iterator",x="object"==typeof e,b=t.regeneratorRuntime;if(b)return void(x&&(e.exports=b));b=t.regeneratorRuntime=x?e.exports:{},b.wrap=n;var _="suspendedStart",S="suspendedYield",k="executing",C="completed",T={},E=s.prototype=i.prototype;o.prototype=E.constructor=s,s.constructor=o,o.displayName="GeneratorFunction",b.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===o||"GeneratorFunction"===(t.displayName||t.name):!1},b.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s,e.prototype=Object.create(E),e},b.awrap=function(e){return new l(e)},c(u.prototype),b.async=function(e,t,r,a){var i=new u(n(e,t,r,a));return b.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},c(E),E[w]=function(){return this},E.toString=function(){return"[object Generator]"},b.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},b.values=g,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return i.type="throw",i.arg=e,r.next=t,!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=y.call(a,"catchLoc"),s=y.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?this.next=a.finallyLoc:this.complete(i),T},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),f(r),T}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;f(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:g(e),resultName:t,nextLoc:r},T}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:void 0)}).call(t,function(){return this}(),r(315))},function(e,t,r){"use strict";e.exports=r(188)},,,,,,function(e,t,r){var n,a;!function(){var r=function(e){"use strict";function t(e){if(e.paused||e.ended||v)return!1;try{u.clearRect(0,0,c,s),u.drawImage(e,0,0,c,s)}catch(r){}w=setTimeout(function(){t(e)},O.duration),R.setIcon(l)}function r(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,r,n){return t+t+r+r+n+n});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:!1}function n(e,t){var r,n={};for(r in e)n[r]=e[r];for(r in t)n[r]=t[r];return n}function a(){return x.hidden||x.msHidden||x.webkitHidden||x.mozHidden}e=e?e:{};var i,o,s,c,l,u,d,h,f,p,g,v,m,y,w,x,b={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1,dataUrl:!1,win:window};m={},m.ff="undefined"!=typeof InstallTrigger,m.chrome=!!window.chrome,m.opera=!!window.opera||navigator.userAgent.indexOf("Opera")>=0,m.ie=!1,m.safari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,m.supported=m.chrome||m.ff||m.opera;var _=[];g=function(){},h=v=!1;var S=function(){i=n(b,e),i.bgColor=r(i.bgColor),i.textColor=r(i.textColor),i.position=i.position.toLowerCase(),i.animation=O.types[""+i.animation]?i.animation:b.animation,x=i.win.document;var t=i.position.indexOf("up")>-1,a=i.position.indexOf("left")>-1;if(t||a)for(var h=0;h<O.types[""+i.animation].length;h++){var f=O.types[""+i.animation][h];t&&(f.y<.6?f.y=f.y-.4:f.y=f.y-2*f.y+(1-f.w)),a&&(f.x<.6?f.x=f.x-.4:f.x=f.x-2*f.x+(1-f.h)),O.types[""+i.animation][h]=f}i.type=C[""+i.type]?i.type:b.type,o=R.getIcon(),l=document.createElement("canvas"),d=document.createElement("img"),o.hasAttribute("href")?(d.setAttribute("crossOrigin","anonymous"),d.onload=function(){s=d.height>0?d.height:32,c=d.width>0?d.width:32,l.height=s,l.width=c,u=l.getContext("2d"),k.ready()},d.setAttribute("src",o.getAttribute("href"))):(d.onload=function(){s=32,c=32,d.height=s,d.width=c,l.height=s,l.width=c,u=l.getContext("2d"),k.ready()},d.setAttribute("src",""))},k={};k.ready=function(){h=!0,k.reset(),g()},k.reset=function(){h&&(_=[],f=!1,p=!1,u.clearRect(0,0,c,s),u.drawImage(d,0,0,c,s),R.setIcon(l),window.clearTimeout(y),window.clearTimeout(w))},k.start=function(){if(h&&!p){var e=function(){f=_[0],p=!1,_.length>0&&(_.shift(),k.start())};if(_.length>0){p=!0;var t=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach(function(e){e in _[0].options&&(i[e]=_[0].options[e])}),O.run(_[0].options,function(){e()},!1)};f?O.run(f.options,function(){t()},!0):t()}}};var C={},T=function(e){return e.n="number"==typeof e.n?Math.abs(0|e.n):e.n,e.x=c*e.x,e.y=s*e.y,e.w=c*e.w,e.h=s*e.h,e.len=(""+e.n).length,e};C.circle=function(e){e=T(e);var t=!1;2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,t=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,t=!0),u.clearRect(0,0,c,s),u.drawImage(d,0,0,c,s),u.beginPath(),u.font=i.fontStyle+" "+Math.floor(e.h*(e.n>99?.85:1))+"px "+i.fontFamily,u.textAlign="center",t?(u.moveTo(e.x+e.w/2,e.y),u.lineTo(e.x+e.w-e.h/2,e.y),u.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.h/2),u.lineTo(e.x+e.w,e.y+e.h-e.h/2),u.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.h/2,e.y+e.h),u.lineTo(e.x+e.h/2,e.y+e.h),u.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.h/2),u.lineTo(e.x,e.y+e.h/2),u.quadraticCurveTo(e.x,e.y,e.x+e.h/2,e.y)):u.arc(e.x+e.w/2,e.y+e.h/2,e.h/2,0,2*Math.PI),u.fillStyle="rgba("+i.bgColor.r+","+i.bgColor.g+","+i.bgColor.b+","+e.o+")",u.fill(),u.closePath(),u.beginPath(),u.stroke(),u.fillStyle="rgba("+i.textColor.r+","+i.textColor.g+","+i.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?u.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):u.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),u.closePath()},C.rectangle=function(e){e=T(e);var t=!1;2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,t=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,t=!0),u.clearRect(0,0,c,s),u.drawImage(d,0,0,c,s),u.beginPath(),u.font=i.fontStyle+" "+Math.floor(e.h*(e.n>99?.9:1))+"px "+i.fontFamily,u.textAlign="center",u.fillStyle="rgba("+i.bgColor.r+","+i.bgColor.g+","+i.bgColor.b+","+e.o+")",u.fillRect(e.x,e.y,e.w,e.h),u.fillStyle="rgba("+i.textColor.r+","+i.textColor.g+","+i.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?u.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):u.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),u.closePath()};var E=function(e,t){t=("string"==typeof t?{animation:t}:t)||{},g=function(){try{if("number"==typeof e?e>0:""!==e){var n={type:"badge",options:{n:e}};if("animation"in t&&O.types[""+t.animation]&&(n.options.animation=""+t.animation),"type"in t&&C[""+t.type]&&(n.options.type=""+t.type),["bgColor","textColor"].forEach(function(e){e in t&&(n.options[e]=r(t[e]))}),["fontStyle","fontFamily"].forEach(function(e){e in t&&(n.options[e]=t[e])}),_.push(n),_.length>100)throw new Error("Too many badges requests in queue.");k.start()}else k.reset()}catch(a){throw new Error("Error setting badge. Message: "+a.message)}},h&&g()},P=function(e){g=function(){try{var t=e.width,r=e.height,n=document.createElement("img"),a=r/s>t/c?t/c:r/s;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){u.clearRect(0,0,c,s),u.drawImage(n,0,0,c,s),R.setIcon(l)},n.setAttribute("src",e.getAttribute("src")),n.height=r/a,n.width=t/a}catch(i){throw new Error("Error setting image. Message: "+i.message)}},h&&g()},A=function(e){g=function(){try{if("stop"===e)return v=!0,k.reset(),void(v=!1);e.addEventListener("play",function(){t(this)},!1)}catch(r){throw new Error("Error setting video. Message: "+r.message)}},h&&g()},M=function(e){if(window.URL&&window.URL.createObjectURL||(window.URL=window.URL||{},window.URL.createObjectURL=function(e){return e}),m.supported){var r=!1;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,g=function(){try{if("stop"===e)return v=!0,k.reset(),void(v=!1);r=document.createElement("video"),r.width=c,r.height=s,navigator.getUserMedia({video:!0,audio:!1},function(e){r.src=URL.createObjectURL(e),r.play(),t(r)},function(){})}catch(n){throw new Error("Error setting webcam. Message: "+n.message)}},h&&g()}},R={};R.getIcon=function(){var e=!1,t=function(){for(var e=x.getElementsByTagName("head")[0].getElementsByTagName("link"),t=e.length,r=t-1;r>=0;r--)if(/(^|\s)icon(\s|$)/i.test(e[r].getAttribute("rel")))return e[r];return!1};return i.element?e=i.element:i.elementId?(e=x.getElementById(i.elementId),e.setAttribute("href",e.getAttribute("src"))):(e=t(),e===!1&&(e=x.createElement("link"),e.setAttribute("rel","icon"),x.getElementsByTagName("head")[0].appendChild(e))),e.setAttribute("type","image/png"),e},R.setIcon=function(e){var t=e.toDataURL("image/png");if(i.dataUrl&&i.dataUrl(t),i.element)i.element.setAttribute("href",t),i.element.setAttribute("src",t);else if(i.elementId){var r=x.getElementById(i.elementId);r.setAttribute("href",t),r.setAttribute("src",t)}else if(m.ff||m.opera){var n=o;
o=x.createElement("link"),m.opera&&o.setAttribute("rel","icon"),o.setAttribute("rel","icon"),o.setAttribute("type","image/png"),x.getElementsByTagName("head")[0].appendChild(o),o.setAttribute("href",t),n.parentNode&&n.parentNode.removeChild(n)}else o.setAttribute("href",t)};var O={};return O.duration=40,O.types={},O.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],O.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],O.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],O.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],O.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],O.run=function(e,t,r,o){var s=O.types[a()?"none":i.animation];return o=r===!0?"undefined"!=typeof o?o:s.length-1:"undefined"!=typeof o?o:0,t=t?t:function(){},o<s.length&&o>=0?(C[i.type](n(e,s[o])),y=setTimeout(function(){r?o-=1:o+=1,O.run(e,t,r,o)},O.duration),R.setIcon(l),void 0):void t()},S(),{badge:E,video:A,image:P,webcam:M,reset:k.reset,browser:{supported:m.supported}}};n=[],a=function(){return r}.apply(t,n),!(void 0!==a&&(e.exports=a))}()},function(e,t,r){var n;!function(a,i){n=function(){return i(a,a.document)}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}("undefined"!=typeof window?window:void 0,function(e,t){"use strict";function r(r){if(this.hasDeviceMotion="ondevicemotion"in e,this.options={threshold:15,timeout:1e3},"object"==typeof r)for(var n in r)r.hasOwnProperty(n)&&(this.options[n]=r[n]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof t.CustomEvent)this.event=new t.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof t.createEvent)return!1;this.event=t.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return r.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},r.prototype.start=function(){this.reset(),this.hasDeviceMotion&&e.addEventListener("devicemotion",this,!1)},r.prototype.stop=function(){this.hasDeviceMotion&&e.removeEventListener("devicemotion",this,!1),this.reset()},r.prototype.devicemotion=function(t){var r,n,a=t.accelerationIncludingGravity,i=0,o=0,s=0;return null===this.lastX&&null===this.lastY&&null===this.lastZ?(this.lastX=a.x,this.lastY=a.y,void(this.lastZ=a.z)):(i=Math.abs(this.lastX-a.x),o=Math.abs(this.lastY-a.y),s=Math.abs(this.lastZ-a.z),(i>this.options.threshold&&o>this.options.threshold||i>this.options.threshold&&s>this.options.threshold||o>this.options.threshold&&s>this.options.threshold)&&(r=new Date,n=r.getTime()-this.lastTime.getTime(),n>this.options.timeout&&(e.dispatchEvent(this.event),this.lastTime=new Date)),this.lastX=a.x,this.lastY=a.y,void(this.lastZ=a.z))},r.prototype.handleEvent=function(e){return"function"==typeof this[e.type]?this[e.type](e):void 0},r})},function(e,t){(function(t){"use strict";var r;if(t.crypto&&crypto.getRandomValues){var n=new Uint8Array(16);r=function(){return crypto.getRandomValues(n),n}}if(!r){var a=new Array(16);r=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}e.exports=r}).call(t,function(){return this}())},,function(e,t){"use strict";function r(){l&&o&&(l=!1,o.length?c=o.concat(c):u=-1,c.length&&n())}function n(){if(!l){var e=setTimeout(r);l=!0;for(var t=c.length;t;){for(o=c,c=[];++u<t;)o&&o[u].run();u=-1,t=c.length}o=null,l=!1,clearTimeout(e)}}function a(e,t){this.fun=e,this.array=t}function i(){}var o,s=e.exports={},c=[],l=!1,u=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new a(e,t)),1!==c.length||l||setTimeout(n,0)},a.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}]);